const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-Dt1HMqYc.js","assets/basedecoder-DvumDe3Y.js","assets/lzw-DpvbRwG5.js","assets/jpeg-CdeCw_eT.js","assets/deflate-CUkHh1nh.js","assets/pako.esm-CPws4d4z.js","assets/packbits-DQnG8s9w.js","assets/lerc-CexWZvwD.js","assets/webimage-BcnuJlio.js"])))=>i.map(i=>d[i]);
var dP=Object.defineProperty;var gP=(t,e,n)=>e in t?dP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Cv=(t,e,n)=>gP(t,typeof e!="symbol"?e+"":e,n);function mP(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function tc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qw={exports:{}},gd={},Zw={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),pP=Symbol.for("react.portal"),yP=Symbol.for("react.fragment"),_P=Symbol.for("react.strict_mode"),vP=Symbol.for("react.profiler"),xP=Symbol.for("react.provider"),EP=Symbol.for("react.context"),wP=Symbol.for("react.forward_ref"),SP=Symbol.for("react.suspense"),CP=Symbol.for("react.memo"),TP=Symbol.for("react.lazy"),Tv=Symbol.iterator;function MP(t){return t===null||typeof t!="object"?null:(t=Tv&&t[Tv]||t["@@iterator"],typeof t=="function"?t:null)}var Jw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qw=Object.assign,eS={};function $a(t,e,n){this.props=t,this.context=e,this.refs=eS,this.updater=n||Jw}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tS(){}tS.prototype=$a.prototype;function hy(t,e,n){this.props=t,this.context=e,this.refs=eS,this.updater=n||Jw}var fy=hy.prototype=new tS;fy.constructor=hy;Qw(fy,$a.prototype);fy.isPureReactComponent=!0;var Mv=Array.isArray,nS=Object.prototype.hasOwnProperty,dy={current:null},iS={key:!0,ref:!0,__self:!0,__source:!0};function rS(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nS.call(e,i)&&!iS.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:nc,type:t,key:s,ref:o,props:r,_owner:dy.current}}function RP(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gy(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function bP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rv=/\/+/g;function Dg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bP(""+t.key):e.toString(36)}function Rh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nc:case pP:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Dg(o,0):i,Mv(r)?(n="",t!=null&&(n=t.replace(Rv,"$&/")+"/"),Rh(r,e,n,"",function(u){return u})):r!=null&&(gy(r)&&(r=RP(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Rv,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Mv(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Dg(s,a);o+=Rh(s,e,n,l,r)}else if(l=MP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Dg(s,a++),o+=Rh(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oc(t,e,n){if(t==null)return t;var i=[],r=0;return Rh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function IP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},bh={transition:null},PP={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:bh,ReactCurrentOwner:dy};function sS(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Oc,forEach:function(t,e,n){Oc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oc(t,function(){e++}),e},toArray:function(t){return Oc(t,function(e){return e})||[]},only:function(t){if(!gy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=$a;_e.Fragment=yP;_e.Profiler=vP;_e.PureComponent=hy;_e.StrictMode=_P;_e.Suspense=SP;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;_e.act=sS;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Qw({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)nS.call(e,l)&&!iS.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:nc,type:t.type,key:r,ref:s,props:i,_owner:o}};_e.createContext=function(t){return t={$$typeof:EP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xP,_context:t},t.Consumer=t};_e.createElement=rS;_e.createFactory=function(t){var e=rS.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:wP,render:t}};_e.isValidElement=gy;_e.lazy=function(t){return{$$typeof:TP,_payload:{_status:-1,_result:t},_init:IP}};_e.memo=function(t,e){return{$$typeof:CP,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=bh.transition;bh.transition={};try{t()}finally{bh.transition=e}};_e.unstable_act=sS;_e.useCallback=function(t,e){return Jt.current.useCallback(t,e)};_e.useContext=function(t){return Jt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Jt.current.useEffect(t,e)};_e.useId=function(){return Jt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Jt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};_e.useRef=function(t){return Jt.current.useRef(t)};_e.useState=function(t){return Jt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Jt.current.useTransition()};_e.version="18.3.1";Zw.exports=_e;var T=Zw.exports;const my=tc(T),sm=mP({__proto__:null,default:my},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AP=T,OP=Symbol.for("react.element"),LP=Symbol.for("react.fragment"),kP=Object.prototype.hasOwnProperty,DP=AP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FP={key:!0,ref:!0,__self:!0,__source:!0};function oS(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)kP.call(e,i)&&!FP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:OP,type:t,key:s,ref:o,props:r,_owner:DP.current}}gd.Fragment=LP;gd.jsx=oS;gd.jsxs=oS;qw.exports=gd;var I=qw.exports,aS={exports:{}},Pn={},lS={exports:{}},uS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var P=O.length;O.push(F);e:for(;0<P;){var N=P-1>>>1,z=O[N];if(0<r(z,F))O[N]=F,O[P]=z,P=N;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var F=O[0],P=O.pop();if(P!==F){O[0]=P;e:for(var N=0,z=O.length,H=z>>>1;N<H;){var L=2*(N+1)-1,q=O[L],Z=L+1,te=O[Z];if(0>r(q,P))Z<z&&0>r(te,q)?(O[N]=te,O[Z]=P,N=Z):(O[N]=q,O[L]=P,N=L);else if(Z<z&&0>r(te,P))O[N]=te,O[Z]=P,N=Z;else break e}}return F}function r(O,F){var P=O.sortIndex-F.sortIndex;return P!==0?P:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,g=!1,d=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var F=n(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=O)i(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function x(O){if(p=!1,v(O),!d)if(n(l)!==null)d=!0,j(E);else{var F=n(u);F!==null&&$(x,F.startTime-O)}}function E(O,F){d=!1,p&&(p=!1,_(S),S=-1),g=!0;var P=f;try{for(v(F),h=n(l);h!==null&&(!(h.expirationTime>F)||O&&!k());){var N=h.callback;if(typeof N=="function"){h.callback=null,f=h.priorityLevel;var z=N(h.expirationTime<=F);F=t.unstable_now(),typeof z=="function"?h.callback=z:h===n(l)&&i(l),v(F)}else i(l);h=n(l)}if(h!==null)var H=!0;else{var L=n(u);L!==null&&$(x,L.startTime-F),H=!1}return H}finally{h=null,f=P,g=!1}}var w=!1,C=null,S=-1,R=5,M=-1;function k(){return!(t.unstable_now()-M<R)}function A(){if(C!==null){var O=t.unstable_now();M=O;var F=!0;try{F=C(!0,O)}finally{F?U():(w=!1,C=null)}}else w=!1}var U;if(typeof y=="function")U=function(){y(A)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=A,U=function(){G.postMessage(null)}}else U=function(){m(A,0)};function j(O){C=O,w||(w=!0,U())}function $(O,F){S=m(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){d||g||(d=!0,j(E))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var P=f;f=F;try{return O()}finally{f=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var P=f;f=O;try{return F()}finally{f=P}},t.unstable_scheduleCallback=function(O,F,P){var N=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?N+P:N):P=N,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=P+z,O={id:c++,callback:F,priorityLevel:O,startTime:P,expirationTime:z,sortIndex:-1},P>N?(O.sortIndex=P,e(u,O),n(l)===null&&O===n(u)&&(p?(_(S),S=-1):p=!0,$(x,P-N))):(O.sortIndex=z,e(l,O),d||g||(d=!0,j(E))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var F=f;return function(){var P=f;f=F;try{return O.apply(this,arguments)}finally{f=P}}}})(uS);lS.exports=uS;var NP=lS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP=T,bn=NP;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cS=new Set,uu={};function no(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(uu[t]=e,t=0;t<e.length;t++)cS.add(e[t])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,UP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bv={},Iv={};function zP(t){return om.call(Iv,t)?!0:om.call(bv,t)?!1:UP.test(t)?Iv[t]=!0:(bv[t]=!0,!1)}function jP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BP(t,e,n,i){if(e===null||typeof e>"u"||jP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var py=/[\-:]([a-z])/g;function yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(py,yy);Tt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(py,yy);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(py,yy);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _y(t,e,n,i){var r=Tt.hasOwnProperty(e)?Tt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BP(e,n,r,i)&&(n=null),i||r===null?zP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xr=GP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),Po=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),hS=Symbol.for("react.provider"),fS=Symbol.for("react.context"),xy=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),um=Symbol.for("react.suspense_list"),Ey=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),dS=Symbol.for("react.offscreen"),Pv=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=Pv&&t[Pv]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Fg;function Il(t){if(Fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fg=e&&e[1]||""}return`
`+Fg+t}var Ng=!1;function Gg(t,e){if(!t||Ng)return"";Ng=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ng=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Il(t):""}function $P(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=Gg(t.type,!1),t;case 11:return t=Gg(t.type.render,!1),t;case 1:return t=Gg(t.type,!0),t;default:return""}}function cm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case Po:return"Portal";case am:return"Profiler";case vy:return"StrictMode";case lm:return"Suspense";case um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fS:return(t.displayName||"Context")+".Consumer";case hS:return(t._context.displayName||"Context")+".Provider";case xy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ey:return e=t.displayName||null,e!==null?e:cm(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return cm(t(e))}catch{}}return null}function VP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(e);case 8:return e===vy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XP(t){var e=gS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kc(t){t._valueTracker||(t._valueTracker=XP(t))}function mS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gS(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function tf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hm(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Av(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pS(t,e){e=e.checked,e!=null&&_y(t,"checked",e,!1)}function fm(t,e){pS(t,e);var n=Qr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ov(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||tf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pl=Array.isArray;function ta(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Pl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function yS(t,e){var n=Qr(e.value),i=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function kv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _S(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_S(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,vS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WP=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){WP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function xS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function ES(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=xS(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var HP=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pm(t,e){if(e){if(HP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function ym(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vm=null,na=null,ia=null;function Dv(t){if(t=sc(t)){if(typeof vm!="function")throw Error(W(280));var e=t.stateNode;e&&(e=vd(e),vm(t.stateNode,t.type,e))}}function wS(t){na?ia?ia.push(t):ia=[t]:na=t}function SS(){if(na){var t=na,e=ia;if(ia=na=null,Dv(t),e)for(t=0;t<e.length;t++)Dv(e[t])}}function CS(t,e){return t(e)}function TS(){}var Ug=!1;function MS(t,e,n){if(Ug)return t(e,n);Ug=!0;try{return CS(t,e,n)}finally{Ug=!1,(na!==null||ia!==null)&&(TS(),SS())}}function hu(t,e){var n=t.stateNode;if(n===null)return null;var i=vd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var xm=!1;if(hr)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){xm=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{xm=!1}function YP(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Vl=!1,nf=null,rf=!1,Em=null,KP={onError:function(t){Vl=!0,nf=t}};function qP(t,e,n,i,r,s,o,a,l){Vl=!1,nf=null,YP.apply(KP,arguments)}function ZP(t,e,n,i,r,s,o,a,l){if(qP.apply(this,arguments),Vl){if(Vl){var u=nf;Vl=!1,nf=null}else throw Error(W(198));rf||(rf=!0,Em=u)}}function io(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fv(t){if(io(t)!==t)throw Error(W(188))}function JP(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Fv(r),t;if(s===i)return Fv(r),e;s=s.sibling}throw Error(W(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==i)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function bS(t){return t=JP(t),t!==null?IS(t):null}function IS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=IS(t);if(e!==null)return e;t=t.sibling}return null}var PS=bn.unstable_scheduleCallback,Nv=bn.unstable_cancelCallback,QP=bn.unstable_shouldYield,eA=bn.unstable_requestPaint,Qe=bn.unstable_now,tA=bn.unstable_getCurrentPriorityLevel,Sy=bn.unstable_ImmediatePriority,AS=bn.unstable_UserBlockingPriority,sf=bn.unstable_NormalPriority,nA=bn.unstable_LowPriority,OS=bn.unstable_IdlePriority,md=null,Di=null;function iA(t){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(md,t,void 0,(t.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:oA,rA=Math.log,sA=Math.LN2;function oA(t){return t>>>=0,t===0?32:31-(rA(t)/sA|0)|0}var Fc=64,Nc=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function of(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Al(a):(s&=o,s!==0&&(i=Al(s)))}else o=n&~r,o!==0?i=Al(o):s!==0&&(i=Al(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-si(e),r=1<<n,i|=t[n],e&=~r;return i}function aA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-si(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=aA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LS(){var t=Fc;return Fc<<=1,!(Fc&4194240)&&(Fc=64),t}function zg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-si(e),t[e]=n}function uA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-si(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Cy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-si(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Oe=0;function kS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DS,Ty,FS,NS,GS,Sm=!1,Gc=[],Br=null,$r=null,Vr=null,fu=new Map,du=new Map,Dr=[],cA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gv(t,e){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function ml(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=sc(e),e!==null&&Ty(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function hA(t,e,n,i,r){switch(e){case"focusin":return Br=ml(Br,t,e,n,i,r),!0;case"dragenter":return $r=ml($r,t,e,n,i,r),!0;case"mouseover":return Vr=ml(Vr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return fu.set(s,ml(fu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,du.set(s,ml(du.get(s)||null,t,e,n,i,r)),!0}return!1}function US(t){var e=Is(t.target);if(e!==null){var n=io(e);if(n!==null){if(e=n.tag,e===13){if(e=RS(n),e!==null){t.blockedOn=e,GS(t.priority,function(){FS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);_m=i,n.target.dispatchEvent(i),_m=null}else return e=sc(n),e!==null&&Ty(e),t.blockedOn=n,!1;e.shift()}return!0}function Uv(t,e,n){Ih(t)&&n.delete(e)}function fA(){Sm=!1,Br!==null&&Ih(Br)&&(Br=null),$r!==null&&Ih($r)&&($r=null),Vr!==null&&Ih(Vr)&&(Vr=null),fu.forEach(Uv),du.forEach(Uv)}function pl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,fA)))}function gu(t){function e(r){return pl(r,t)}if(0<Gc.length){pl(Gc[0],t);for(var n=1;n<Gc.length;n++){var i=Gc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Br!==null&&pl(Br,t),$r!==null&&pl($r,t),Vr!==null&&pl(Vr,t),fu.forEach(e),du.forEach(e),n=0;n<Dr.length;n++)i=Dr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)US(n),n.blockedOn===null&&Dr.shift()}var ra=xr.ReactCurrentBatchConfig,af=!0;function dA(t,e,n,i){var r=Oe,s=ra.transition;ra.transition=null;try{Oe=1,My(t,e,n,i)}finally{Oe=r,ra.transition=s}}function gA(t,e,n,i){var r=Oe,s=ra.transition;ra.transition=null;try{Oe=4,My(t,e,n,i)}finally{Oe=r,ra.transition=s}}function My(t,e,n,i){if(af){var r=Cm(t,e,n,i);if(r===null)qg(t,e,i,lf,n),Gv(t,i);else if(hA(r,t,e,n,i))i.stopPropagation();else if(Gv(t,i),e&4&&-1<cA.indexOf(t)){for(;r!==null;){var s=sc(r);if(s!==null&&DS(s),s=Cm(t,e,n,i),s===null&&qg(t,e,i,lf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qg(t,e,i,null,n)}}var lf=null;function Cm(t,e,n,i){if(lf=null,t=wy(i),t=Is(t),t!==null)if(e=io(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lf=t,null}function zS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tA()){case Sy:return 1;case AS:return 4;case sf:case nA:return 16;case OS:return 536870912;default:return 16}default:return 16}}var Nr=null,Ry=null,Ph=null;function jS(){if(Ph)return Ph;var t,e=Ry,n=e.length,i,r="value"in Nr?Nr.value:Nr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ph=r.slice(t,1<i?1-i:void 0)}function Ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function zv(){return!1}function An(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uc:zv,this.isPropagationStopped=zv,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},by=An(Va),rc=He({},Va,{view:0,detail:0}),mA=An(rc),jg,Bg,yl,pd=He({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(jg=t.screenX-yl.screenX,Bg=t.screenY-yl.screenY):Bg=jg=0,yl=t),jg)},movementY:function(t){return"movementY"in t?t.movementY:Bg}}),jv=An(pd),pA=He({},pd,{dataTransfer:0}),yA=An(pA),_A=He({},rc,{relatedTarget:0}),$g=An(_A),vA=He({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),xA=An(vA),EA=He({},Va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wA=An(EA),SA=He({},Va,{data:0}),Bv=An(SA),CA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MA[t])?!!e[t]:!1}function Iy(){return RA}var bA=He({},rc,{key:function(t){if(t.key){var e=CA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iy,charCode:function(t){return t.type==="keypress"?Ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IA=An(bA),PA=He({},pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$v=An(PA),AA=He({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iy}),OA=An(AA),LA=He({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),kA=An(LA),DA=He({},pd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=An(DA),NA=[9,13,27,32],Py=hr&&"CompositionEvent"in window,Xl=null;hr&&"documentMode"in document&&(Xl=document.documentMode);var GA=hr&&"TextEvent"in window&&!Xl,BS=hr&&(!Py||Xl&&8<Xl&&11>=Xl),Vv=" ",Xv=!1;function $S(t,e){switch(t){case"keyup":return NA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oo=!1;function UA(t,e){switch(t){case"compositionend":return VS(e);case"keypress":return e.which!==32?null:(Xv=!0,Vv);case"textInput":return t=e.data,t===Vv&&Xv?null:t;default:return null}}function zA(t,e){if(Oo)return t==="compositionend"||!Py&&$S(t,e)?(t=jS(),Ph=Ry=Nr=null,Oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BS&&e.locale!=="ko"?null:e.data;default:return null}}var jA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jA[t.type]:e==="textarea"}function XS(t,e,n,i){wS(i),e=uf(e,"onChange"),0<e.length&&(n=new by("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Wl=null,mu=null;function BA(t){nC(t,0)}function yd(t){var e=Do(t);if(mS(e))return t}function $A(t,e){if(t==="change")return e}var WS=!1;if(hr){var Vg;if(hr){var Xg="oninput"in document;if(!Xg){var Hv=document.createElement("div");Hv.setAttribute("oninput","return;"),Xg=typeof Hv.oninput=="function"}Vg=Xg}else Vg=!1;WS=Vg&&(!document.documentMode||9<document.documentMode)}function Yv(){Wl&&(Wl.detachEvent("onpropertychange",HS),mu=Wl=null)}function HS(t){if(t.propertyName==="value"&&yd(mu)){var e=[];XS(e,mu,t,wy(t)),MS(BA,e)}}function VA(t,e,n){t==="focusin"?(Yv(),Wl=e,mu=n,Wl.attachEvent("onpropertychange",HS)):t==="focusout"&&Yv()}function XA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yd(mu)}function WA(t,e){if(t==="click")return yd(e)}function HA(t,e){if(t==="input"||t==="change")return yd(e)}function YA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ui=typeof Object.is=="function"?Object.is:YA;function pu(t,e){if(ui(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!om.call(e,r)||!ui(t[r],e[r]))return!1}return!0}function Kv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qv(t,e){var n=Kv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kv(n)}}function YS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function KS(){for(var t=window,e=tf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tf(t.document)}return e}function Ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KA(t){var e=KS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YS(n.ownerDocument.documentElement,n)){if(i!==null&&Ay(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=qv(n,s);var o=qv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qA=hr&&"documentMode"in document&&11>=document.documentMode,Lo=null,Tm=null,Hl=null,Mm=!1;function Zv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mm||Lo==null||Lo!==tf(i)||(i=Lo,"selectionStart"in i&&Ay(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Hl&&pu(Hl,i)||(Hl=i,i=uf(Tm,"onSelect"),0<i.length&&(e=new by("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Lo)))}function zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ko={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},Wg={},qS={};hr&&(qS=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function _d(t){if(Wg[t])return Wg[t];if(!ko[t])return t;var e=ko[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qS)return Wg[t]=e[n];return t}var ZS=_d("animationend"),JS=_d("animationiteration"),QS=_d("animationstart"),eC=_d("transitionend"),tC=new Map,Jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){tC.set(t,e),no(e,[t])}for(var Hg=0;Hg<Jv.length;Hg++){var Yg=Jv[Hg],ZA=Yg.toLowerCase(),JA=Yg[0].toUpperCase()+Yg.slice(1);hs(ZA,"on"+JA)}hs(ZS,"onAnimationEnd");hs(JS,"onAnimationIteration");hs(QS,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(eC,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function Qv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ZP(i,e,void 0,t),t.currentTarget=null}function nC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Qv(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Qv(r,a,u),s=l}}}if(rf)throw t=Em,rf=!1,Em=null,t}function Ge(t,e){var n=e[Am];n===void 0&&(n=e[Am]=new Set);var i=t+"__bubble";n.has(i)||(iC(e,t,2,!1),n.add(i))}function Kg(t,e,n){var i=0;e&&(i|=4),iC(n,t,i,e)}var jc="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[jc]){t[jc]=!0,cS.forEach(function(n){n!=="selectionchange"&&(QA.has(n)||Kg(n,!1,t),Kg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jc]||(e[jc]=!0,Kg("selectionchange",!1,e))}}function iC(t,e,n,i){switch(zS(e)){case 1:var r=dA;break;case 4:r=gA;break;default:r=My}n=r.bind(null,e,n,t),r=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qg(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Is(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}MS(function(){var u=s,c=wy(n),h=[];e:{var f=tC.get(t);if(f!==void 0){var g=by,d=t;switch(t){case"keypress":if(Ah(n)===0)break e;case"keydown":case"keyup":g=IA;break;case"focusin":d="focus",g=$g;break;case"focusout":d="blur",g=$g;break;case"beforeblur":case"afterblur":g=$g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=jv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=yA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=OA;break;case ZS:case JS:case QS:g=xA;break;case eC:g=kA;break;case"scroll":g=mA;break;case"wheel":g=FA;break;case"copy":case"cut":case"paste":g=wA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=$v}var p=(e&4)!==0,m=!p&&t==="scroll",_=p?f!==null?f+"Capture":null:f;p=[];for(var y=u,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,_!==null&&(x=hu(y,_),x!=null&&p.push(_u(y,x,v)))),m)break;y=y.return}0<p.length&&(f=new g(f,d,null,n,c),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==_m&&(d=n.relatedTarget||n.fromElement)&&(Is(d)||d[fr]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(d=n.relatedTarget||n.toElement,g=u,d=d?Is(d):null,d!==null&&(m=io(d),d!==m||d.tag!==5&&d.tag!==6)&&(d=null)):(g=null,d=u),g!==d)){if(p=jv,x="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=$v,x="onPointerLeave",_="onPointerEnter",y="pointer"),m=g==null?f:Do(g),v=d==null?f:Do(d),f=new p(x,y+"leave",g,n,c),f.target=m,f.relatedTarget=v,x=null,Is(c)===u&&(p=new p(_,y+"enter",d,n,c),p.target=v,p.relatedTarget=m,x=p),m=x,g&&d)t:{for(p=g,_=d,y=0,v=p;v;v=co(v))y++;for(v=0,x=_;x;x=co(x))v++;for(;0<y-v;)p=co(p),y--;for(;0<v-y;)_=co(_),v--;for(;y--;){if(p===_||_!==null&&p===_.alternate)break t;p=co(p),_=co(_)}p=null}else p=null;g!==null&&ex(h,f,g,p,!1),d!==null&&m!==null&&ex(h,m,d,p,!0)}}e:{if(f=u?Do(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var E=$A;else if(Wv(f))if(WS)E=HA;else{E=XA;var w=VA}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=WA);if(E&&(E=E(t,u))){XS(h,E,n,c);break e}w&&w(t,f,u),t==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&dm(f,"number",f.value)}switch(w=u?Do(u):window,t){case"focusin":(Wv(w)||w.contentEditable==="true")&&(Lo=w,Tm=u,Hl=null);break;case"focusout":Hl=Tm=Lo=null;break;case"mousedown":Mm=!0;break;case"contextmenu":case"mouseup":case"dragend":Mm=!1,Zv(h,n,c);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":Zv(h,n,c)}var C;if(Py)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Oo?$S(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(BS&&n.locale!=="ko"&&(Oo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Oo&&(C=jS()):(Nr=c,Ry="value"in Nr?Nr.value:Nr.textContent,Oo=!0)),w=uf(u,S),0<w.length&&(S=new Bv(S,t,null,n,c),h.push({event:S,listeners:w}),C?S.data=C:(C=VS(n),C!==null&&(S.data=C)))),(C=GA?UA(t,n):zA(t,n))&&(u=uf(u,"onBeforeInput"),0<u.length&&(c=new Bv("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=C))}nC(h,e)})}function _u(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=hu(t,n),s!=null&&i.unshift(_u(t,s,r)),s=hu(t,e),s!=null&&i.push(_u(t,s,r))),t=t.return}return i}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ex(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=hu(n,s),l!=null&&o.unshift(_u(n,l,a))):r||(l=hu(n,s),l!=null&&o.push(_u(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eO=/\r\n?/g,tO=/\u0000|\uFFFD/g;function tx(t){return(typeof t=="string"?t:""+t).replace(eO,`
`).replace(tO,"")}function Bc(t,e,n){if(e=tx(e),tx(t)!==e&&n)throw Error(W(425))}function cf(){}var Rm=null,bm=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,nO=typeof clearTimeout=="function"?clearTimeout:void 0,nx=typeof Promise=="function"?Promise:void 0,iO=typeof queueMicrotask=="function"?queueMicrotask:typeof nx<"u"?function(t){return nx.resolve(null).then(t).catch(rO)}:Pm;function rO(t){setTimeout(function(){throw t})}function Zg(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),gu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);gu(e)}function Xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ix(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),bi="__reactFiber$"+Xa,vu="__reactProps$"+Xa,fr="__reactContainer$"+Xa,Am="__reactEvents$"+Xa,sO="__reactListeners$"+Xa,oO="__reactHandles$"+Xa;function Is(t){var e=t[bi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[bi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ix(t);t!==null;){if(n=t[bi])return n;t=ix(t)}return e}t=n,n=t.parentNode}return null}function sc(t){return t=t[bi]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Do(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function vd(t){return t[vu]||null}var Om=[],Fo=-1;function fs(t){return{current:t}}function Ue(t){0>Fo||(t.current=Om[Fo],Om[Fo]=null,Fo--)}function Fe(t,e){Fo++,Om[Fo]=t.current,t.current=e}var es={},zt=fs(es),hn=fs(!1),$s=es;function va(t,e){var n=t.type.contextTypes;if(!n)return es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function fn(t){return t=t.childContextTypes,t!=null}function hf(){Ue(hn),Ue(zt)}function rx(t,e,n){if(zt.current!==es)throw Error(W(168));Fe(zt,e),Fe(hn,n)}function rC(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(W(108,VP(t)||"Unknown",r));return He({},n,i)}function ff(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,$s=zt.current,Fe(zt,t),Fe(hn,hn.current),!0}function sx(t,e,n){var i=t.stateNode;if(!i)throw Error(W(169));n?(t=rC(t,e,$s),i.__reactInternalMemoizedMergedChildContext=t,Ue(hn),Ue(zt),Fe(zt,t)):Ue(hn),Fe(hn,n)}var tr=null,xd=!1,Jg=!1;function sC(t){tr===null?tr=[t]:tr.push(t)}function aO(t){xd=!0,sC(t)}function ds(){if(!Jg&&tr!==null){Jg=!0;var t=0,e=Oe;try{var n=tr;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}tr=null,xd=!1}catch(r){throw tr!==null&&(tr=tr.slice(t+1)),PS(Sy,ds),r}finally{Oe=e,Jg=!1}}return null}var No=[],Go=0,df=null,gf=0,Un=[],zn=0,Vs=null,ir=1,rr="";function Ts(t,e){No[Go++]=gf,No[Go++]=df,df=t,gf=e}function oC(t,e,n){Un[zn++]=ir,Un[zn++]=rr,Un[zn++]=Vs,Vs=t;var i=ir;t=rr;var r=32-si(i)-1;i&=~(1<<r),n+=1;var s=32-si(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ir=1<<32-si(e)+r|n<<r|i,rr=s+t}else ir=1<<s|n<<r|i,rr=t}function Oy(t){t.return!==null&&(Ts(t,1),oC(t,1,0))}function Ly(t){for(;t===df;)df=No[--Go],No[Go]=null,gf=No[--Go],No[Go]=null;for(;t===Vs;)Vs=Un[--zn],Un[zn]=null,rr=Un[--zn],Un[zn]=null,ir=Un[--zn],Un[zn]=null}var Tn=null,Cn=null,je=!1,ii=null;function aC(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ox(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,Cn=Xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vs!==null?{id:ir,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,Cn=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(je){var e=Cn;if(e){var n=e;if(!ox(t,e)){if(Lm(t))throw Error(W(418));e=Xr(n.nextSibling);var i=Tn;e&&ox(t,e)?aC(i,n):(t.flags=t.flags&-4097|2,je=!1,Tn=t)}}else{if(Lm(t))throw Error(W(418));t.flags=t.flags&-4097|2,je=!1,Tn=t}}}function ax(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function $c(t){if(t!==Tn)return!1;if(!je)return ax(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=Cn)){if(Lm(t))throw lC(),Error(W(418));for(;e;)aC(t,e),e=Xr(e.nextSibling)}if(ax(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Tn?Xr(t.stateNode.nextSibling):null;return!0}function lC(){for(var t=Cn;t;)t=Xr(t.nextSibling)}function xa(){Cn=Tn=null,je=!1}function ky(t){ii===null?ii=[t]:ii.push(t)}var lO=xr.ReactCurrentBatchConfig;function _l(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var i=n.stateNode}if(!i)throw Error(W(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Vc(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lx(t){var e=t._init;return e(t._payload)}function uC(t){function e(_,y){if(t){var v=_.deletions;v===null?(_.deletions=[y],_.flags|=16):v.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function i(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function r(_,y){return _=Kr(_,y),_.index=0,_.sibling=null,_}function s(_,y,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<y?(_.flags|=2,y):v):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,v,x){return y===null||y.tag!==6?(y=s0(v,_.mode,x),y.return=_,y):(y=r(y,v),y.return=_,y)}function l(_,y,v,x){var E=v.type;return E===Ao?c(_,y,v.props.children,x,v.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Or&&lx(E)===y.type)?(x=r(y,v.props),x.ref=_l(_,y,v),x.return=_,x):(x=Gh(v.type,v.key,v.props,null,_.mode,x),x.ref=_l(_,y,v),x.return=_,x)}function u(_,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=o0(v,_.mode,x),y.return=_,y):(y=r(y,v.children||[]),y.return=_,y)}function c(_,y,v,x,E){return y===null||y.tag!==7?(y=zs(v,_.mode,x,E),y.return=_,y):(y=r(y,v),y.return=_,y)}function h(_,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=s0(""+y,_.mode,v),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lc:return v=Gh(y.type,y.key,y.props,null,_.mode,v),v.ref=_l(_,null,y),v.return=_,v;case Po:return y=o0(y,_.mode,v),y.return=_,y;case Or:var x=y._init;return h(_,x(y._payload),v)}if(Pl(y)||dl(y))return y=zs(y,_.mode,v,null),y.return=_,y;Vc(_,y)}return null}function f(_,y,v,x){var E=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return E!==null?null:a(_,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Lc:return v.key===E?l(_,y,v,x):null;case Po:return v.key===E?u(_,y,v,x):null;case Or:return E=v._init,f(_,y,E(v._payload),x)}if(Pl(v)||dl(v))return E!==null?null:c(_,y,v,x,null);Vc(_,v)}return null}function g(_,y,v,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return _=_.get(v)||null,a(y,_,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lc:return _=_.get(x.key===null?v:x.key)||null,l(y,_,x,E);case Po:return _=_.get(x.key===null?v:x.key)||null,u(y,_,x,E);case Or:var w=x._init;return g(_,y,v,w(x._payload),E)}if(Pl(x)||dl(x))return _=_.get(v)||null,c(y,_,x,E,null);Vc(y,x)}return null}function d(_,y,v,x){for(var E=null,w=null,C=y,S=y=0,R=null;C!==null&&S<v.length;S++){C.index>S?(R=C,C=null):R=C.sibling;var M=f(_,C,v[S],x);if(M===null){C===null&&(C=R);break}t&&C&&M.alternate===null&&e(_,C),y=s(M,y,S),w===null?E=M:w.sibling=M,w=M,C=R}if(S===v.length)return n(_,C),je&&Ts(_,S),E;if(C===null){for(;S<v.length;S++)C=h(_,v[S],x),C!==null&&(y=s(C,y,S),w===null?E=C:w.sibling=C,w=C);return je&&Ts(_,S),E}for(C=i(_,C);S<v.length;S++)R=g(C,_,S,v[S],x),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?S:R.key),y=s(R,y,S),w===null?E=R:w.sibling=R,w=R);return t&&C.forEach(function(k){return e(_,k)}),je&&Ts(_,S),E}function p(_,y,v,x){var E=dl(v);if(typeof E!="function")throw Error(W(150));if(v=E.call(v),v==null)throw Error(W(151));for(var w=E=null,C=y,S=y=0,R=null,M=v.next();C!==null&&!M.done;S++,M=v.next()){C.index>S?(R=C,C=null):R=C.sibling;var k=f(_,C,M.value,x);if(k===null){C===null&&(C=R);break}t&&C&&k.alternate===null&&e(_,C),y=s(k,y,S),w===null?E=k:w.sibling=k,w=k,C=R}if(M.done)return n(_,C),je&&Ts(_,S),E;if(C===null){for(;!M.done;S++,M=v.next())M=h(_,M.value,x),M!==null&&(y=s(M,y,S),w===null?E=M:w.sibling=M,w=M);return je&&Ts(_,S),E}for(C=i(_,C);!M.done;S++,M=v.next())M=g(C,_,S,M.value,x),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?S:M.key),y=s(M,y,S),w===null?E=M:w.sibling=M,w=M);return t&&C.forEach(function(A){return e(_,A)}),je&&Ts(_,S),E}function m(_,y,v,x){if(typeof v=="object"&&v!==null&&v.type===Ao&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Lc:e:{for(var E=v.key,w=y;w!==null;){if(w.key===E){if(E=v.type,E===Ao){if(w.tag===7){n(_,w.sibling),y=r(w,v.props.children),y.return=_,_=y;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Or&&lx(E)===w.type){n(_,w.sibling),y=r(w,v.props),y.ref=_l(_,w,v),y.return=_,_=y;break e}n(_,w);break}else e(_,w);w=w.sibling}v.type===Ao?(y=zs(v.props.children,_.mode,x,v.key),y.return=_,_=y):(x=Gh(v.type,v.key,v.props,null,_.mode,x),x.ref=_l(_,y,v),x.return=_,_=x)}return o(_);case Po:e:{for(w=v.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(_,y.sibling),y=r(y,v.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=o0(v,_.mode,x),y.return=_,_=y}return o(_);case Or:return w=v._init,m(_,y,w(v._payload),x)}if(Pl(v))return d(_,y,v,x);if(dl(v))return p(_,y,v,x);Vc(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(_,y.sibling),y=r(y,v),y.return=_,_=y):(n(_,y),y=s0(v,_.mode,x),y.return=_,_=y),o(_)):n(_,y)}return m}var Ea=uC(!0),cC=uC(!1),mf=fs(null),pf=null,Uo=null,Dy=null;function Fy(){Dy=Uo=pf=null}function Ny(t){var e=mf.current;Ue(mf),t._currentValue=e}function Dm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){pf=t,Dy=Uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Yn(t){var e=t._currentValue;if(Dy!==t)if(t={context:t,memoizedValue:e,next:null},Uo===null){if(pf===null)throw Error(W(308));Uo=t,pf.dependencies={lanes:0,firstContext:t}}else Uo=Uo.next=t;return e}var Ps=null;function Gy(t){Ps===null?Ps=[t]:Ps.push(t)}function hC(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Gy(e)):(n.next=r.next,r.next=n),e.interleaved=n,dr(t,i)}function dr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Uy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,we&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,dr(t,n)}return r=i.interleaved,r===null?(e.next=e,Gy(i)):(e.next=r.next,r.next=e),i.interleaved=e,dr(t,n)}function Oh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Cy(t,n)}}function ux(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yf(t,e,n,i){var r=t.updateQueue;Lr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var d=t,p=a;switch(f=e,g=n,p.tag){case 1:if(d=p.payload,typeof d=="function"){h=d.call(g,h,f);break e}h=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=p.payload,f=typeof d=="function"?d.call(g,h,f):d,f==null)break e;h=He({},h,f);break e;case 2:Lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=h):c=c.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ws|=o,t.lanes=o,t.memoizedState=h}}function cx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(W(191,r));r.call(i)}}}var oc={},Fi=fs(oc),xu=fs(oc),Eu=fs(oc);function As(t){if(t===oc)throw Error(W(174));return t}function zy(t,e){switch(Fe(Eu,e),Fe(xu,t),Fe(Fi,oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mm(e,t)}Ue(Fi),Fe(Fi,e)}function wa(){Ue(Fi),Ue(xu),Ue(Eu)}function dC(t){As(Eu.current);var e=As(Fi.current),n=mm(e,t.type);e!==n&&(Fe(xu,t),Fe(Fi,n))}function jy(t){xu.current===t&&(Ue(Fi),Ue(xu))}var Xe=fs(0);function _f(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qg=[];function By(){for(var t=0;t<Qg.length;t++)Qg[t]._workInProgressVersionPrimary=null;Qg.length=0}var Lh=xr.ReactCurrentDispatcher,e0=xr.ReactCurrentBatchConfig,Xs=0,We=null,lt=null,gt=null,vf=!1,Yl=!1,wu=0,uO=0;function It(){throw Error(W(321))}function $y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ui(t[n],e[n]))return!1;return!0}function Vy(t,e,n,i,r,s){if(Xs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?dO:gO,t=n(i,r),Yl){s=0;do{if(Yl=!1,wu=0,25<=s)throw Error(W(301));s+=1,gt=lt=null,e.updateQueue=null,Lh.current=mO,t=n(i,r)}while(Yl)}if(Lh.current=xf,e=lt!==null&&lt.next!==null,Xs=0,gt=lt=We=null,vf=!1,e)throw Error(W(300));return t}function Xy(){var t=wu!==0;return wu=0,t}function Ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=t:gt=gt.next=t,gt}function Kn(){if(lt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=gt===null?We.memoizedState:gt.next;if(e!==null)gt=e,lt=t;else{if(t===null)throw Error(W(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},gt===null?We.memoizedState=gt=t:gt=gt.next=t}return gt}function Su(t,e){return typeof e=="function"?e(t):e}function t0(t){var e=Kn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=lt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Xs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,We.lanes|=c,Ws|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,ui(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,We.lanes|=s,Ws|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function n0(t){var e=Kn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ui(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function gC(){}function mC(t,e){var n=We,i=Kn(),r=e(),s=!ui(i.memoizedState,r);if(s&&(i.memoizedState=r,un=!0),i=i.queue,Wy(_C.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Cu(9,yC.bind(null,n,i,r,e),void 0,null),_t===null)throw Error(W(349));Xs&30||pC(n,e,r)}return r}function pC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yC(t,e,n,i){e.value=n,e.getSnapshot=i,vC(e)&&xC(t)}function _C(t,e,n){return n(function(){vC(e)&&xC(t)})}function vC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ui(t,n)}catch{return!0}}function xC(t){var e=dr(t,1);e!==null&&oi(e,t,1,-1)}function hx(t){var e=Ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:t},e.queue=t,t=t.dispatch=fO.bind(null,We,t),[e.memoizedState,t]}function Cu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function EC(){return Kn().memoizedState}function kh(t,e,n,i){var r=Ci();We.flags|=t,r.memoizedState=Cu(1|e,n,void 0,i===void 0?null:i)}function Ed(t,e,n,i){var r=Kn();i=i===void 0?null:i;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,i!==null&&$y(i,o.deps)){r.memoizedState=Cu(e,n,s,i);return}}We.flags|=t,r.memoizedState=Cu(1|e,n,s,i)}function fx(t,e){return kh(8390656,8,t,e)}function Wy(t,e){return Ed(2048,8,t,e)}function wC(t,e){return Ed(4,2,t,e)}function SC(t,e){return Ed(4,4,t,e)}function CC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TC(t,e,n){return n=n!=null?n.concat([t]):null,Ed(4,4,CC.bind(null,e,t),n)}function Hy(){}function MC(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$y(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function RC(t,e){var n=Kn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$y(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function bC(t,e,n){return Xs&21?(ui(n,e)||(n=LS(),We.lanes|=n,Ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function cO(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=e0.transition;e0.transition={};try{t(!1),e()}finally{Oe=n,e0.transition=i}}function IC(){return Kn().memoizedState}function hO(t,e,n){var i=Yr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},PC(t))AC(e,n);else if(n=hC(t,e,n,i),n!==null){var r=qt();oi(n,t,i,r),OC(n,e,i)}}function fO(t,e,n){var i=Yr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(PC(t))AC(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ui(a,o)){var l=e.interleaved;l===null?(r.next=r,Gy(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=hC(t,e,r,i),n!==null&&(r=qt(),oi(n,t,i,r),OC(n,e,i))}}function PC(t){var e=t.alternate;return t===We||e!==null&&e===We}function AC(t,e){Yl=vf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OC(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Cy(t,n)}}var xf={readContext:Yn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},dO={readContext:Yn,useCallback:function(t,e){return Ci().memoizedState=[t,e===void 0?null:e],t},useContext:Yn,useEffect:fx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kh(4194308,4,CC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kh(4194308,4,t,e)},useInsertionEffect:function(t,e){return kh(4,2,t,e)},useMemo:function(t,e){var n=Ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ci();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=hO.bind(null,We,t),[i.memoizedState,t]},useRef:function(t){var e=Ci();return t={current:t},e.memoizedState=t},useState:hx,useDebugValue:Hy,useDeferredValue:function(t){return Ci().memoizedState=t},useTransition:function(){var t=hx(!1),e=t[0];return t=cO.bind(null,t[1]),Ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=We,r=Ci();if(je){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),_t===null)throw Error(W(349));Xs&30||pC(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,fx(_C.bind(null,i,s,t),[t]),i.flags|=2048,Cu(9,yC.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ci(),e=_t.identifierPrefix;if(je){var n=rr,i=ir;n=(i&~(1<<32-si(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=wu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gO={readContext:Yn,useCallback:MC,useContext:Yn,useEffect:Wy,useImperativeHandle:TC,useInsertionEffect:wC,useLayoutEffect:SC,useMemo:RC,useReducer:t0,useRef:EC,useState:function(){return t0(Su)},useDebugValue:Hy,useDeferredValue:function(t){var e=Kn();return bC(e,lt.memoizedState,t)},useTransition:function(){var t=t0(Su)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:mC,useId:IC,unstable_isNewReconciler:!1},mO={readContext:Yn,useCallback:MC,useContext:Yn,useEffect:Wy,useImperativeHandle:TC,useInsertionEffect:wC,useLayoutEffect:SC,useMemo:RC,useReducer:n0,useRef:EC,useState:function(){return n0(Su)},useDebugValue:Hy,useDeferredValue:function(t){var e=Kn();return lt===null?e.memoizedState=t:bC(e,lt.memoizedState,t)},useTransition:function(){var t=n0(Su)[0],e=Kn().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:mC,useId:IC,unstable_isNewReconciler:!1};function ei(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wd={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),r=Yr(t),s=sr(i,r);s.payload=e,n!=null&&(s.callback=n),e=Wr(t,s,r),e!==null&&(oi(e,t,r,i),Oh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),r=Yr(t),s=sr(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wr(t,s,r),e!==null&&(oi(e,t,r,i),Oh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=Yr(t),r=sr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Wr(t,r,i),e!==null&&(oi(e,t,i,n),Oh(e,t,i))}};function dx(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!pu(n,i)||!pu(r,s):!0}function LC(t,e,n){var i=!1,r=es,s=e.contextType;return typeof s=="object"&&s!==null?s=Yn(s):(r=fn(e)?$s:zt.current,i=e.contextTypes,s=(i=i!=null)?va(t,r):es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function gx(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&wd.enqueueReplaceState(e,e.state,null)}function Nm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Uy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Yn(s):(s=fn(e)?$s:zt.current,r.context=va(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fm(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&wd.enqueueReplaceState(r,r.state,null),yf(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Sa(t,e){try{var n="",i=e;do n+=$P(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function i0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pO=typeof WeakMap=="function"?WeakMap:Map;function kC(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wf||(wf=!0,Ym=i),Gm(t,e)},n}function DC(t,e,n){n=sr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Gm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gm(t,e),typeof i!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mx(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new pO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=PO.bind(null,t,e,n),e.then(t,t))}function px(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yx(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,Wr(n,e,1))),n.lanes|=1),t)}var yO=xr.ReactCurrentOwner,un=!1;function Xt(t,e,n,i){e.child=t===null?cC(e,null,n,i):Ea(e,t.child,n,i)}function _x(t,e,n,i,r){n=n.render;var s=e.ref;return sa(e,r),i=Vy(t,e,n,i,s,r),n=Xy(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(je&&n&&Oy(e),e.flags|=1,Xt(t,e,i,r),e.child)}function vx(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!t_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FC(t,e,s,i,r)):(t=Gh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pu,n(o,i)&&t.ref===e.ref)return gr(t,e,r)}return e.flags|=1,t=Kr(s,i),t.ref=e.ref,t.return=e,e.child=t}function FC(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(pu(s,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,gr(t,e,r)}return Um(t,e,n,i,r)}function NC(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(jo,xn),xn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(jo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Fe(jo,xn),xn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Fe(jo,xn),xn|=i;return Xt(t,e,r,n),e.child}function GC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Um(t,e,n,i,r){var s=fn(n)?$s:zt.current;return s=va(e,s),sa(e,r),n=Vy(t,e,n,i,s,r),i=Xy(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,gr(t,e,r)):(je&&i&&Oy(e),e.flags|=1,Xt(t,e,n,r),e.child)}function xx(t,e,n,i,r){if(fn(n)){var s=!0;ff(e)}else s=!1;if(sa(e,r),e.stateNode===null)Dh(t,e),LC(e,n,i),Nm(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Yn(u):(u=fn(n)?$s:zt.current,u=va(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&gx(e,o,i,u),Lr=!1;var f=e.memoizedState;o.state=f,yf(e,i,o,r),l=e.memoizedState,a!==i||f!==l||hn.current||Lr?(typeof c=="function"&&(Fm(e,n,c,i),l=e.memoizedState),(a=Lr||dx(e,n,a,i,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,fC(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ei(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yn(l):(l=fn(n)?$s:zt.current,l=va(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&gx(e,o,i,l),Lr=!1,f=e.memoizedState,o.state=f,yf(e,i,o,r);var d=e.memoizedState;a!==h||f!==d||hn.current||Lr?(typeof g=="function"&&(Fm(e,n,g,i),d=e.memoizedState),(u=Lr||dx(e,n,u,i,f,d,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,d,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,d,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=d),o.props=i,o.state=d,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return zm(t,e,n,i,s,r)}function zm(t,e,n,i,r,s){GC(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&sx(e,n,!1),gr(t,e,s);i=e.stateNode,yO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ea(e,t.child,null,s),e.child=Ea(e,null,a,s)):Xt(t,e,a,s),e.memoizedState=i.state,r&&sx(e,n,!0),e.child}function UC(t){var e=t.stateNode;e.pendingContext?rx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rx(t,e.context,!1),zy(t,e.containerInfo)}function Ex(t,e,n,i,r){return xa(),ky(r),e.flags|=256,Xt(t,e,n,i),e.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function zC(t,e,n){var i=e.pendingProps,r=Xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Fe(Xe,r&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Td(o,i,0,null),t=zs(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bm(n),e.memoizedState=jm,t):Yy(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return _O(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Kr(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Kr(a,s):(s=zs(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Bm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=jm,i}return s=t.child,t=s.sibling,i=Kr(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yy(t,e){return e=Td({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xc(t,e,n,i){return i!==null&&ky(i),Ea(e,t.child,null,n),t=Yy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _O(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=i0(Error(W(422))),Xc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Td({mode:"visible",children:i.children},r,0,null),s=zs(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ea(e,t.child,null,o),e.child.memoizedState=Bm(o),e.memoizedState=jm,s);if(!(e.mode&1))return Xc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(W(419)),i=i0(s,i,void 0),Xc(t,e,o,i)}if(a=(o&t.childLanes)!==0,un||a){if(i=_t,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,dr(t,r),oi(i,t,r,-1))}return e_(),i=i0(Error(W(421))),Xc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=AO.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Cn=Xr(r.nextSibling),Tn=e,je=!0,ii=null,t!==null&&(Un[zn++]=ir,Un[zn++]=rr,Un[zn++]=Vs,ir=t.id,rr=t.overflow,Vs=e),e=Yy(e,i.children),e.flags|=4096,e)}function wx(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dm(t.return,e,n)}function r0(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function jC(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Xt(t,e,i.children,n),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wx(t,n,e);else if(t.tag===19)wx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&_f(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),r0(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&_f(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}r0(e,!0,n,null,s);break;case"together":r0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vO(t,e,n){switch(e.tag){case 3:UC(e),xa();break;case 5:dC(e);break;case 1:fn(e.type)&&ff(e);break;case 4:zy(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Fe(mf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?zC(t,e,n):(Fe(Xe,Xe.current&1),t=gr(t,e,n),t!==null?t.sibling:null);Fe(Xe,Xe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return jC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Fe(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,NC(t,e,n)}return gr(t,e,n)}var BC,$m,$C,VC;BC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};$C=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,As(Fi.current);var s=null;switch(n){case"input":r=hm(t,r),i=hm(t,i),s=[];break;case"select":r=He({},r,{value:void 0}),i=He({},i,{value:void 0}),s=[];break;case"textarea":r=gm(t,r),i=gm(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=cf)}pm(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ge("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};VC=function(t,e,n,i){n!==i&&(e.flags|=4)};function vl(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function xO(t,e,n){var i=e.pendingProps;switch(Ly(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return fn(e.type)&&hf(),Pt(e),null;case 3:return i=e.stateNode,wa(),Ue(hn),Ue(zt),By(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ii!==null&&(Zm(ii),ii=null))),$m(t,e),Pt(e),null;case 5:jy(e);var r=As(Eu.current);if(n=e.type,t!==null&&e.stateNode!=null)$C(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(W(166));return Pt(e),null}if(t=As(Fi.current),$c(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[bi]=e,i[vu]=s,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(r=0;r<Ol.length;r++)Ge(Ol[r],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Av(i,s),Ge("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",i);break;case"textarea":Lv(i,s),Ge("invalid",i)}pm(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bc(i.textContent,a,t),r=["children",""+a]):uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",i)}switch(n){case"input":kc(i),Ov(i,s,!0);break;case"textarea":kc(i),kv(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_S(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[bi]=e,t[vu]=i,BC(t,e,!1,!1),e.stateNode=t;e:{switch(o=ym(n,i),n){case"dialog":Ge("cancel",t),Ge("close",t),r=i;break;case"iframe":case"object":case"embed":Ge("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ol.length;r++)Ge(Ol[r],t);r=i;break;case"source":Ge("error",t),r=i;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),r=i;break;case"details":Ge("toggle",t),r=i;break;case"input":Av(t,i),r=hm(t,i),Ge("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=He({},i,{value:void 0}),Ge("invalid",t);break;case"textarea":Lv(t,i),r=gm(t,i),Ge("invalid",t);break;default:r=i}pm(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ES(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vS(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cu(t,l):typeof l=="number"&&cu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",t):l!=null&&_y(t,s,l,o))}switch(n){case"input":kc(t),Ov(t,i,!1);break;case"textarea":kc(t),kv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Qr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ta(t,!!i.multiple,s,!1):i.defaultValue!=null&&ta(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=cf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)VC(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(W(166));if(n=As(Eu.current),As(Fi.current),$c(e)){if(i=e.stateNode,n=e.memoizedProps,i[bi]=e,(s=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Bc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[bi]=e,e.stateNode=i}return Pt(e),null;case 13:if(Ue(Xe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Cn!==null&&e.mode&1&&!(e.flags&128))lC(),xa(),e.flags|=98560,s=!1;else if(s=$c(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[bi]=e}else xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),s=!1}else ii!==null&&(Zm(ii),ii=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?ct===0&&(ct=3):e_())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return wa(),$m(t,e),t===null&&yu(e.stateNode.containerInfo),Pt(e),null;case 10:return Ny(e.type._context),Pt(e),null;case 17:return fn(e.type)&&hf(),Pt(e),null;case 19:if(Ue(Xe),s=e.memoizedState,s===null)return Pt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)vl(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_f(t),o!==null){for(e.flags|=128,vl(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Xe,Xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>Ca&&(e.flags|=128,i=!0,vl(s,!1),e.lanes=4194304)}else{if(!i)if(t=_f(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!je)return Pt(e),null}else 2*Qe()-s.renderingStartTime>Ca&&n!==1073741824&&(e.flags|=128,i=!0,vl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Xe.current,Fe(Xe,i?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return Qy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?xn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function EO(t,e){switch(Ly(e),e.tag){case 1:return fn(e.type)&&hf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wa(),Ue(hn),Ue(zt),By(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jy(e),null;case 13:if(Ue(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Xe),null;case 4:return wa(),null;case 10:return Ny(e.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var Wc=!1,Ft=!1,wO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ke(t,e,i)}else n.current=null}function Vm(t,e,n){try{n()}catch(i){Ke(t,e,i)}}var Sx=!1;function SO(t,e){if(Rm=af,t=KS(),Ay(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++c===i&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bm={focusedElem:t,selectionRange:n},af=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var d=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var p=d.memoizedProps,m=d.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?p:ei(e.type,p),m);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(x){Ke(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return d=Sx,Sx=!1,d}function Kl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Vm(e,n,s)}r=r.next}while(r!==i)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XC(t){var e=t.alternate;e!==null&&(t.alternate=null,XC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bi],delete e[vu],delete e[Am],delete e[sO],delete e[oO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WC(t){return t.tag===5||t.tag===3||t.tag===4}function Cx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cf));else if(i!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}function Hm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var xt=null,ni=!1;function Cr(t,e,n){for(n=n.child;n!==null;)HC(t,e,n),n=n.sibling}function HC(t,e,n){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(md,n)}catch{}switch(n.tag){case 5:Ft||zo(n,e);case 6:var i=xt,r=ni;xt=null,Cr(t,e,n),xt=i,ni=r,xt!==null&&(ni?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(ni?(t=xt,n=n.stateNode,t.nodeType===8?Zg(t.parentNode,n):t.nodeType===1&&Zg(t,n),gu(t)):Zg(xt,n.stateNode));break;case 4:i=xt,r=ni,xt=n.stateNode.containerInfo,ni=!0,Cr(t,e,n),xt=i,ni=r;break;case 0:case 11:case 14:case 15:if(!Ft&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vm(n,e,o),r=r.next}while(r!==i)}Cr(t,e,n);break;case 1:if(!Ft&&(zo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ke(n,e,a)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(Ft=(i=Ft)||n.memoizedState!==null,Cr(t,e,n),Ft=i):Cr(t,e,n);break;default:Cr(t,e,n)}}function Tx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wO),e.forEach(function(i){var r=OO.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Jn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,ni=!1;break e;case 3:xt=a.stateNode.containerInfo,ni=!0;break e;case 4:xt=a.stateNode.containerInfo,ni=!0;break e}a=a.return}if(xt===null)throw Error(W(160));HC(s,o,r),xt=null,ni=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Ke(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YC(e,t),e=e.sibling}function YC(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jn(e,t),_i(t),i&4){try{Kl(3,t,t.return),Sd(3,t)}catch(p){Ke(t,t.return,p)}try{Kl(5,t,t.return)}catch(p){Ke(t,t.return,p)}}break;case 1:Jn(e,t),_i(t),i&512&&n!==null&&zo(n,n.return);break;case 5:if(Jn(e,t),_i(t),i&512&&n!==null&&zo(n,n.return),t.flags&32){var r=t.stateNode;try{cu(r,"")}catch(p){Ke(t,t.return,p)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pS(r,s),ym(a,o);var u=ym(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?ES(r,h):c==="dangerouslySetInnerHTML"?vS(r,h):c==="children"?cu(r,h):_y(r,c,h,u)}switch(a){case"input":fm(r,s);break;case"textarea":yS(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ta(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?ta(r,!!s.multiple,s.defaultValue,!0):ta(r,!!s.multiple,s.multiple?[]:"",!1))}r[vu]=s}catch(p){Ke(t,t.return,p)}}break;case 6:if(Jn(e,t),_i(t),i&4){if(t.stateNode===null)throw Error(W(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(p){Ke(t,t.return,p)}}break;case 3:if(Jn(e,t),_i(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{gu(e.containerInfo)}catch(p){Ke(t,t.return,p)}break;case 4:Jn(e,t),_i(t);break;case 13:Jn(e,t),_i(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Zy=Qe())),i&4&&Tx(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(u=Ft)||c,Jn(e,t),Ft=u):Jn(e,t),_i(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Q=t,c=t.child;c!==null;){for(h=Q=c;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:Kl(4,f,f.return);break;case 1:zo(f,f.return);var d=f.stateNode;if(typeof d.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,d.props=e.memoizedProps,d.state=e.memoizedState,d.componentWillUnmount()}catch(p){Ke(i,n,p)}}break;case 5:zo(f,f.return);break;case 22:if(f.memoizedState!==null){Rx(h);continue}}g!==null?(g.return=f,Q=g):Rx(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xS("display",o))}catch(p){Ke(t,t.return,p)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){Ke(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jn(e,t),_i(t),i&4&&Tx(t);break;case 21:break;default:Jn(e,t),_i(t)}}function _i(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WC(n)){var i=n;break e}n=n.return}throw Error(W(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(cu(r,""),i.flags&=-33);var s=Cx(t);Hm(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Cx(t);Wm(t,a,o);break;default:throw Error(W(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CO(t,e,n){Q=t,KC(t)}function KC(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Wc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ft;a=Wc;var u=Ft;if(Wc=o,(Ft=l)&&!u)for(Q=r;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?bx(r):l!==null?(l.return=o,Q=l):bx(r);for(;s!==null;)Q=s,KC(s),s=s.sibling;Q=r,Wc=a,Ft=u}Mx(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):Mx(t)}}function Mx(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Sd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ft)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ei(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cx(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&gu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ft||e.flags&512&&Xm(e)}catch(f){Ke(e,e.return,f)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Rx(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function bx(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(l){Ke(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ke(e,r,l)}}var s=e.return;try{Xm(e)}catch(l){Ke(e,s,l)}break;case 5:var o=e.return;try{Xm(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var TO=Math.ceil,Ef=xr.ReactCurrentDispatcher,Ky=xr.ReactCurrentOwner,Xn=xr.ReactCurrentBatchConfig,we=0,_t=null,st=null,Ct=0,xn=0,jo=fs(0),ct=0,Tu=null,Ws=0,Cd=0,qy=0,ql=null,sn=null,Zy=0,Ca=1/0,Ji=null,wf=!1,Ym=null,Hr=null,Hc=!1,Gr=null,Sf=0,Zl=0,Km=null,Fh=-1,Nh=0;function qt(){return we&6?Qe():Fh!==-1?Fh:Fh=Qe()}function Yr(t){return t.mode&1?we&2&&Ct!==0?Ct&-Ct:lO.transition!==null?(Nh===0&&(Nh=LS()),Nh):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:zS(t.type)),t):1}function oi(t,e,n,i){if(50<Zl)throw Zl=0,Km=null,Error(W(185));ic(t,n,i),(!(we&2)||t!==_t)&&(t===_t&&(!(we&2)&&(Cd|=n),ct===4&&Fr(t,Ct)),dn(t,i),n===1&&we===0&&!(e.mode&1)&&(Ca=Qe()+500,xd&&ds()))}function dn(t,e){var n=t.callbackNode;lA(t,e);var i=of(t,t===_t?Ct:0);if(i===0)n!==null&&Nv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Nv(n),e===1)t.tag===0?aO(Ix.bind(null,t)):sC(Ix.bind(null,t)),iO(function(){!(we&6)&&ds()}),n=null;else{switch(kS(i)){case 1:n=Sy;break;case 4:n=AS;break;case 16:n=sf;break;case 536870912:n=OS;break;default:n=sf}n=iT(n,qC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qC(t,e){if(Fh=-1,Nh=0,we&6)throw Error(W(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var i=of(t,t===_t?Ct:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Cf(t,i);else{e=i;var r=we;we|=2;var s=JC();(_t!==t||Ct!==e)&&(Ji=null,Ca=Qe()+500,Us(t,e));do try{bO();break}catch(a){ZC(t,a)}while(!0);Fy(),Ef.current=s,we=r,st!==null?e=0:(_t=null,Ct=0,e=ct)}if(e!==0){if(e===2&&(r=wm(t),r!==0&&(i=r,e=qm(t,r))),e===1)throw n=Tu,Us(t,0),Fr(t,i),dn(t,Qe()),n;if(e===6)Fr(t,i);else{if(r=t.current.alternate,!(i&30)&&!MO(r)&&(e=Cf(t,i),e===2&&(s=wm(t),s!==0&&(i=s,e=qm(t,s))),e===1))throw n=Tu,Us(t,0),Fr(t,i),dn(t,Qe()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(W(345));case 2:Ms(t,sn,Ji);break;case 3:if(Fr(t,i),(i&130023424)===i&&(e=Zy+500-Qe(),10<e)){if(of(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Pm(Ms.bind(null,t,sn,Ji),e);break}Ms(t,sn,Ji);break;case 4:if(Fr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-si(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*TO(i/1960))-i,10<i){t.timeoutHandle=Pm(Ms.bind(null,t,sn,Ji),i);break}Ms(t,sn,Ji);break;case 5:Ms(t,sn,Ji);break;default:throw Error(W(329))}}}return dn(t,Qe()),t.callbackNode===n?qC.bind(null,t):null}function qm(t,e){var n=ql;return t.current.memoizedState.isDehydrated&&(Us(t,e).flags|=256),t=Cf(t,e),t!==2&&(e=sn,sn=n,e!==null&&Zm(e)),t}function Zm(t){sn===null?sn=t:sn.push.apply(sn,t)}function MO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ui(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fr(t,e){for(e&=~qy,e&=~Cd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-si(e),i=1<<n;t[n]=-1,e&=~i}}function Ix(t){if(we&6)throw Error(W(327));oa();var e=of(t,0);if(!(e&1))return dn(t,Qe()),null;var n=Cf(t,e);if(t.tag!==0&&n===2){var i=wm(t);i!==0&&(e=i,n=qm(t,i))}if(n===1)throw n=Tu,Us(t,0),Fr(t,e),dn(t,Qe()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ms(t,sn,Ji),dn(t,Qe()),null}function Jy(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Ca=Qe()+500,xd&&ds())}}function Hs(t){Gr!==null&&Gr.tag===0&&!(we&6)&&oa();var e=we;we|=1;var n=Xn.transition,i=Oe;try{if(Xn.transition=null,Oe=1,t)return t()}finally{Oe=i,Xn.transition=n,we=e,!(we&6)&&ds()}}function Qy(){xn=jo.current,Ue(jo)}function Us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nO(n)),st!==null)for(n=st.return;n!==null;){var i=n;switch(Ly(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hf();break;case 3:wa(),Ue(hn),Ue(zt),By();break;case 5:jy(i);break;case 4:wa();break;case 13:Ue(Xe);break;case 19:Ue(Xe);break;case 10:Ny(i.type._context);break;case 22:case 23:Qy()}n=n.return}if(_t=t,st=t=Kr(t.current,null),Ct=xn=e,ct=0,Tu=null,qy=Cd=Ws=0,sn=ql=null,Ps!==null){for(e=0;e<Ps.length;e++)if(n=Ps[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ps=null}return t}function ZC(t,e){do{var n=st;try{if(Fy(),Lh.current=xf,vf){for(var i=We.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vf=!1}if(Xs=0,gt=lt=We=null,Yl=!1,wu=0,Ky.current=null,n===null||n.return===null){ct=1,Tu=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=px(o);if(g!==null){g.flags&=-257,yx(g,o,a,s,e),g.mode&1&&mx(s,u,e),e=g,l=u;var d=e.updateQueue;if(d===null){var p=new Set;p.add(l),e.updateQueue=p}else d.add(l);break e}else{if(!(e&1)){mx(s,u,e),e_();break e}l=Error(W(426))}}else if(je&&a.mode&1){var m=px(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),yx(m,o,a,s,e),ky(Sa(l,a));break e}}s=l=Sa(l,a),ct!==4&&(ct=2),ql===null?ql=[s]:ql.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=kC(s,l,e);ux(s,_);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hr===null||!Hr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=DC(s,a,e);ux(s,x);break e}}s=s.return}while(s!==null)}eT(n)}catch(E){e=E,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function JC(){var t=Ef.current;return Ef.current=xf,t===null?xf:t}function e_(){(ct===0||ct===3||ct===2)&&(ct=4),_t===null||!(Ws&268435455)&&!(Cd&268435455)||Fr(_t,Ct)}function Cf(t,e){var n=we;we|=2;var i=JC();(_t!==t||Ct!==e)&&(Ji=null,Us(t,e));do try{RO();break}catch(r){ZC(t,r)}while(!0);if(Fy(),we=n,Ef.current=i,st!==null)throw Error(W(261));return _t=null,Ct=0,ct}function RO(){for(;st!==null;)QC(st)}function bO(){for(;st!==null&&!QP();)QC(st)}function QC(t){var e=nT(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?eT(t):st=e,Ky.current=null}function eT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EO(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,st=null;return}}else if(n=xO(n,e,xn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);ct===0&&(ct=5)}function Ms(t,e,n){var i=Oe,r=Xn.transition;try{Xn.transition=null,Oe=1,IO(t,e,n,i)}finally{Xn.transition=r,Oe=i}return null}function IO(t,e,n,i){do oa();while(Gr!==null);if(we&6)throw Error(W(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(uA(t,s),t===_t&&(st=_t=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hc||(Hc=!0,iT(sf,function(){return oa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xn.transition,Xn.transition=null;var o=Oe;Oe=1;var a=we;we|=4,Ky.current=null,SO(t,n),YC(n,t),KA(bm),af=!!Rm,bm=Rm=null,t.current=n,CO(n),eA(),we=a,Oe=o,Xn.transition=s}else t.current=n;if(Hc&&(Hc=!1,Gr=t,Sf=r),s=t.pendingLanes,s===0&&(Hr=null),iA(n.stateNode),dn(t,Qe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wf)throw wf=!1,t=Ym,Ym=null,t;return Sf&1&&t.tag!==0&&oa(),s=t.pendingLanes,s&1?t===Km?Zl++:(Zl=0,Km=t):Zl=0,ds(),null}function oa(){if(Gr!==null){var t=kS(Sf),e=Xn.transition,n=Oe;try{if(Xn.transition=null,Oe=16>t?16:t,Gr===null)var i=!1;else{if(t=Gr,Gr=null,Sf=0,we&6)throw Error(W(331));var r=we;for(we|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var c=Q;switch(c.tag){case 0:case 11:case 15:Kl(8,c,s)}var h=c.child;if(h!==null)h.return=c,Q=h;else for(;Q!==null;){c=Q;var f=c.sibling,g=c.return;if(XC(c),c===u){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var d=s.alternate;if(d!==null){var p=d.child;if(p!==null){d.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Q=_;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Q=v;else e:for(o=y;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sd(9,a)}}catch(E){Ke(a,a.return,E)}if(a===o){Q=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Q=x;break e}Q=a.return}}if(we=r,ds(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(md,t)}catch{}i=!0}return i}finally{Oe=n,Xn.transition=e}}return!1}function Px(t,e,n){e=Sa(n,e),e=kC(t,e,1),t=Wr(t,e,1),e=qt(),t!==null&&(ic(t,1,e),dn(t,e))}function Ke(t,e,n){if(t.tag===3)Px(t,t,n);else for(;e!==null;){if(e.tag===3){Px(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Hr===null||!Hr.has(i))){t=Sa(n,t),t=DC(e,t,1),e=Wr(e,t,1),t=qt(),e!==null&&(ic(e,1,t),dn(e,t));break}}e=e.return}}function PO(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(Ct&n)===n&&(ct===4||ct===3&&(Ct&130023424)===Ct&&500>Qe()-Zy?Us(t,0):qy|=n),dn(t,e)}function tT(t,e){e===0&&(t.mode&1?(e=Nc,Nc<<=1,!(Nc&130023424)&&(Nc=4194304)):e=1);var n=qt();t=dr(t,e),t!==null&&(ic(t,e,n),dn(t,n))}function AO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tT(t,n)}function OO(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(e),tT(t,n)}var nT;nT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,vO(t,e,n);un=!!(t.flags&131072)}else un=!1,je&&e.flags&1048576&&oC(e,gf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dh(t,e),t=e.pendingProps;var r=va(e,zt.current);sa(e,n),r=Vy(null,e,i,t,r,n);var s=Xy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(i)?(s=!0,ff(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Uy(e),r.updater=wd,e.stateNode=r,r._reactInternals=e,Nm(e,i,t,n),e=zm(null,e,i,!0,s,n)):(e.tag=0,je&&s&&Oy(e),Xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=kO(i),t=ei(i,t),r){case 0:e=Um(null,e,i,t,n);break e;case 1:e=xx(null,e,i,t,n);break e;case 11:e=_x(null,e,i,t,n);break e;case 14:e=vx(null,e,i,ei(i.type,t),n);break e}throw Error(W(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Um(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),xx(t,e,i,r,n);case 3:e:{if(UC(e),t===null)throw Error(W(387));i=e.pendingProps,s=e.memoizedState,r=s.element,fC(t,e),yf(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Sa(Error(W(423)),e),e=Ex(t,e,i,n,r);break e}else if(i!==r){r=Sa(Error(W(424)),e),e=Ex(t,e,i,n,r);break e}else for(Cn=Xr(e.stateNode.containerInfo.firstChild),Tn=e,je=!0,ii=null,n=cC(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xa(),i===r){e=gr(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 5:return dC(e),t===null&&km(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Im(i,r)?o=null:s!==null&&Im(i,s)&&(e.flags|=32),GC(t,e),Xt(t,e,o,n),e.child;case 6:return t===null&&km(e),null;case 13:return zC(t,e,n);case 4:return zy(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ea(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),_x(t,e,i,r,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Fe(mf,i._currentValue),i._currentValue=o,s!==null)if(ui(s.value,o)){if(s.children===r.children&&!hn.current){e=gr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=sr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Dm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,sa(e,n),r=Yn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return i=e.type,r=ei(i,e.pendingProps),r=ei(i.type,r),vx(t,e,i,r,n);case 15:return FC(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ei(i,r),Dh(t,e),e.tag=1,fn(i)?(t=!0,ff(e)):t=!1,sa(e,n),LC(e,i,r),Nm(e,i,r,n),zm(null,e,i,!0,t,n);case 19:return jC(t,e,n);case 22:return NC(t,e,n)}throw Error(W(156,e.tag))};function iT(t,e){return PS(t,e)}function LO(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,i){return new LO(t,e,n,i)}function t_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kO(t){if(typeof t=="function")return t_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xy)return 11;if(t===Ey)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gh(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")t_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ao:return zs(n.children,r,s,e);case vy:o=8,r|=8;break;case am:return t=$n(12,n,e,r|2),t.elementType=am,t.lanes=s,t;case lm:return t=$n(13,n,e,r),t.elementType=lm,t.lanes=s,t;case um:return t=$n(19,n,e,r),t.elementType=um,t.lanes=s,t;case dS:return Td(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hS:o=10;break e;case fS:o=9;break e;case xy:o=11;break e;case Ey:o=14;break e;case Or:o=16,i=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=$n(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function zs(t,e,n,i){return t=$n(7,t,i,e),t.lanes=n,t}function Td(t,e,n,i){return t=$n(22,t,i,e),t.elementType=dS,t.lanes=n,t.stateNode={isHidden:!1},t}function s0(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function o0(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DO(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zg(0),this.expirationTimes=zg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function n_(t,e,n,i,r,s,o,a,l){return t=new DO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(s),t}function FO(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Po,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function rT(t){if(!t)return es;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(fn(n))return rC(t,n,e)}return e}function sT(t,e,n,i,r,s,o,a,l){return t=n_(n,i,!0,t,r,s,o,a,l),t.context=rT(null),n=t.current,i=qt(),r=Yr(n),s=sr(i,r),s.callback=e??null,Wr(n,s,r),t.current.lanes=r,ic(t,r,i),dn(t,i),t}function Md(t,e,n,i){var r=e.current,s=qt(),o=Yr(r);return n=rT(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Wr(r,e,o),t!==null&&(oi(t,r,o,s),Oh(t,r,o)),o}function Tf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i_(t,e){Ax(t,e),(t=t.alternate)&&Ax(t,e)}function NO(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function r_(t){this._internalRoot=t}Rd.prototype.render=r_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Md(t,e,null,null)};Rd.prototype.unmount=r_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){Md(null,t,null,null)}),e[fr]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=NS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&US(t)}};function s_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function GO(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Tf(o);s.call(u)}}var o=sT(e,i,t,0,null,!1,!1,"",Ox);return t._reactRootContainer=o,t[fr]=o.current,yu(t.nodeType===8?t.parentNode:t),Hs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Tf(l);a.call(u)}}var l=n_(t,0,!1,null,null,!1,!1,"",Ox);return t._reactRootContainer=l,t[fr]=l.current,yu(t.nodeType===8?t.parentNode:t),Hs(function(){Md(e,l,n,i)}),l}function Id(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Tf(o);a.call(l)}}Md(e,o,t,r)}else o=GO(n,e,t,r,i);return Tf(o)}DS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Al(e.pendingLanes);n!==0&&(Cy(e,n|1),dn(e,Qe()),!(we&6)&&(Ca=Qe()+500,ds()))}break;case 13:Hs(function(){var i=dr(t,1);if(i!==null){var r=qt();oi(i,t,1,r)}}),i_(t,1)}};Ty=function(t){if(t.tag===13){var e=dr(t,134217728);if(e!==null){var n=qt();oi(e,t,134217728,n)}i_(t,134217728)}};FS=function(t){if(t.tag===13){var e=Yr(t),n=dr(t,e);if(n!==null){var i=qt();oi(n,t,e,i)}i_(t,e)}};NS=function(){return Oe};GS=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};vm=function(t,e,n){switch(e){case"input":if(fm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=vd(i);if(!r)throw Error(W(90));mS(i),fm(i,r)}}}break;case"textarea":yS(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};CS=Jy;TS=Hs;var UO={usingClientEntryPoint:!1,Events:[sc,Do,vd,wS,SS,Jy]},xl={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zO={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bS(t),t===null?null:t.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||NO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yc.isDisabled&&Yc.supportsFiber)try{md=Yc.inject(zO),Di=Yc}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UO;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s_(e))throw Error(W(200));return FO(t,e,null,n)};Pn.createRoot=function(t,e){if(!s_(t))throw Error(W(299));var n=!1,i="",r=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=n_(t,1,!1,null,null,n,!1,i,r),t[fr]=e.current,yu(t.nodeType===8?t.parentNode:t),new r_(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=bS(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Hs(t)};Pn.hydrate=function(t,e,n){if(!bd(e))throw Error(W(200));return Id(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!s_(t))throw Error(W(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=oT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sT(e,null,t,1,n??null,r,!1,s,o),t[fr]=e.current,yu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Rd(e)};Pn.render=function(t,e,n){if(!bd(e))throw Error(W(200));return Id(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!bd(t))throw Error(W(40));return t._reactRootContainer?(Hs(function(){Id(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};Pn.unstable_batchedUpdates=Jy;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!bd(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Id(t,e,n,!1,i)};Pn.version="18.3.1-next-f1338f8080-20240426";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),aS.exports=Pn;var lT=aS.exports,uT,Lx=lT;uT=Lx.createRoot,Lx.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mu.apply(this,arguments)}var Ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ur||(Ur={}));const kx="popstate";function jO(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Jm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Mf(r)}return $O(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BO(){return Math.random().toString(36).substr(2,8)}function Dx(t,e){return{usr:t.state,key:t.key,idx:e}}function Jm(t,e,n,i){return n===void 0&&(n=null),Mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wa(e):e,{state:n,key:e&&e.key||i||BO()})}function Mf(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function $O(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ur.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Mu({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Ur.Pop;let m=c(),_=m==null?null:m-u;u=m,l&&l({action:a,location:p.location,delta:_})}function f(m,_){a=Ur.Push;let y=Jm(p.location,m,_);u=c()+1;let v=Dx(y,u),x=p.createHref(y);try{o.pushState(v,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(x)}s&&l&&l({action:a,location:p.location,delta:1})}function g(m,_){a=Ur.Replace;let y=Jm(p.location,m,_);u=c();let v=Dx(y,u),x=p.createHref(y);o.replaceState(v,"",x),s&&l&&l({action:a,location:p.location,delta:0})}function d(m){let _=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof m=="string"?m:Mf(m);return y=y.replace(/ $/,"%20"),qe(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let p={get action(){return a},get location(){return t(r,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(kx,h),l=m,()=>{r.removeEventListener(kx,h),l=null}},createHref(m){return e(r,m)},createURL:d,encodeLocation(m){let _=d(m);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:g,go(m){return o.go(m)}};return p}var Fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fx||(Fx={}));function VO(t,e,n){return n===void 0&&(n="/"),XO(t,e,n,!1)}function XO(t,e,n,i){let r=typeof e=="string"?Wa(e):e,s=Ta(r.pathname||"/",n);if(s==null)return null;let o=hT(t);WO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=iL(s);a=tL(o[l],u,i)}return a}function hT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=qr([i,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),hT(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:QO(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of fT(s.path))r(s,o,l)}),e}function fT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=fT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function WO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:eL(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const HO=/^:[\w-]+$/,YO=3,KO=2,qO=1,ZO=10,JO=-2,Nx=t=>t==="*";function QO(t,e){let n=t.split("/"),i=n.length;return n.some(Nx)&&(i+=JO),e&&(i+=KO),n.filter(r=>!Nx(r)).reduce((r,s)=>r+(HO.test(s)?YO:s===""?qO:ZO),i)}function eL(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function tL(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=Rf({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&n&&!i[i.length-1].route.index&&(h=Rf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:qr([s,h.pathname]),pathnameBase:aL(qr([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=qr([s,h.pathnameBase]))}return o}function Rf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=nL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,h)=>{let{paramName:f,isOptional:g}=c;if(f==="*"){let p=a[h]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const d=a[h];return g&&!d?u[f]=void 0:u[f]=(d||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function nL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function iL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ta(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function rL(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Wa(t):t;return{pathname:n?n.startsWith("/")?n:sL(n,e):e,search:lL(i),hash:uL(r)}}function sL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function a0(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dT(t,e){let n=oL(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function gT(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Wa(t):(r=Mu({},t),qe(!r.pathname||!r.pathname.includes("?"),a0("?","pathname","search",r)),qe(!r.pathname||!r.pathname.includes("#"),a0("#","pathname","hash",r)),qe(!r.search||!r.search.includes("#"),a0("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=rL(r,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),aL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mT=["post","put","patch","delete"];new Set(mT);const hL=["get",...mT];new Set(hL);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ru(){return Ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ru.apply(this,arguments)}const Pd=T.createContext(null),pT=T.createContext(null),gs=T.createContext(null),Ad=T.createContext(null),ms=T.createContext({outlet:null,matches:[],isDataRoute:!1}),yT=T.createContext(null);function fL(t,e){let{relative:n}=e===void 0?{}:e;ac()||qe(!1);let{basename:i,navigator:r}=T.useContext(gs),{hash:s,pathname:o,search:a}=Od(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:qr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function ac(){return T.useContext(Ad)!=null}function lc(){return ac()||qe(!1),T.useContext(Ad).location}function _T(t){T.useContext(gs).static||T.useLayoutEffect(t)}function dL(){let{isDataRoute:t}=T.useContext(ms);return t?bL():gL()}function gL(){ac()||qe(!1);let t=T.useContext(Pd),{basename:e,future:n,navigator:i}=T.useContext(gs),{matches:r}=T.useContext(ms),{pathname:s}=lc(),o=JSON.stringify(dT(r,n.v7_relativeSplatPath)),a=T.useRef(!1);return _T(()=>{a.current=!0}),T.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let h=gT(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:qr([e,h.pathname])),(c.replace?i.replace:i.push)(h,c.state,c)},[e,i,o,s,t])}const mL=T.createContext(null);function pL(t){let e=T.useContext(ms).outlet;return e&&T.createElement(mL.Provider,{value:t},e)}function Od(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=T.useContext(gs),{matches:r}=T.useContext(ms),{pathname:s}=lc(),o=JSON.stringify(dT(r,i.v7_relativeSplatPath));return T.useMemo(()=>gT(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function yL(t,e){return _L(t,e)}function _L(t,e,n,i){ac()||qe(!1);let{navigator:r}=T.useContext(gs),{matches:s}=T.useContext(ms),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=lc(),c;if(e){var h;let m=typeof e=="string"?Wa(e):e;l==="/"||(h=m.pathname)!=null&&h.startsWith(l)||qe(!1),c=m}else c=u;let f=c.pathname||"/",g=f;if(l!=="/"){let m=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(m.length).join("/")}let d=VO(t,{pathname:g}),p=SL(d&&d.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:qr([l,r.encodeLocation?r.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:qr([l,r.encodeLocation?r.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,n,i);return e&&p?T.createElement(Ad.Provider,{value:{location:Ru({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ur.Pop}},p):p}function vL(){let t=RL(),e=cL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:r},n):null,null)}const xL=T.createElement(vL,null);class EL extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(ms.Provider,{value:this.props.routeContext},T.createElement(yT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wL(t){let{routeContext:e,match:n,children:i}=t,r=T.useContext(Pd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(ms.Provider,{value:e},i)}function SL(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);c>=0||qe(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:g}=n,d=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||d){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,f)=>{let g,d=!1,p=null,m=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,p=h.route.errorElement||xL,l&&(u<0&&f===0?(d=!0,m=null):u===f&&(d=!0,m=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),y=()=>{let v;return g?v=p:d?v=m:h.route.Component?v=T.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,T.createElement(wL,{match:h,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(EL,{location:n.location,revalidation:n.revalidation,component:p,error:g,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var vT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vT||{}),bf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bf||{});function CL(t){let e=T.useContext(Pd);return e||qe(!1),e}function TL(t){let e=T.useContext(pT);return e||qe(!1),e}function ML(t){let e=T.useContext(ms);return e||qe(!1),e}function xT(t){let e=ML(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function RL(){var t;let e=T.useContext(yT),n=TL(bf.UseRouteError),i=xT(bf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function bL(){let{router:t}=CL(vT.UseNavigateStable),e=xT(bf.UseNavigateStable),n=T.useRef(!1);return _T(()=>{n.current=!0}),T.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ru({fromRouteId:e},s)))},[t,e])}const Gx={};function IL(t,e){Gx[e]||(Gx[e]=!0,console.warn(e))}const Ux=(t,e,n)=>IL(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function PL(t,e){t!=null&&t.v7_startTransition||Ux("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&Ux("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function AL(t){return pL(t.context)}function Rs(t){qe(!1)}function OL(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ur.Pop,navigator:s,static:o=!1,future:a}=t;ac()&&qe(!1);let l=e.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:l,navigator:s,static:o,future:Ru({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Wa(i));let{pathname:c="/",search:h="",hash:f="",state:g=null,key:d="default"}=i,p=T.useMemo(()=>{let m=Ta(c,l);return m==null?null:{location:{pathname:m,search:h,hash:f,state:g,key:d},navigationType:r}},[l,c,h,f,g,d,r]);return p==null?null:T.createElement(gs.Provider,{value:u},T.createElement(Ad.Provider,{children:n,value:p}))}function LL(t){let{children:e,location:n}=t;return yL(Qm(e),n)}new Promise(()=>{});function Qm(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(i,r)=>{if(!T.isValidElement(i))return;let s=[...e,r];if(i.type===T.Fragment){n.push.apply(n,Qm(i.props.children,s));return}i.type!==Rs&&qe(!1),!i.props.index||!i.props.children||qe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Qm(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},If.apply(this,arguments)}function ET(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function kL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DL(t,e){return t.button===0&&(!e||e==="_self")&&!kL(t)}const FL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NL=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],GL="6";try{window.__reactRouterVersion=GL}catch{}const UL=T.createContext({isTransitioning:!1}),zL="startTransition",zx=sm[zL];function jL(t){let{basename:e,children:n,future:i,window:r}=t,s=T.useRef();s.current==null&&(s.current=jO({window:r,v5Compat:!0}));let o=s.current,[a,l]=T.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=T.useCallback(h=>{u&&zx?zx(()=>l(h)):l(h)},[l,u]);return T.useLayoutEffect(()=>o.listen(c),[o,c]),T.useEffect(()=>PL(i),[i]),T.createElement(OL,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const BL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$L=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wT=T.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,f=ET(e,FL),{basename:g}=T.useContext(gs),d,p=!1;if(typeof u=="string"&&$L.test(u)&&(d=u,BL))try{let v=new URL(window.location.href),x=u.startsWith("//")?new URL(v.protocol+u):new URL(u),E=Ta(x.pathname,g);x.origin===v.origin&&E!=null?u=E+x.search+x.hash:p=!0}catch{}let m=fL(u,{relative:r}),_=XL(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:r,viewTransition:h});function y(v){i&&i(v),v.defaultPrevented||_(v)}return T.createElement("a",If({},f,{href:d||m,onClick:p||s?i:y,ref:n,target:l}))}),Kc=T.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:c}=e,h=ET(e,NL),f=Od(l,{relative:h.relative}),g=lc(),d=T.useContext(pT),{navigator:p,basename:m}=T.useContext(gs),_=d!=null&&WL(f)&&u===!0,y=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,v=g.pathname,x=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;r||(v=v.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&m&&(x=Ta(x,m)||x);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let w=v===y||!o&&v.startsWith(y)&&v.charAt(E)==="/",C=x!=null&&(x===y||!o&&x.startsWith(y)&&x.charAt(y.length)==="/"),S={isActive:w,isPending:C,isTransitioning:_},R=w?i:void 0,M;typeof s=="function"?M=s(S):M=[s,w?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(S):a;return T.createElement(wT,If({},h,{"aria-current":R,className:M,ref:n,style:k,to:l,viewTransition:u}),typeof c=="function"?c(S):c)});var ep;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ep||(ep={}));var jx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jx||(jx={}));function VL(t){let e=T.useContext(Pd);return e||qe(!1),e}function XL(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=dL(),u=lc(),c=Od(t,{relative:o});return T.useCallback(h=>{if(DL(h,n)){h.preventDefault();let f=i!==void 0?i:Mf(u)===Mf(c);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,i,r,n,t,s,o,a])}function WL(t,e){e===void 0&&(e={});let n=T.useContext(UL);n==null&&qe(!1);let{basename:i}=VL(ep.useViewTransitionState),r=Od(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ta(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ta(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Rf(r.pathname,o)!=null||Rf(r.pathname,s)!=null}function HL(){return I.jsx("div",{children:I.jsx("header",{children:I.jsx("div",{className:"container ",children:I.jsxs("div",{className:"navigation",children:[I.jsx("div",{className:"iconsize",children:I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:I.jsx("path",{d:"M565.6 36.2C572.1 40.7 576 48.1 576 56l0 336c0 10-6.2 18.9-15.5 22.4l-168 64c-5.2 2-10.9 2.1-16.1 .3L192.5 417.5l-160 61c-7.4 2.8-15.7 1.8-22.2-2.7S0 463.9 0 456L0 120c0-10 6.1-18.9 15.5-22.4l168-64c5.2-2 10.9-2.1 16.1-.3L383.5 94.5l160-61c7.4-2.8 15.7-1.8 22.2 2.7zM48 136.5l0 284.6 120-45.7 0-284.6L48 136.5zM360 422.7l0-285.4-144-48 0 285.4 144 48zm48-1.5l120-45.7 0-284.6L408 136.5l0 284.6z"})})}),I.jsx("div",{className:"col-3 navcontainer",children:I.jsx("div",{children:I.jsx("nav",{children:I.jsxs("ul",{className:"nav_list",children:[I.jsx("li",{children:I.jsx(Kc,{to:"map",className:({isActive:t})=>t?"nav-item nav-item-active":"nav-item",children:"Map"})}),I.jsx("li",{children:I.jsx(Kc,{to:"multiviewer",className:({isActive:t})=>t?"nav-item nav-item-active":"nav-item",children:"Multiviewer"})}),I.jsx("li",{children:I.jsx(Kc,{to:"zone",className:({isActive:t})=>t?"nav-item nav-item-active":"nav-item",children:"Zone kort"})}),I.jsx("li",{children:I.jsx(Kc,{to:"test",className:({isActive:t})=>t?"nav-item nav-item-active":"nav-item",children:"Test"})})]})})})})]})})})})}function YL(){return I.jsxs("div",{children:[I.jsx("div",{className:"background"}),I.jsx(HL,{}),I.jsx(AL,{})]})}function Rt(t){return(e,...n)=>KL(t,e,n)}function Ha(t,e){return Rt(ST(t,e).get)}const{apply:KL,construct:gY,defineProperty:mY,get:pY,getOwnPropertyDescriptor:ST,getPrototypeOf:o_,has:yY,ownKeys:qL,set:_Y,setPrototypeOf:vY}=Reflect,{iterator:uc,species:xY,toStringTag:ZL,for:EY}=Symbol,JL=Object,{create:a_,defineProperty:QL,freeze:wY,is:SY}=JL,e3=Array,t3=e3.prototype,CT=t3[uc],n3=Rt(CT),TT=ArrayBuffer,i3=TT.prototype;Ha(i3,"byteLength");const Bx=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;Bx&&Ha(Bx.prototype,"byteLength");const MT=o_(Uint8Array);MT.from;const en=MT.prototype;en[uc];Rt(en.keys);Rt(en.values);Rt(en.entries);Rt(en.set);Rt(en.reverse);Rt(en.fill);Rt(en.copyWithin);Rt(en.sort);Rt(en.slice);Rt(en.subarray);Ha(en,"buffer");Ha(en,"byteOffset");Ha(en,"length");Ha(en,ZL);const r3=Uint8Array,RT=Uint16Array,l_=Uint32Array,s3=Float32Array,bu=o_([][uc]()),bT=Rt(bu.next),o3=Rt(function*(){}().next),a3=o_(bu),l3=DataView.prototype,u3=Rt(l3.getUint16),u_=WeakMap,IT=u_.prototype,PT=Rt(IT.get),c3=Rt(IT.set),AT=new u_,h3=a_(null,{next:{value:function(){const e=PT(AT,this);return bT(e)}},[uc]:{value:function(){return this}}});function f3(t){if(t[uc]===CT&&bu.next===bT)return t;const e=a_(h3);return c3(AT,e,n3(t)),e}const d3=new u_,g3=a_(a3,{next:{value:function(){const e=PT(d3,this);return o3(e)},writable:!0,configurable:!0}});for(const t of qL(bu))t!=="next"&&QL(g3,t,ST(bu,t));const OT=new TT(4),m3=new s3(OT),p3=new l_(OT),vi=new RT(512),xi=new r3(512);for(let t=0;t<256;++t){const e=t-127;e<-24?(vi[t]=0,vi[t|256]=32768,xi[t]=24,xi[t|256]=24):e<-14?(vi[t]=1024>>-e-14,vi[t|256]=1024>>-e-14|32768,xi[t]=-e-1,xi[t|256]=-e-1):e<=15?(vi[t]=e+15<<10,vi[t|256]=e+15<<10|32768,xi[t]=13,xi[t|256]=13):e<128?(vi[t]=31744,vi[t|256]=64512,xi[t]=24,xi[t|256]=24):(vi[t]=31744,vi[t|256]=64512,xi[t]=13,xi[t|256]=13)}const c_=new l_(2048);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(e&8388608);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,c_[t]=e|n}for(let t=1024;t<2048;++t)c_[t]=939524096+(t-1024<<13);const Ya=new l_(64);for(let t=1;t<31;++t)Ya[t]=t<<23;Ya[31]=1199570944;Ya[32]=2147483648;for(let t=33;t<63;++t)Ya[t]=2147483648+(t-32<<23);Ya[63]=3347054592;const LT=new RT(64);for(let t=1;t<64;++t)t!==32&&(LT[t]=1024);function y3(t){const e=t>>10;return p3[0]=c_[LT[e]+(t&1023)]+Ya[e],m3[0]}function kT(t,e,...n){return y3(u3(t,e,...f3(n)))}var h_={exports:{}};function DT(t,e,n){const i=n&&n.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);const r=typeof t=="object"?t.outer:t,s=r.slice(0,r.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const l=o[a],u=e+"\\="+l+"([^"+l+"]*)"+l;i&&console.log("[xml-utils] pattern:",u);const h=new RegExp(u).exec(s);if(i&&console.log("[xml-utils] match:",h),h)return h[1]}}h_.exports=DT;h_.exports.default=DT;var _3=h_.exports;const l0=tc(_3);var f_={exports:{}},d_={exports:{}},g_={exports:{}};function FT(t,e,n){const r=new RegExp(e).exec(t.slice(n));return r?n+r.index:-1}g_.exports=FT;g_.exports.default=FT;var v3=g_.exports,m_={exports:{}};function NT(t,e,n){const r=new RegExp(e).exec(t.slice(n));return r?n+r.index+r[0].length-1:-1}m_.exports=NT;m_.exports.default=NT;var x3=m_.exports,p_={exports:{}};function GT(t,e){const n=new RegExp(e,"g"),i=t.match(n);return i?i.length:0}p_.exports=GT;p_.exports.default=GT;var E3=p_.exports;const w3=v3,u0=x3,$x=E3;function UT(t,e,n){const i=n&&n.debug||!1,r=!(n&&typeof n.nested===!1),s=n&&n.startIndex||0;i&&console.log("[xml-utils] starting findTagByName with",e," and ",n);const o=w3(t,`<${e}[ 
>/]`,s);if(i&&console.log("[xml-utils] start:",o),o===-1)return;const a=t.slice(o+e.length);let l=u0(a,"^[^<]*[ /]>",0);const u=l!==-1&&a[l-1]==="/";if(i&&console.log("[xml-utils] selfClosing:",u),u===!1)if(r){let g=0,d=1,p=0;for(;(l=u0(a,"[ /]"+e+">",g))!==-1;){const m=a.substring(g,l+1);if(d+=$x(m,"<"+e+`[ 
	>]`),p+=$x(m,"</"+e+">"),p>=d)break;g=l}}else l=u0(a,"[ /]"+e+">",0);const c=o+e.length+l+1;if(i&&console.log("[xml-utils] end:",c),c===-1)return;const h=t.slice(o,c);let f;return u?f=null:f=h.slice(h.indexOf(">")+1,h.lastIndexOf("<")),{inner:f,outer:h,start:o,end:c}}d_.exports=UT;d_.exports.default=UT;var S3=d_.exports;const C3=S3;function zT(t,e,n){const i=[],r=n&&n.debug||!1,s=n&&typeof n.nested=="boolean"?n.nested:!0;let o=n&&n.startIndex||0,a;for(;a=C3(t,e,{debug:r,startIndex:o});)s?o=a.start+1+e.length:o=a.end,i.push(a);return r&&console.log("findTagsByName found",i.length,"tags"),i}f_.exports=zT;f_.exports.default=zT;var T3=f_.exports;const M3=tc(T3),Jl={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Si={};for(const t in Jl)Jl.hasOwnProperty(t)&&(Si[Jl[t]]=parseInt(t,10));const R3=[Si.BitsPerSample,Si.ExtraSamples,Si.SampleFormat,Si.StripByteCounts,Si.StripOffsets,Si.StripRowCounts,Si.TileByteCounts,Si.TileOffsets,Si.SubIFDs],c0={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},me={};for(const t in c0)c0.hasOwnProperty(t)&&(me[c0[t]]=parseInt(t,10));const nn={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},b3={Unspecified:0,Assocalpha:1,Unassalpha:2},CY={Version:0,AddCompression:1},TY={None:0,Deflate:1,Zstandard:2},I3={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function P3(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=256-t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function A3(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function O3(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<t.length;++a,l+=3){const u=t[a];r[l]=e[u]/65536*256,r[l+1]=e[u+s]/65536*256,r[l+2]=e[u+o]/65536*256}return r}function L3(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let r=0,s=0;r<t.length;r+=4,s+=3){const o=t[r],a=t[r+1],l=t[r+2],u=t[r+3];i[s]=255*((255-o)/256)*((255-u)/256),i[s+1]=255*((255-a)/256)*((255-u)/256),i[s+2]=255*((255-l)/256)*((255-u)/256)}return i}function k3(t){const{width:e,height:n}=t,i=new Uint8ClampedArray(e*n*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){const o=t[r],a=t[r+1],l=t[r+2];i[s]=o+1.402*(l-128),i[s+1]=o-.34414*(a-128)-.71414*(l-128),i[s+2]=o+1.772*(a-128)}return i}const D3=.95047,F3=1,N3=1.08883;function G3(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){const o=t[r+0],a=t[r+1]<<24>>24,l=t[r+2]<<24>>24;let u=(o+16)/116,c=a/500+u,h=u-l/200,f,g,d;c=D3*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=F3*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),h=N3*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),f=c*3.2406+u*-1.5372+h*-.4986,g=c*-.9689+u*1.8758+h*.0415,d=c*.0557+u*-.204+h*1.057,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,i[s]=Math.max(0,Math.min(1,f))*255,i[s+1]=Math.max(0,Math.min(1,g))*255,i[s+2]=Math.max(0,Math.min(1,d))*255}return i}const U3="modulepreload",z3=function(t){return"/"+t},Vx={},ps=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=z3(l),l in Vx)return;Vx[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":U3,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},jT=new Map;function ys(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>jT.set(n,e))}async function BT(t){const e=jT.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);const n=await e();return new n(t)}ys([void 0,1],()=>ps(()=>import("./raw-Dt1HMqYc.js"),__vite__mapDeps([0,1])).then(t=>t.default));ys(5,()=>ps(()=>import("./lzw-DpvbRwG5.js"),__vite__mapDeps([2,1])).then(t=>t.default));ys(6,()=>{throw new Error("old style JPEG compression is not supported.")});ys(7,()=>ps(()=>import("./jpeg-CdeCw_eT.js"),__vite__mapDeps([3,1])).then(t=>t.default));ys([8,32946],()=>ps(()=>import("./deflate-CUkHh1nh.js"),__vite__mapDeps([4,5,1])).then(t=>t.default));ys(32773,()=>ps(()=>import("./packbits-DQnG8s9w.js"),__vite__mapDeps([6,1])).then(t=>t.default));ys(34887,()=>ps(()=>import("./lerc-CexWZvwD.js"),__vite__mapDeps([7,5,1])).then(async t=>(await t.zstd.init(),t)).then(t=>t.default));ys(50001,()=>ps(()=>import("./webimage-BcnuJlio.js"),__vite__mapDeps([8,1])).then(t=>t.default));function Ld(t,e,n,i=1){return new(Object.getPrototypeOf(t)).constructor(e*n*i)}function j3(t,e,n,i,r){const s=e/i,o=n/r;return t.map(a=>{const l=Ld(a,i,r);for(let u=0;u<r;++u){const c=Math.min(Math.round(o*u),n-1);for(let h=0;h<i;++h){const f=Math.min(Math.round(s*h),e-1),g=a[c*e+f];l[u*i+h]=g}}return l})}function aa(t,e,n){return(1-n)*t+n*e}function B3(t,e,n,i,r){const s=e/i,o=n/r;return t.map(a=>{const l=Ld(a,i,r);for(let u=0;u<r;++u){const c=o*u,h=Math.floor(c),f=Math.min(Math.ceil(c),n-1);for(let g=0;g<i;++g){const d=s*g,p=d%1,m=Math.floor(d),_=Math.min(Math.ceil(d),e-1),y=a[h*e+m],v=a[h*e+_],x=a[f*e+m],E=a[f*e+_],w=aa(aa(y,v,p),aa(x,E,p),c%1);l[u*i+g]=w}}return l})}function $3(t,e,n,i,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return j3(t,e,n,i,r);case"bilinear":case"linear":return B3(t,e,n,i,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function V3(t,e,n,i,r,s){const o=e/i,a=n/r,l=Ld(t,i,r,s);for(let u=0;u<r;++u){const c=Math.min(Math.round(a*u),n-1);for(let h=0;h<i;++h){const f=Math.min(Math.round(o*h),e-1);for(let g=0;g<s;++g){const d=t[c*e*s+f*s+g];l[u*i*s+h*s+g]=d}}}return l}function X3(t,e,n,i,r,s){const o=e/i,a=n/r,l=Ld(t,i,r,s);for(let u=0;u<r;++u){const c=a*u,h=Math.floor(c),f=Math.min(Math.ceil(c),n-1);for(let g=0;g<i;++g){const d=o*g,p=d%1,m=Math.floor(d),_=Math.min(Math.ceil(d),e-1);for(let y=0;y<s;++y){const v=t[h*e*s+m*s+y],x=t[h*e*s+_*s+y],E=t[f*e*s+m*s+y],w=t[f*e*s+_*s+y],C=aa(aa(v,x,p),aa(E,w,p),c%1);l[u*i*s+g*s+y]=C}}}return l}function W3(t,e,n,i,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return V3(t,e,n,i,r,s);case"bilinear":case"linear":return X3(t,e,n,i,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function H3(t,e,n){let i=0;for(let r=e;r<n;++r)i+=t[r];return i}function tp(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(e===8)return new Int8Array(n);if(e===16)return new Int16Array(n);if(e===32)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function Y3(t,e){return(t===1||t===2)&&e<=32&&e%8===0?!1:!(t===3&&(e===16||e===32||e===64))}function K3(t,e,n,i,r,s,o){const a=new DataView(t),l=n===2?o*s:o*s*i,u=n===2?1:i,c=tp(e,r,l),h=parseInt("1".repeat(r),2);if(e===1){let f;n===1?f=i*r:f=r;let g=s*f;g&7&&(g=g+7&-8);for(let d=0;d<o;++d){const p=d*g;for(let m=0;m<s;++m){const _=p+m*u*r;for(let y=0;y<u;++y){const v=_+y*r,x=(d*s+m)*u+y,E=Math.floor(v/8),w=v%8;if(w+r<=8)c[x]=a.getUint8(E)>>8-r-w&h;else if(w+r<=16)c[x]=a.getUint16(E)>>16-r-w&h;else if(w+r<=24){const C=a.getUint16(E)<<8|a.getUint8(E+2);c[x]=C>>24-r-w&h}else c[x]=a.getUint32(E)>>32-r-w&h}}}}return c.buffer}class $T{constructor(e,n,i,r,s,o){this.fileDirectory=e,this.geoKeys=n,this.dataView=i,this.littleEndian=r,this.tiles=s?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)e+=this.getSampleByteSize(n);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,i=this.fileDirectory.BitsPerSample[e];switch(n){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(r,s){return kT(this,r,s)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,n){const i=this.getSampleFormat(e),r=this.getBitsPerSample(e);return tp(i,r,n)}async getTileOrStrip(e,n,i,r,s){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:u}=this;this.planarConfiguration===1?l=n*o+e:this.planarConfiguration===2&&(l=i*o*a+n*o+e);let c,h;this.isTiled?(c=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(c=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]);const f=(await this.source.fetch([{offset:c,length:h}],s))[0];let g;return u===null||!u[l]?(g=(async()=>{let d=await r.decode(this.fileDirectory,f);const p=this.getSampleFormat(),m=this.getBitsPerSample();return Y3(p,m)&&(d=K3(d,p,this.planarConfiguration,this.getSamplesPerPixel(),m,this.getTileWidth(),this.getBlockHeight(n))),d})(),u!==null&&(u[l]=g)):g=u[l],{x:e,y:n,sample:i,data:await g}}async _readRaster(e,n,i,r,s,o,a,l,u){const c=this.getTileWidth(),h=this.getTileHeight(),f=this.getWidth(),g=this.getHeight(),d=Math.max(Math.floor(e[0]/c),0),p=Math.min(Math.ceil(e[2]/c),Math.ceil(f/c)),m=Math.max(Math.floor(e[1]/h),0),_=Math.min(Math.ceil(e[3]/h),Math.ceil(g/h)),y=e[2]-e[0];let v=this.getBytesPerPixel();const x=[],E=[];for(let S=0;S<n.length;++S)this.planarConfiguration===1?x.push(H3(this.fileDirectory.BitsPerSample,0,n[S])/8):x.push(0),E.push(this.getReaderForSample(n[S]));const w=[],{littleEndian:C}=this;for(let S=m;S<_;++S)for(let R=d;R<p;++R){let M;this.planarConfiguration===1&&(M=this.getTileOrStrip(R,S,0,s,u));for(let k=0;k<n.length;++k){const A=k,U=n[k];this.planarConfiguration===2&&(v=this.getSampleByteSize(U),M=this.getTileOrStrip(R,S,U,s,u));const B=M.then(G=>{const j=G.data,$=new DataView(j),O=this.getBlockHeight(G.y),F=G.y*h,P=G.x*c,N=F+O,z=(G.x+1)*c,H=E[A],L=Math.min(O,O-(N-e[3]),g-F),q=Math.min(c,c-(z-e[2]),f-P);for(let Z=Math.max(0,e[1]-F);Z<L;++Z)for(let te=Math.max(0,e[0]-P);te<q;++te){const xe=(Z*c+te)*v,Be=H.call($,xe+x[A],C);let $e;r?($e=(Z+F-e[1])*y*n.length+(te+P-e[0])*n.length+A,i[$e]=Be):($e=(Z+F-e[1])*y+te+P-e[0],i[A][$e]=Be)}});w.push(B)}}if(await Promise.all(w),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let S;return r?S=W3(i,e[2]-e[0],e[3]-e[1],o,a,n.length,l):S=$3(i,e[2]-e[0],e[3]-e[1],o,a,l),S.width=o,S.height=a,S}return i.width=o||e[2]-e[0],i.height=a||e[3]-e[1],i}async readRasters({window:e,samples:n=[],interleave:i,pool:r=null,width:s,height:o,resampleMethod:a,fillValue:l,signal:u}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=c[2]-c[0],f=c[3]-c[1],g=h*f,d=this.getSamplesPerPixel();if(!n||!n.length)for(let y=0;y<d;++y)n.push(y);else for(let y=0;y<n.length;++y)if(n[y]>=d)return Promise.reject(new RangeError(`Invalid sample index '${n[y]}'.`));let p;if(i){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,v=Math.max.apply(null,this.fileDirectory.BitsPerSample);p=tp(y,v,g*n.length),l&&p.fill(l)}else{p=[];for(let y=0;y<n.length;++y){const v=this.getArrayForSample(n[y],g);Array.isArray(l)&&y<l.length?v.fill(l[y]):l&&!Array.isArray(l)&&v.fill(l),p.push(v)}}const m=r||await BT(this.fileDirectory);return await this._readRaster(c,n,p,i,m,s,o,a,u)}async readRGB({window:e,interleave:n=!0,pool:i=null,width:r,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===nn.RGB){let _=[0,1,2];if(this.fileDirectory.ExtraSamples!==b3.Unspecified&&a){_=[];for(let y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)_.push(y)}return this.readRasters({window:e,interleave:n,samples:_,pool:i,width:r,height:s,resampleMethod:o,signal:l})}let h;switch(c){case nn.WhiteIsZero:case nn.BlackIsZero:case nn.Palette:h=[0];break;case nn.CMYK:h=[0,1,2,3];break;case nn.YCbCr:case nn.CIELab:h=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const f={window:u,interleave:!0,samples:h,pool:i,width:r,height:s,resampleMethod:o,signal:l},{fileDirectory:g}=this,d=await this.readRasters(f),p=2**this.fileDirectory.BitsPerSample[0];let m;switch(c){case nn.WhiteIsZero:m=P3(d,p);break;case nn.BlackIsZero:m=A3(d,p);break;case nn.Palette:m=O3(d,g.ColorMap);break;case nn.CMYK:m=L3(d);break;case nn.YCbCr:m=k3(d);break;case nn.CIELab:m=G3(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const _=new Uint8Array(m.length/3),y=new Uint8Array(m.length/3),v=new Uint8Array(m.length/3);for(let x=0,E=0;x<m.length;x+=3,++E)_[E]=m[x],y[E]=m[x+1],v[E]=m[x+2];m=[_,y,v]}return m.width=d.width,m.height=d.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)e.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return e}getGDALMetadata(e=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let r=M3(i,"Item");e===null?r=r.filter(s=>l0(s,"sample")===void 0):r=r.filter(s=>Number(l0(s,"sample"))===e);for(let s=0;s<r.length;++s){const o=r[s];n[l0(o,"name")]=o.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const n=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(i)return i[1]===0&&i[4]===0?[i[0],-i[5],i[10]]:[Math.sqrt(i[0]*i[0]+i[4]*i[4]),-Math.sqrt(i[1]*i[1]+i[5]*i[5]),i[10]];if(e){const[r,s,o]=e.getResolution();return[r*e.getWidth()/this.getWidth(),s*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const n=this.getHeight(),i=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[r,s,o,a,l,u,c,h]=this.fileDirectory.ModelTransformation,g=[[0,0],[0,n],[i,0],[i,n]].map(([m,_])=>[a+r*m+s*_,h+l*m+u*_]),d=g.map(m=>m[0]),p=g.map(m=>m[1]);return[Math.min(...d),Math.min(...p),Math.max(...d),Math.max(...p)]}else{const r=this.getOrigin(),s=this.getResolution(),o=r[0],a=r[1],l=o+s[0]*i,u=a+s[1]*n;return[Math.min(o,l),Math.min(a,u),Math.max(o,l),Math.max(a,u)]}}}class q3{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,n){const i=this.getUint32(e,n),r=this.getUint32(e+4,n);let s;if(n){if(s=i+2**32*r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*i+r,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}getInt64(e,n){let i=0;const r=(this._dataView.getUint8(e+(n?7:0))&128)>0;let s=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(n?o:7-o));r&&(s?a!==0&&(a=~(a-1)&255,s=!1):a=~a&255),i+=a*256**o}return r&&(i=-i),i}getUint8(e,n){return this._dataView.getUint8(e,n)}getInt8(e,n){return this._dataView.getInt8(e,n)}getUint16(e,n){return this._dataView.getUint16(e,n)}getInt16(e,n){return this._dataView.getInt16(e,n)}getUint32(e,n){return this._dataView.getUint32(e,n)}getInt32(e,n){return this._dataView.getInt32(e,n)}getFloat16(e,n){return kT(this._dataView,e,n)}getFloat32(e,n){return this._dataView.getFloat32(e,n)}getFloat64(e,n){return this._dataView.getFloat64(e,n)}}class Z3{constructor(e,n,i,r){this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=i,this._bigTiff=r}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,n){return this.sliceOffset<=e&&this.sliceTop>=e+n}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const n=this.readUint32(e),i=this.readUint32(e+4);let r;if(this._littleEndian){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}readInt64(e){let n=0;const i=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(e+(this._littleEndian?s:7-s));i&&(r?o!==0&&(o=~(o-1)&255,r=!1):o=~o&255),n+=o*256**s}return i&&(n=-n),n}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const J3=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class Q3{constructor(e=J3,n){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(i=>{ps(()=>import("./decoder-CaSv2t6h.js"),[]).then(r=>{i(r.create)})}),this._awaitingDecoder.then(i=>{this._awaitingDecoder=null,this.workers=[];for(let r=0;r<e;r++)this.workers.push({worker:i(),idle:!0})}))}async decode(e,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?BT(e).then(i=>i.decode(e,n)):new Promise(i=>{const r=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];r.idle=!1;const s=this.messageId++,o=a=>{a.data.id===s&&(r.idle=!0,i(a.data.decoded),r.worker.removeEventListener("message",o))};r.worker.addEventListener("message",o),r.worker.postMessage({fileDirectory:e,buffer:n,id:s},[n])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const Xx=`\r
\r
`;function VT(t){if(typeof Object.fromEntries<"u")return Object.fromEntries(t);const e={};for(const[n,i]of t)e[n.toLowerCase()]=i;return e}function ek(t){const e=t.split(`\r
`).map(n=>{const i=n.split(":").map(r=>r.trim());return i[0]=i[0].toLowerCase(),i});return VT(e)}function tk(t){const[e,...n]=t.split(";").map(r=>r.trim()),i=n.map(r=>r.split("="));return{type:e,params:VT(i)}}function np(t){let e,n,i;return t&&([,e,n,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10)),{start:e,end:n,total:i}}function nk(t,e){let n=null;const i=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)i.decode(new Uint8Array(t,a,s.length))===s&&(n=a);if(n===null)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){const a=i.decode(new Uint8Array(t,n,Math.min(s.length+1024,t.byteLength-n)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(s))throw new Error("Part does not start with boundary");const l=a.substr(s.length+2);if(l.length===0)break;const u=l.indexOf(Xx),c=ek(l.substr(0,u)),{start:h,end:f,total:g}=np(c["content-range"]),d=n+s.length+u+Xx.length,p=parseInt(f,10)+1-parseInt(h,10);r.push({headers:c,data:t.slice(d,d+p),offset:h,length:p,fileSize:g}),n=d+p+4}return r}class y_{async fetch(e,n=void 0){return Promise.all(e.map(i=>this.fetchSlice(i,n)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class ik extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,i]of e)this.onEviction(n,i.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const i=n.get(e);return this._getItemValue(e,i)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,i]=e;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield e)}for(const e of this.cache){const[n,i]=e;this._deleteIfExpired(n,i)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:i=this.maxAge}={}){const r=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return this.cache.has(e)?this.cache.set(e,{value:n,expiry:r}):this._set(e,{value:n,expiry:r}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],i=n.length-e;i<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(i>0&&this._emitEvictions(n.slice(0,i)),this.oldCache=new Map(n.slice(i)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,i]=e;this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}for(const e of this.oldCache){const[n,i]=e;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const i=e[n],[r,s]=i;this._deleteIfExpired(r,s)===!1&&(yield[r,s.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const i=e[n],[r,s]=i;this.cache.has(r)||this._deleteIfExpired(r,s)===!1&&(yield[r,s.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[i,r]of this.entriesAscending())e.call(n,r,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function rk(t){return new Promise(e=>setTimeout(e,t))}function sk(t,e){const n=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e);return n.map((r,s)=>[r,i[s]])}class Ma extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Ma),this.name="AbortError"}}class ok extends Error{constructor(e,n){super(n),this.errors=e,this.message=n,this.name="AggregateError"}}const ak=ok;class lk{constructor(e,n,i=null){this.offset=e,this.length=n,this.data=i}get top(){return this.offset+this.length}}class Wx{constructor(e,n,i){this.offset=e,this.length=n,this.blockIds=i}}class uk extends y_{constructor(e,{blockSize:n=65536,cacheSize:i=100}={}){super(),this.source=e,this.blockSize=n,this.blockCache=new ik({maxSize:i,onEviction:(r,s)=>{this.evictedBlocks.set(r,s)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,n){const i=[],r=[],s=[];this.evictedBlocks.clear();for(const{offset:f,length:g}of e){let d=f+g;const{fileSize:p}=this;p!==null&&(d=Math.min(d,p));const m=Math.floor(f/this.blockSize)*this.blockSize;for(let _=m;_<d;_+=this.blockSize){const y=Math.floor(_/this.blockSize);!this.blockCache.has(y)&&!this.blockRequests.has(y)&&(this.blockIdsToFetch.add(y),r.push(y)),this.blockRequests.has(y)&&i.push(this.blockRequests.get(y)),s.push(y)}}await rk(),this.fetchBlocks(n);const o=[];for(const f of r)this.blockRequests.has(f)&&o.push(this.blockRequests.get(f));await Promise.allSettled(i),await Promise.allSettled(o);const a=[],l=s.filter(f=>this.abortedBlockIds.has(f)||!this.blockCache.has(f));if(l.forEach(f=>this.blockIdsToFetch.add(f)),l.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const f of l){const g=this.blockRequests.get(f);if(!g)throw new Error(`Block ${f} is not in the block requests`);a.push(g)}await Promise.allSettled(a)}if(n&&n.aborted)throw new Ma("Request was aborted");const u=s.map(f=>this.blockCache.get(f)||this.evictedBlocks.get(f)),c=u.filter(f=>!f);if(c.length)throw new ak(c,"Request failed");const h=new Map(sk(s,u));return this.readSliceData(e,h)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(n,e);for(let r=0;r<n.length;++r){const s=n[r];for(const o of s.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await i)[r],l=o*this.blockSize,u=l-a.offset,c=Math.min(u+this.blockSize,a.data.byteLength),h=a.data.slice(u,c),f=new lk(l,h.byteLength,h,o);this.blockCache.set(o,f),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const n=Array.from(e).sort((o,a)=>o-a);if(n.length===0)return[];let i=[],r=null;const s=[];for(const o of n)r===null||r+1===o?(i.push(o),r=o):(s.push(new Wx(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[o],r=o);return s.push(new Wx(i[0]*this.blockSize,i.length*this.blockSize,i)),s}readSliceData(e,n){return e.map(i=>{let r=i.offset+i.length;this.fileSize!==null&&(r=Math.min(this.fileSize,r));const s=Math.floor(i.offset/this.blockSize),o=Math.floor(r/this.blockSize),a=new ArrayBuffer(i.length),l=new Uint8Array(a);for(let u=s;u<=o;++u){const c=n.get(u),h=c.offset-i.offset,f=c.top-r;let g=0,d=0,p;h<0?g=-h:h>0&&(d=h),f<0?p=c.length-g:p=r-c.offset-g;const m=new Uint8Array(c.data,g,p);l.set(m,d)}return a})}}class __{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class v_{constructor(e){this.url=e}async request({headers:e,signal:n}={}){throw new Error("request is not implemented")}}class ck extends __{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class hk extends v_{constructor(e,n){super(e),this.credentials=n}async request({headers:e,signal:n}={}){const i=await fetch(this.url,{headers:e,credentials:this.credentials,signal:n});return new ck(i)}}class fk extends __{constructor(e,n){super(),this.xhr=e,this.data=n}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class dk extends v_{constructRequest(e,n){return new Promise((i,r)=>{const s=new XMLHttpRequest;s.open("GET",this.url),s.responseType="arraybuffer";for(const[o,a]of Object.entries(e))s.setRequestHeader(o,a);s.onload=()=>{const o=s.response;i(new fk(s,o))},s.onerror=r,s.onabort=()=>r(new Ma("Request aborted")),s.send(),n&&(n.aborted&&s.abort(),n.addEventListener("abort",()=>s.abort()))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}const h0={};class gk extends __{constructor(e,n){super(),this.response=e,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class mk extends v_{constructor(e){super(e),this.parsedUrl=h0.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",h0)}constructRequest(e,n){return new Promise((i,r)=>{const s=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const u=[];o.on("data",c=>{u.push(c)}),o.on("end",()=>{const c=Buffer.concat(u).buffer;l(c)}),o.on("error",r)});i(new gk(o,a))});s.on("error",r),n&&(n.aborted&&s.destroy(new Ma("Request aborted")),n.addEventListener("abort",()=>s.destroy(new Ma("Request aborted"))))})}async request({headers:e,signal:n}={}){return await this.constructRequest(e,n)}}class x_ extends y_{constructor(e,n,i,r){super(),this.client=e,this.headers=n,this.maxRanges=i,this.allowFullFile=r,this._fileSize=null}async fetch(e,n){return this.maxRanges>=e.length?this.fetchSlices(e,n):(this.maxRanges>0&&e.length>1,Promise.all(e.map(i=>this.fetchSlice(i,n))))}async fetchSlices(e,n){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:r,length:s})=>`${r}-${r+s}`).join(",")}`},signal:n});if(i.ok)if(i.status===206){const{type:r,params:s}=tk(i.getHeader("content-type"));if(r==="multipart/byteranges"){const h=nk(await i.getData(),s.boundary);return this._fileSize=h[0].fileSize||null,h}const o=await i.getData(),{start:a,end:l,total:u}=np(i.getHeader("content-range"));this._fileSize=u||null;const c=[{data:o,offset:a,length:l-a}];if(e.length>1){const h=await Promise.all(e.slice(1).map(f=>this.fetchSlice(f,n)));return c.concat(h)}return c}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const r=await i.getData();return this._fileSize=r.byteLength,[{data:r,offset:0,length:r.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,n){const{offset:i,length:r}=e,s=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+r}`},signal:n});if(s.ok)if(s.status===206){const o=await s.getData(),{total:a}=np(s.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:i,length:r}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await s.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function E_(t,{blockSize:e,cacheSize:n}){return e===null?t:new uk(t,{blockSize:e,cacheSize:n})}function pk(t,{headers:e={},credentials:n,maxRanges:i=0,allowFullFile:r=!1,...s}={}){const o=new hk(t,n),a=new x_(o,e,i,r);return E_(a,s)}function yk(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new dk(t),o=new x_(s,e,n,i);return E_(o,r)}function _k(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new mk(t),o=new x_(s,e,n,i);return E_(o,r)}function ip(t,{forceXHR:e=!1,...n}={}){return typeof fetch=="function"&&!e?pk(t,n):typeof XMLHttpRequest<"u"?yk(t,n):_k(t,n)}class vk extends y_{constructor(e){super(),this.file=e}async fetchSlice(e,n){return new Promise((i,r)=>{const s=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=a=>i(a.target.result),o.onerror=r,o.onabort=r,o.readAsArrayBuffer(s),n&&n.addEventListener("abort",()=>o.abort())})}}function xk(t){return new vk(t)}function rp(t){switch(t){case me.BYTE:case me.ASCII:case me.SBYTE:case me.UNDEFINED:return 1;case me.SHORT:case me.SSHORT:return 2;case me.LONG:case me.SLONG:case me.FLOAT:case me.IFD:return 4;case me.RATIONAL:case me.SRATIONAL:case me.DOUBLE:case me.LONG8:case me.SLONG8:case me.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function Ek(t){const e=t.GeoKeyDirectory;if(!e)return null;const n={};for(let i=4;i<=e[3]*4;i+=4){const r=I3[e[i]],s=e[i+1]?Jl[e[i+1]]:null,o=e[i+2],a=e[i+3];let l=null;if(!s)l=a;else{if(l=t[s],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${r}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}n[r]=l}return n}function ho(t,e,n,i){let r=null,s=null;const o=rp(e);switch(e){case me.BYTE:case me.ASCII:case me.UNDEFINED:r=new Uint8Array(n),s=t.readUint8;break;case me.SBYTE:r=new Int8Array(n),s=t.readInt8;break;case me.SHORT:r=new Uint16Array(n),s=t.readUint16;break;case me.SSHORT:r=new Int16Array(n),s=t.readInt16;break;case me.LONG:case me.IFD:r=new Uint32Array(n),s=t.readUint32;break;case me.SLONG:r=new Int32Array(n),s=t.readInt32;break;case me.LONG8:case me.IFD8:r=new Array(n),s=t.readUint64;break;case me.SLONG8:r=new Array(n),s=t.readInt64;break;case me.RATIONAL:r=new Uint32Array(n*2),s=t.readUint32;break;case me.SRATIONAL:r=new Int32Array(n*2),s=t.readInt32;break;case me.FLOAT:r=new Float32Array(n),s=t.readFloat32;break;case me.DOUBLE:r=new Float64Array(n),s=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===me.RATIONAL||e===me.SRATIONAL)for(let a=0;a<n;a+=2)r[a]=s.call(t,i+a*o),r[a+1]=s.call(t,i+(a*o+4));else for(let a=0;a<n;++a)r[a]=s.call(t,i+a*o);return e===me.ASCII?new TextDecoder("utf-8").decode(r):r}class wk{constructor(e,n,i){this.fileDirectory=e,this.geoKeyDirectory=n,this.nextIFDByteOffset=i}}class qc extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class XT{async readRasters(e={}){const{window:n,width:i,height:r}=e;let{resX:s,resY:o,bbox:a}=e;const l=await this.getImage();let u=l;const c=await this.getImageCount(),h=l.getBoundingBox();if(n&&a)throw new Error('Both "bbox" and "window" passed.');if(i||r){if(n){const[d,p]=l.getOrigin(),[m,_]=l.getResolution();a=[d+n[0]*m,p+n[1]*_,d+n[2]*m,p+n[3]*_]}const g=a||h;if(i){if(s)throw new Error("Both width and resX passed");s=(g[2]-g[0])/i}if(r){if(o)throw new Error("Both width and resY passed");o=(g[3]-g[1])/r}}if(s||o){const g=[];for(let d=0;d<c;++d){const p=await this.getImage(d),{SubfileType:m,NewSubfileType:_}=p.fileDirectory;(d===0||m===2||_&1)&&g.push(p)}g.sort((d,p)=>d.getWidth()-p.getWidth());for(let d=0;d<g.length;++d){const p=g[d],m=(h[2]-h[0])/p.getWidth(),_=(h[3]-h[1])/p.getHeight();if(u=p,s&&s>m||o&&o>_)break}}let f=n;if(a){const[g,d]=l.getOrigin(),[p,m]=u.getResolution(l);f=[Math.round((a[0]-g)/p),Math.round((a[1]-d)/m),Math.round((a[2]-g)/p),Math.round((a[3]-d)/m)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return u.readRasters({...e,window:f})}}class Ra extends XT{constructor(e,n,i,r,s={}){super(),this.source=e,this.littleEndian=n,this.bigTiff=i,this.firstIFDOffset=r,this.cache=s.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,n){const i=this.bigTiff?4048:1024;return new Z3((await this.source.fetch([{offset:e,length:typeof n<"u"?n:i}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const n=this.bigTiff?20:12,i=this.bigTiff?8:2;let r=await this.getSlice(e);const s=this.bigTiff?r.readUint64(e):r.readUint16(e),o=s*n+(this.bigTiff?16:6);r.covers(e,o)||(r=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let h=0;h<s;l+=n,++h){const f=r.readUint16(l),g=r.readUint16(l+2),d=this.bigTiff?r.readUint64(l+4):r.readUint32(l+4);let p,m;const _=rp(g),y=l+(this.bigTiff?12:8);if(_*d<=(this.bigTiff?8:4))p=ho(r,g,d,y);else{const v=r.readOffset(y),x=rp(g)*d;if(r.covers(v,x))p=ho(r,g,d,v);else{const E=await this.getSlice(v,x);p=ho(E,g,d,v)}}d===1&&R3.indexOf(f)===-1&&!(g===me.RATIONAL||g===me.SRATIONAL)?m=p[0]:m=p,a[Jl[f]]=m}const u=Ek(a),c=r.readOffset(e+i+n*s);return new wk(a,u,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(n){throw n instanceof qc?new qc(e):n}return this.ifdRequests[e]=(async()=>{const n=await this.ifdRequests[e-1];if(n.nextIFDByteOffset===0)throw new qc(e);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const n=await this.requestIFD(e);return new $T(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,n=!0;for(;n;)try{await this.requestIFD(e),++e}catch(i){if(i instanceof qc)n=!1;else throw i}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",i=n.length+100;let r=await this.getSlice(e,i);if(n===ho(r,me.ASCII,n.length,e)){const o=ho(r,me.ASCII,i,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>i&&(r=await this.getSlice(e,a));const l=ho(r,me.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(u=>u.length>0).map(u=>u.split("=")).forEach(([u,c])=>{this.ghostValues[u]=c})}return this.ghostValues}static async fromSource(e,n,i){const r=(await e.fetch([{offset:0,length:1024}],i))[0],s=new q3(r),o=s.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=s.getUint16(2,a);let u;if(l===42)u=!1;else if(l===43){if(u=!0,s.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const c=u?s.getUint64(8,a):s.getUint32(4,a);return new Ra(e,a,u,c,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class Sk extends XT{constructor(e,n){super(),this.mainFile=e,this.overviewFiles=n,this.imageFiles=[e].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,i=0;for(let r=0;r<this.imageFiles.length;r++){const s=this.imageFiles[r];for(let o=0;o<this.imageCounts[r];o++){if(e===n){const a=await s.requestIFD(i);return new $T(a.fileDirectory,a.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source)}n++,i++}i=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((n,i)=>n+i,0),this.imageCount}}async function Ck(t,e={},n){return Ra.fromSource(ip(t,e),n)}async function Tk(t,e){return Ra.fromSource(xk(t),e)}async function Mk(t,e=[],n={},i){const r=await Ra.fromSource(ip(t,n),i),s=await Promise.all(e.map(o=>Ra.fromSource(ip(o,n))));return new Sk(r,s)}let WT,Iu=[];const Rk=Ka()?new CustomEvent("loadstart"):null,bk=Ka()?new CustomEvent("loadend"):null,Ik=Ka()?new CustomEvent("loaderror",{detail:{name:Ok()}}):null;function Ka(){if(typeof process=="object"&&typeof require=="function"||typeof importScripts=="function")return!1;if(typeof window=="object")return!0}function Pk(){Ka()&&Iu.length<1&&document.dispatchEvent(Rk),Iu.push(1)}function Hx(){Iu.pop(),Ka()&&Iu.length<1&&document.dispatchEvent(bk)}function Ak(){Iu=[],Ka()&&document.dispatchEvent(Ik)}function Ok(){return WT}function Lk(t,e){if(!t.ok)throw WT=t.status,Ak(),new Error(`HTTP error! ${t.status}`);return e?t.json():t}function kk(t,e={},n=!0){if(!t)console.error("Could not fetch data. Missing API URL");else return Pk(),fetch(t,{...e,method:"GET",mode:"cors"}).then(i=>Lk(i,n)).then(i=>(Hx(),i)).catch(i=>(console.error(`Fetch error: ${i}`),Hx(),i))}function Dk(t,e){let n=`${e.API_STAC_BASEURL}${t}`;return t.split("?")[1]?n+=`&token=${e.API_STAC_TOKEN}`:n+=`?token=${e.API_STAC_TOKEN}`,kk(n).then(r=>r)}function Fk(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Ys=1,Ks=2,la=3,Nk=4,sp=5,Yx=6378137,Gk=6356752314e-3,Kx=.0066943799901413165,Ql=484813681109536e-20,V=Math.PI/2,Uk=.16666666666666666,zk=.04722222222222222,jk=.022156084656084655,K=1e-10,Et=.017453292519943295,Pi=57.29577951308232,Pe=Math.PI/4,Pu=Math.PI*2,Je=3.14159265359,pn={};pn.greenwich=0;pn.lisbon=-9.131906111111;pn.paris=2.337229166667;pn.bogota=-74.080916666667;pn.madrid=-3.687938888889;pn.rome=12.452333333333;pn.bern=7.439583333333;pn.jakarta=106.807719444444;pn.ferro=-17.666666666667;pn.brussels=4.367975;pn.stockholm=18.058277777778;pn.athens=23.7163375;pn.oslo=10.722916666667;const Bk={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var qx=/[\s_\-\/\(\)]/g;function ts(t,e){if(t[e])return t[e];for(var n=Object.keys(t),i=e.toLowerCase().replace(qx,""),r=-1,s,o;++r<n.length;)if(s=n[r],o=s.toLowerCase().replace(qx,""),o===i)return t[s]}function op(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),i,r,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Et},lat_1:function(a){e.lat1=a*Et},lat_2:function(a){e.lat2=a*Et},lat_ts:function(a){e.lat_ts=a*Et},lon_0:function(a){e.long0=a*Et},lon_1:function(a){e.long1=a*Et},lon_2:function(a){e.long2=a*Et},alpha:function(a){e.alpha=parseFloat(a)*Et},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*Et},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=ts(Bk,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Et},pm:function(a){var l=ts(pn,a);e.from_greenwich=(l||parseFloat(a))*Et},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(i in n)r=n[i],i in o?(s=o[i],typeof s=="function"?s(r):e[s]=r):e[i]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Au=1,HT=2,YT=3,Pf=4,KT=5,w_=-1,$k=/\s/,Vk=/[A-Za-z]/,Xk=/[A-Za-z84_]/,kd=/[,\]]/,qT=/[\d\.E\-\+]/;function Er(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Au}Er.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Pf)for(;$k.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Au:return this.neutral(t);case HT:return this.keyword(t);case Pf:return this.quoted(t);case KT:return this.afterquote(t);case YT:return this.number(t);case w_:return}};Er.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Pf;return}if(kd.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Er.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Au;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Au,this.currentObject=this.stack.pop(),this.currentObject||(this.state=w_);return}};Er.prototype.number=function(t){if(qT.test(t)){this.word+=t;return}if(kd.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Er.prototype.quoted=function(t){if(t==='"'){this.state=KT;return}this.word+=t};Er.prototype.keyword=function(t){if(Xk.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Au;return}if(kd.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Er.prototype.neutral=function(t){if(Vk.test(t)){this.word=t,this.state=HT;return}if(t==='"'){this.word="",this.state=Pf;return}if(qT.test(t)){this.word=t,this.state=YT;return}if(kd.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Er.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===w_)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Wk(t){var e=new Er(t);return e.output()}function f0(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce(function(s,o){return Bo(o,s),s},i);e&&(t[e]=r)}function Bo(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Bo(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Bo(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Bo(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],f0(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],f0(e,n,t),e[n].type=n;return;default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return Bo(t,e[n]);return f0(e,n,t)}}var Hk=.017453292519943295,Yk=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Kk(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],e.length===3&&(t[n]=e[2](t[n])))}function Ei(t){return t*Hk}function ZT(t){for(var e=Object.keys(t),n=0,i=e.length;n<i;++n){var r=e[n];Yk.indexOf(r)!==-1&&qk(t[r]),typeof t[r]=="object"&&ZT(t[r])}}function qk(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",i=0,r=t.AXIS.length;i<r;++i){var s=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function a(c){var h=t.to_meter||1;return c*h}var l=function(c){return Kk(t,c)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ei],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ei],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Ei],["lat0","latitude_of_origin",Ei],["lat0","standard_parallel_1",Ei],["lat1","standard_parallel_1",Ei],["lat2","standard_parallel_2",Ei],["azimuth","Azimuth"],["alpha","azimuth",Ei],["srsCode","name"]];u.forEach(l),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Ei(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Ei(t.lat0>0?90:-90))}function JT(t){var e=Wk(t),n=e[0],i={};return Bo(e,i),ZT(i),i[n]}function Vt(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Vt[t]=op(arguments[1]):Vt[t]=JT(arguments[1]):Vt[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(i){Array.isArray(i)?Vt.apply(e,i):Vt(i)});if(typeof t=="string"){if(t in Vt)return Vt[t]}else"EPSG"in t?Vt["EPSG:"+t.EPSG]=t:"ESRI"in t?Vt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Vt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Fk(Vt);function Zk(t){return typeof t=="string"}function Jk(t){return t in Vt}var Qk=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function eD(t){return Qk.some(function(e){return t.indexOf(e)>-1})}var tD=["3857","900913","3785","102113"];function nD(t){var e=ts(t,"authority");if(e){var n=ts(e,"epsg");return n&&tD.indexOf(n)>-1}}function iD(t){var e=ts(t,"extension");if(e)return ts(e,"proj4")}function rD(t){return t[0]==="+"}function sD(t){if(Zk(t)){if(Jk(t))return Vt[t];if(eD(t)){var e=JT(t);if(nD(e))return Vt["EPSG:3857"];var n=iD(e);return n?op(n):e}if(rD(t))return op(t)}else return t}function Zx(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)n=e[i],n!==void 0&&(t[i]=n);return t}function ji(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function cc(t){return t<0?-1:1}function J(t){return Math.abs(t)<=Je?t:t-cc(t)*Pu}function ai(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(V-e))/i}function Ou(t,e){for(var n=.5*t,i,r,s=V-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),r=V-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function oD(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function aD(t){var e=t.x,n=t.y;if(n*Pi>90&&n*Pi<-90&&e*Pi>180&&e*Pi<-180)return null;var i,r;if(Math.abs(Math.abs(n)-V)<=K)return null;if(this.sphere)i=this.x0+this.a*this.k0*J(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Pe+.5*n));else{var s=Math.sin(n),o=ai(this.e,n,s);i=this.x0+this.a*this.k0*J(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return t.x=i,t.y=r,t}function lD(t){var e=t.x-this.x0,n=t.y-this.y0,i,r;if(this.sphere)r=V-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(r=Ou(this.e,s),r===-9999)return null}return i=J(this.long0+e/(this.a*this.k0)),t.x=i,t.y=r,t}var uD=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const cD={init:oD,forward:aD,inverse:lD,names:uD};function hD(){}function Jx(t){return t}var fD=["longlat","identity"];const dD={init:hD,forward:Jx,inverse:Jx,names:fD};var gD=[cD,dD],Uh={},Af=[];function QT(t,e){var n=Af.length;return t.names?(Af[n]=t,t.names.forEach(function(i){Uh[i.toLowerCase()]=n}),this):(console.log(e),!0)}function mD(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Uh[e]<"u"&&Af[Uh[e]])return Af[Uh[e]]}function pD(){gD.forEach(QT)}const yD={start:pD,add:QT,get:mD};var ce={};ce.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ce.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ce.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ce.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ce.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};ce.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ce.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ce.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};ce.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ce.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ce.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ce.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};ce.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ce.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};ce.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};ce.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};ce.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};ce.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ce.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ce.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};ce.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};ce.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};ce.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};ce.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};ce.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ce.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ce.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ce.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ce.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ce.hough={a:6378270,rf:297,ellipseName:"Hough"};ce.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ce.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ce.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ce.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ce.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};ce.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ce.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ce.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};ce.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};ce.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ce.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ce.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var _D=ce.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ce.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function vD(t,e,n,i){var r=t*t,s=e*e,o=(r-s)/r,a=0;i?(t*=1-o*(Uk+o*(zk+o*jk)),r=t*t,o=0):a=Math.sqrt(o);var l=(r-s)/s;return{es:o,e:a,ep2:l}}function xD(t,e,n,i,r){if(!t){var s=ts(ce,i);s||(s=_D),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<K)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}var zh={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var ED in zh){var Qx=zh[ED];zh[Qx.datumName]=Qx}function wD(t,e,n,i,r,s,o){var a={};return t===void 0||t==="none"?a.datum_type=sp:a.datum_type=Nk,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=Ys),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Ks,a.datum_params[3]*=Ql,a.datum_params[4]*=Ql,a.datum_params[5]*=Ql,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=la,a.grids=o),a.a=n,a.b=i,a.es=r,a.ep2=s,a}var eM={};function SD(t,e){var n=new DataView(e),i=MD(n),r=RD(n,i),s=bD(n,r,i),o={header:r,subgrids:s};return eM[t]=o,o}function CD(t){if(t===void 0)return null;var e=t.split(",");return e.map(TD)}function TD(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:eM[t]||null,isNull:!1}}function $o(t){return t/3600*Math.PI/180}function MD(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function RD(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ap(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function ap(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function bD(t,e,n){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=PD(t,i,n),a=AD(t,i,o,n),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[$o(o.lowerLongitude),$o(o.lowerLatitude)],del:[$o(o.longitudeInterval),$o(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:ID(a)}),i+=176+o.gridNodeCount*16}return r}function ID(t){return t.map(function(e){return[$o(e.longitudeShift),$o(e.latitudeShift)]})}function PD(t,e,n){return{name:ap(t,e+8,e+16).trim(),parent:ap(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function AD(t,e,n,i){for(var r=e+176,s=16,o=[],a=0;a<n.gridNodeCount;a++){var l={latitudeShift:t.getFloat32(r+a*s,i),longitudeShift:t.getFloat32(r+a*s+4,i),latitudeAccuracy:t.getFloat32(r+a*s+8,i),longitudeAccuracy:t.getFloat32(r+a*s+12,i)};o.push(l)}return o}function Ni(t,e){if(!(this instanceof Ni))return new Ni(t);e=e||function(u){if(u)throw u};var n=sD(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var i=Ni.projections.get(n.projName);if(!i){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var r=ts(zh,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=xD(n.a,n.b,n.rf,n.ellps,n.sphere),o=vD(s.a,s.b,s.rf,n.R_A),a=CD(n.nadgrids),l=n.datum||wD(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Zx(this,n),Zx(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}Ni.projections=yD;Ni.projections.start();function OD(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Ys?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Ks?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function tM(t,e,n){var i=t.x,r=t.y,s=t.z?t.z:0,o,a,l,u;if(r<-V&&r>-1.001*V)r=-V;else if(r>V&&r<1.001*V)r=V;else{if(r<-V)return{x:-1/0,y:-1/0,z:t.z};if(r>V)return{x:1/0,y:1/0,z:t.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(r),u=Math.cos(r),l=a*a,o=n/Math.sqrt(1-e*l),{x:(o+s)*u*Math.cos(i),y:(o+s)*u*Math.sin(i),z:(o*(1-e)+s)*a}}function nM(t,e,n,i){var r=1e-12,s=r*r,o=30,a,l,u,c,h,f,g,d,p,m,_,y,v,x=t.x,E=t.y,w=t.z?t.z:0,C,S,R;if(a=Math.sqrt(x*x+E*E),l=Math.sqrt(x*x+E*E+w*w),a/n<r){if(C=0,l/n<r)return S=V,R=-i,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(E,x);u=w/l,c=a/l,h=1/Math.sqrt(1-e*(2-e)*c*c),d=c*(1-e)*h,p=u*h,v=0;do v++,g=n/Math.sqrt(1-e*p*p),R=a*d+w*p-g*(1-e*p*p),f=e*g/(g+R),h=1/Math.sqrt(1-f*(2-f)*c*c),m=c*(1-f)*h,_=u*h,y=_*d-m*p,d=m,p=_;while(y*y>s&&v<o);return S=Math.atan(_/Math.abs(m)),{x:C,y:S,z:R}}function LD(t,e,n){if(e===Ys)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Ks){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6];return{x:u*(t.x-l*t.y+a*t.z)+i,y:u*(l*t.x+t.y-o*t.z)+r,z:u*(-a*t.x+o*t.y+t.z)+s}}}function kD(t,e,n){if(e===Ys)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Ks){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],u=n[6],c=(t.x-i)/u,h=(t.y-r)/u,f=(t.z-s)/u;return{x:c+l*h-a*f,y:-l*c+h+o*f,z:a*c-o*h+f}}}function Zc(t){return t===Ys||t===Ks}function DD(t,e,n){if(OD(t,e)||t.datum_type===sp||e.datum_type===sp)return n;var i=t.a,r=t.es;if(t.datum_type===la){var s=eE(t,!1,n);if(s!==0)return;i=Yx,r=Kx}var o=e.a,a=e.b,l=e.es;if(e.datum_type===la&&(o=Yx,a=Gk,l=Kx),r===l&&i===o&&!Zc(t.datum_type)&&!Zc(e.datum_type))return n;if(n=tM(n,r,i),Zc(t.datum_type)&&(n=LD(n,t.datum_type,t.datum_params)),Zc(e.datum_type)&&(n=kD(n,e.datum_type,e.datum_params)),n=nM(n,l,o,a),e.datum_type===la){var u=eE(e,!0,n);if(u!==0)return}return n}function eE(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,g=h.ll[0]-f,d=h.ll[1]-f,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,m=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(d>i.y||g>i.x||m<i.y||p<i.x)&&(r=FD(i,e,h),!isNaN(r.x)))break e}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Pi+" "+i.y*Pi+" tried: '"+s+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function FD(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=J(r.x-Math.PI)+Math.PI;var s=tE(r,n);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o=9,a=1e-12,l,u;do{if(u=tE(s,n),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(u.x+s.x),y:r.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=J(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=t.x+s.x,i.y=t.y+s.y);return i}function tE(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},r={x:n.x-1*i.x,y:n.y-1*i.y},s={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;o=i.y*e.lim[0]+i.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var u={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var c={x:e.cvs[o][0],y:e.cvs[o][1]},h=r.x*r.y,f=r.x*(1-r.y),g=(1-r.x)*(1-r.y),d=(1-r.x)*r.y;return s.x=g*a.x+f*l.x+d*c.x+h*u.x,s.y=g*a.y+f*l.y+d*c.y+h*u.y,s}function nE(t,e,n){var i=n.x,r=n.y,s=n.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(o=i,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=r,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),t.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":n[a]!==void 0&&(u.z=o);break;case"d":n[a]!==void 0&&(u.z=-o);break;default:return null}return u}function iM(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function ND(t){iE(t.x),iE(t.y)}function iE(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function GD(t,e){return(t.datum.datum_type===Ys||t.datum.datum_type===Ks||t.datum.datum_type===la)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Ys||e.datum.datum_type===Ks||e.datum.datum_type===la)&&t.datumCode!=="WGS84"}function Of(t,e,n,i){var r;Array.isArray(n)?n=iM(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(ND(n),t.datum&&e.datum&&GD(t,e)&&(r=new Ni("WGS84"),n=Of(t,r,n,i),t=r),i&&t.axis!=="enu"&&(n=nE(t,!1,n)),t.projName==="longlat")n={x:n.x*Et,y:n.y*Et,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=DD(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Pi,y:n.y*Pi,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&e.axis!=="enu"?nE(e,!0,n):(n&&!s&&delete n.z,n)}var rE=Ni("WGS84");function d0(t,e,n,i){var r,s,o;return Array.isArray(n)?(r=Of(t,e,n,i)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(n.slice(3)):[r.x,r.y,n[2]].concat(n.slice(3)):[r.x,r.y].concat(n.slice(2)):[r.x,r.y]):(s=Of(t,e,n,i),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=n[a]}),s)}function sE(t){return t instanceof Ni?t:t.oProj?t.oProj:Ni(t)}function Mt(t,e,n){t=sE(t);var i=!1,r;return typeof e>"u"?(e=t,t=rE,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=rE,i=!0),e=sE(e),n?d0(t,e,n):(r={forward:function(s,o){return d0(t,e,s,o)},inverse:function(s,o){return d0(e,t,s,o)}},i&&(r.oProj=e),r)}var oE=6,rM="AJSAJS",sM="AFAFAF",Vo=65,rn=73,Gn=79,Ll=86,kl=90;const UD={forward:oM,inverse:zD,toPoint:aM};function oM(t,e){return e=e||5,$D(jD({lat:t[1],lon:t[0]}),e)}function zD(t){var e=S_(uM(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function aM(t){var e=S_(uM(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function g0(t){return t*(Math.PI/180)}function aE(t){return 180*(t/Math.PI)}function jD(t){var e=t.lat,n=t.lon,i=6378137,r=.00669438,s=.9996,o,a,l,u,c,h,f,g=g0(e),d=g0(n),p,m;m=Math.floor((n+180)/6)+1,n===180&&(m=60),e>=56&&e<64&&n>=3&&n<12&&(m=32),e>=72&&e<84&&(n>=0&&n<9?m=31:n>=9&&n<21?m=33:n>=21&&n<33?m=35:n>=33&&n<42&&(m=37)),o=(m-1)*6-180+3,p=g0(o),a=r/(1-r),l=i/Math.sqrt(1-r*Math.sin(g)*Math.sin(g)),u=Math.tan(g)*Math.tan(g),c=a*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(d-p),f=i*((1-r/4-3*r*r/64-5*r*r*r/256)*g-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*g)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*g)-35*r*r*r/3072*Math.sin(6*g));var _=s*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*a)*h*h*h*h*h/120)+5e5,y=s*(f+l*Math.tan(g)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*a)*h*h*h*h*h*h/720));return e<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(_),zoneNumber:m,zoneLetter:BD(e)}}function S_(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,h,f,g,d,p,m,_,y,v=n-5e5,x=e;i<"N"&&(x-=1e7),m=(r-1)*6-180+3,l=a/(1-a),p=x/s,_=p/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),y=_+(3*u/2-27*u*u*u/32)*Math.sin(2*_)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*_)+151*u*u*u/96*Math.sin(6*_),c=o/Math.sqrt(1-a*Math.sin(y)*Math.sin(y)),h=Math.tan(y)*Math.tan(y),f=l*Math.cos(y)*Math.cos(y),g=o*(1-a)/Math.pow(1-a*Math.sin(y)*Math.sin(y),1.5),d=v/(c*s);var E=y-c*Math.tan(y)/g*(d*d/2-(5+3*h+10*f-4*f*f-9*l)*d*d*d*d/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*d*d*d*d*d*d/720);E=aE(E);var w=(d-(1+2*h+f)*d*d*d/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*d*d*d*d*d/120)/Math.cos(y);w=m+aE(w);var C;if(t.accuracy){var S=S_({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:S.lat,right:S.lon,bottom:E,left:w}}else C={lat:E,lon:w};return C}function BD(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function $D(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+VD(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function VD(t,e,n){var i=lM(n),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return XD(r,s,i)}function lM(t){var e=t%oE;return e===0&&(e=oE),e}function XD(t,e,n){var i=n-1,r=rM.charCodeAt(i),s=sM.charCodeAt(i),o=r+t-1,a=s+e,l=!1;o>kl&&(o=o-kl+Vo-1,l=!0),(o===rn||r<rn&&o>rn||(o>rn||r<rn)&&l)&&o++,(o===Gn||r<Gn&&o>Gn||(o>Gn||r<Gn)&&l)&&(o++,o===rn&&o++),o>kl&&(o=o-kl+Vo-1),a>Ll?(a=a-Ll+Vo-1,l=!0):l=!1,(a===rn||s<rn&&a>rn||(a>rn||s<rn)&&l)&&a++,(a===Gn||s<Gn&&a>Gn||(a>Gn||s<Gn)&&l)&&(a++,a===rn&&a++),a>Ll&&(a=a-Ll+Vo-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function uM(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,i="",r,s=0;!/[A-Z]/.test(r=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;i+=r,s++}var o=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=lM(o),u=WD(n.charAt(0),l),c=HD(n.charAt(1),l);c<YD(a);)c+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,g=0,d=0,p,m,_,y,v;return f>0&&(p=1e5/Math.pow(10,f),m=t.substring(s,s+f),g=parseFloat(m)*p,_=t.substring(s+f),d=parseFloat(_)*p),y=g+u,v=d+c,{easting:y,northing:v,zoneLetter:a,zoneNumber:o,accuracy:p}}function WD(t,e){for(var n=rM.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(n++,n===rn&&n++,n===Gn&&n++,n>kl){if(r)throw"Bad character: "+t;n=Vo,r=!0}i+=1e5}return i}function HD(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=sM.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(n++,n===rn&&n++,n===Gn&&n++,n>Ll){if(r)throw"Bad character: "+t;n=Vo,r=!0}i+=1e5}return i}function YD(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function ba(t,e,n){if(!(this instanceof ba))return new ba(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ba.fromMGRS=function(t){return new ba(aM(t))};ba.prototype.toMGRS=function(t){return oM([this.x,this.y],t)};var KD=1,qD=.25,lE=.046875,uE=.01953125,cE=.01068115234375,ZD=.75,JD=.46875,QD=.013020833333333334,eF=.007120768229166667,tF=.3645833333333333,nF=.005696614583333333,iF=.3076171875;function C_(t){var e=[];e[0]=KD-t*(qD+t*(lE+t*(uE+t*cE))),e[1]=t*(ZD-t*(lE+t*(uE+t*cE)));var n=t*t;return e[2]=n*(JD-t*(QD+t*eF)),n*=t,e[3]=n*(tF-t*nF),e[4]=n*t*iF,e}function qa(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var rF=20;function T_(t,e,n){for(var i=1/(1-e),r=t,s=rF;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(qa(r,o,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,r-=a,Math.abs(a)<K)return r}return r}function sF(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=C_(this.es),this.ml0=qa(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function oF(t){var e=t.x,n=t.y,i=J(e-this.long0),r,s,o,a=Math.sin(n),l=Math.cos(n);if(this.es){var c=l*i,h=Math.pow(c,2),f=this.ep2*Math.pow(l,2),g=Math.pow(f,2),d=Math.abs(l)>K?Math.tan(n):0,p=Math.pow(d,2),m=Math.pow(p,2);r=1-this.es*Math.pow(a,2),c=c/Math.sqrt(r);var _=qa(n,a,l,this.en);s=this.a*(this.k0*c*(1+h/6*(1-p+f+h/20*(5-18*p+m+14*f-58*p*f+h/42*(61+179*m-m*p-479*p)))))+this.x0,o=this.a*(this.k0*(_-this.ml0+a*i*c/2*(1+h/12*(5-p+9*f+4*g+h/30*(61+m-58*p+270*f-330*p*f+h/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<K)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>K)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=s,t.y=o,t}function aF(t){var e,n,i,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=T_(e,this.es,this.en),Math.abs(n)<V){var h=Math.sin(n),f=Math.cos(n),g=Math.abs(f)>K?Math.tan(n):0,d=this.ep2*Math.pow(f,2),p=Math.pow(d,2),m=Math.pow(g,2),_=Math.pow(m,2);e=1-this.es*Math.pow(h,2);var y=s*Math.sqrt(e)/this.k0,v=Math.pow(y,2);e=e*g,i=n-e*v/(1-this.es)*.5*(1-v/12*(5+3*m-9*d*m+d-4*p-v/30*(61+90*m-252*d*m+45*_+46*d-v/56*(1385+3633*m+4095*_+1574*_*m)))),r=J(this.long0+y*(1-v/6*(1+2*m+d-v/20*(5+28*m+24*_+8*d*m+6*d-v/42*(61+662*m+1320*_+720*_*m))))/f)}else i=V*cc(o),r=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);e=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),i=Math.asin(e),o<0&&(i=-i),l===0&&c===0?r=0:r=J(Math.atan2(l,c)+this.long0)}return t.x=r,t.y=i,t}var lF=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const jh={init:sF,forward:oF,inverse:aF,names:lF};function cM(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function an(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function uF(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function cF(t){var e=Math.abs(t);return e=uF(e*(1+e/(an(1,e)+1))),t<0?-e:e}function M_(t,e){for(var n=2*Math.cos(2*e),i=t.length-1,r=t[i],s=0,o;--i>=0;)o=-s+n*r+t[i],s=r,r=o;return e+o*Math.sin(2*e)}function hF(t,e){for(var n=2*Math.cos(e),i=t.length-1,r=t[i],s=0,o;--i>=0;)o=-s+n*r+t[i],s=r,r=o;return Math.sin(e)*o}function fF(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function hM(t,e,n){for(var i=Math.sin(e),r=Math.cos(e),s=cM(n),o=fF(n),a=2*r*o,l=-2*i*s,u=t.length-1,c=t[u],h=0,f=0,g=0,d,p;--u>=0;)d=f,p=h,f=c,h=g,c=-d+a*f-l*h+t[u],g=-p+l*f+a*h;return a=i*o,l=r*s,[a*c-l*g,a*g+l*c]}function dF(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(jh.init.apply(this),this.forward=jh.forward,this.inverse=jh.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=M_(this.cbg,this.lat0);this.Zb=-this.Qn*(i+hF(this.gtu,2*i))}function gF(t){var e=J(t.x-this.long0),n=t.y;n=M_(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*r),e=Math.atan2(s*r,an(i,r*o)),e=cF(Math.tan(e));var a=hM(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,u=1/0),t.x=l,t.y=u,t}function mF(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var i,r;if(Math.abs(e)<=2.623395162778){var s=hM(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(cM(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),u=Math.cos(e);n=Math.atan2(o*u,an(l,u*a)),e=Math.atan2(l,u*a),i=J(e+this.long0),r=M_(this.cgb,n)}else i=1/0,r=1/0;return t.x=i,t.y=r,t}var pF=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Bh={init:dF,forward:gF,inverse:mF,names:pF};function yF(t,e){if(t===void 0){if(t=Math.floor((J(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var _F="etmerc";function vF(){var t=yF(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Et,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Bh.init.apply(this),this.forward=Bh.forward,this.inverse=Bh.inverse}var xF=["Universal Transverse Mercator System","utm"];const EF={init:vF,names:xF,dependsOn:_F};function R_(t,e){return Math.pow((1-t)/(1+t),e)}var wF=20;function SF(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Pe)/(Math.pow(Math.tan(.5*this.lat0+Pe),this.C)*R_(this.e*t,this.ratexp))}function CF(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Pe),this.C)*R_(this.e*Math.sin(n),this.ratexp))-V,t.x=this.C*e,t}function TF(t){for(var e=1e-14,n=t.x/this.C,i=t.y,r=Math.pow(Math.tan(.5*i+Pe)/this.K,1/this.C),s=wF;s>0&&(i=2*Math.atan(r*R_(this.e*Math.sin(t.y),-.5*this.e))-V,!(Math.abs(i-t.y)<e));--s)t.y=i;return s?(t.x=n,t.y=i,t):null}var MF=["gauss"];const b_={init:SF,forward:CF,inverse:TF,names:MF};function RF(){b_.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function bF(t){var e,n,i,r;return t.x=J(t.x-this.long0),b_.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function IF(t){var e,n,i,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=an(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),i=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,b_.inverse.apply(this,[t]),t.x=J(t.x+this.long0),t}var PF=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const AF={init:RF,forward:bF,inverse:IF,names:PF};function OF(t,e,n){return e*=n,Math.tan(.5*(V+t))*Math.pow((1-e)/(1+e),.5*n)}function LF(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=K&&(this.k0=.5*(1+cc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=K&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=K&&Math.abs(Math.cos(this.lat_ts))>K&&(this.k0=.5*this.cons*ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ai(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ji(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-V,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function kF(t){var e=t.x,n=t.y,i=Math.sin(n),r=Math.cos(n),s,o,a,l,u,c,h=J(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=K&&Math.abs(n+this.lat0)<=K?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(h)),t.x=this.a*s*r*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*i-this.sinlat0*r*Math.cos(h))+this.y0,t):(o=2*Math.atan(this.ssfn_(n,i,this.e))-V,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=K?(u=ai(this.e,n*this.con,this.con*i),c=2*this.a*this.k0*u/this.cons,t.x=this.x0+c*Math.sin(e-this.long0),t.y=this.y0-this.con*c*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<K?(s=2*this.a*this.k0/(1+l*Math.cos(h)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),t.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),t.x=s*l*Math.sin(h)+this.x0,t))}function DF(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=K?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<K?this.lat0>0?e=J(this.long0+Math.atan2(t.x,-1*t.y)):e=J(this.long0+Math.atan2(t.x,t.y)):e=J(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=K){if(o<=K)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),n=this.con*Ou(this.e,i),e=this.con*J(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=K?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=J(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*Ou(this.e,Math.tan(.5*(V+s)));return t.x=e,t.y=n,t}var FF=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const NF={init:LF,forward:kF,inverse:DF,names:FF,ssfn_:OF};function GF(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*u}function UF(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function zF(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t}var jF=["somerc"];const BF={init:GF,forward:UF,inverse:zF,names:jF};var So=1e-7;function $F(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function VF(){var t,e,n,i,r,s,o,a,l,u,c=0,h,f=0,g=0,d=0,p=0,m=0,_=0;this.no_off=$F(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),y&&(_=this.alpha),v&&(c=this.rectified_grid_angle*Et),y||v)f=this.longc;else if(g=this.long1,p=this.lat1,d=this.long2,m=this.lat2,Math.abs(p-m)<=So||(t=Math.abs(p))<=So||Math.abs(t-V)<=So||Math.abs(Math.abs(this.lat0)-V)<=So||Math.abs(Math.abs(m)-V)<=So)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>K?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,i=this.B*e/(n*Math.sqrt(t)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(ai(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),y||v?(y?(h=Math.asin(Math.sin(_)/i),v||(c=_)):(h=c,_=Math.asin(i*Math.sin(h))),this.lam0=f-Math.asin(.5*(r-1/r)*Math.tan(h))/this.B):(s=Math.pow(ai(this.e,p,Math.sin(p)),this.B),o=Math.pow(ai(this.e,m,Math.sin(m)),this.B),r=this.E/s,l=(o-s)/(o+s),u=this.E*this.E,u=(u-o*s)/(u+o*s),t=g-d,t<-Math.pi?d-=Pu:t>Math.pi&&(d+=Pu),this.lam0=J(.5*(g+d)-Math.atan(u*Math.tan(.5*this.B*(g-d))/l)/this.B),h=Math.atan(2*Math.sin(this.B*J(g-this.lam0))/(r-1/r)),c=_=Math.asin(i*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Pe-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Pe+r))}function XF(t){var e={},n,i,r,s,o,a,l,u;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-V)>K){if(o=this.E/Math.pow(ai(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),i=.5*(o+a),s=Math.sin(this.B*t.x),r=(n*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(r)-1)<K)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),Math.abs(a)<So?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function WF(t){var e,n,i,r,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),r=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<K)l.x=0,l.y=a<0?-V:V;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Ou(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var HF=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const YF={init:VF,forward:XF,inverse:WF,names:HF};function KF(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<K)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=ji(this.e,e,n),r=ai(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=ji(this.e,s,o),l=ai(this.e,this.lat2,s),u=ai(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>K?this.ns=Math.log(i/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function qF(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=K&&(n=cc(n)*(V-2*K));var i=Math.abs(Math.abs(n)-V),r,s;if(i>K)r=ai(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(i=n*this.ns,i<=0)return null;s=0}var o=this.ns*J(e-this.long0);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t}function ZF(t){var e,n,i,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),r=Ou(this.e,i),r===-9999)return null}else r=-V;return s=J(l/this.ns+this.long0),t.x=s,t.y=r,t}var JF=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const QF={init:KF,forward:qF,inverse:ZF,names:JF};function e5(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function t5(t){var e,n,i,r,s,o,a,l=t.x,u=t.y,c=J(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function n5(t){var e,n,i,r,s,o,a,l,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var c=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,c+=1;while(l===0&&c<15);return c>=15?null:t}var i5=["Krovak","krovak"];const r5={init:e5,forward:t5,inverse:n5,names:i5};function Yt(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function hc(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function fc(t){return .375*t*(1+.25*t*(1+.46875*t))}function dc(t){return .05859375*t*t*(1+.75*t)}function gc(t){return t*t*t*(35/3072)}function Ia(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function _s(t){return Math.abs(t)<V?t:t-cc(t)*Math.PI}function Lf(t,e,n,i,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function s5(){this.sphere||(this.e0=hc(this.es),this.e1=fc(this.es),this.e2=dc(this.es),this.e3=gc(this.es),this.ml0=this.a*Yt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function o5(t){var e,n,i=t.x,r=t.y;if(i=J(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=Ia(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),u=i*Math.cos(r),c=u*u,h=this.es*o*o/(1-this.es),f=this.a*Yt(this.e0,this.e1,this.e2,this.e3,r);e=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),n=f-this.ml0+a*s/o*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function a5(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,i,r;if(this.sphere){var s=n+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+n,a=Lf(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-V)<=K)return t.x=this.long0,t.y=V,n<0&&(t.y*=-1),t;var l=Ia(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=e*this.a/l,f=h*h;i=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),r=h*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return t.x=J(r+this.long0),t.y=_s(i),t}var l5=["Cassini","Cassini_Soldner","cass"];const u5={init:s5,forward:o5,inverse:a5,names:l5};function Zr(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var c5=1,h5=2,f5=3,d5=4;function g5(){var t=Math.abs(this.lat0);if(Math.abs(t-V)<K?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<K?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Zr(this.e,1),this.mmf=.5/(1-this.es),this.apa=S5(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Zr(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function m5(t){var e,n,i,r,s,o,a,l,u,c,h=t.x,f=t.y;if(h=J(h-this.long0),this.sphere){if(s=Math.sin(f),c=Math.cos(f),i=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+c*i:1+this.sinph0*s+this.cosph0*c*i,n<=K)return null;n=Math.sqrt(2/n),e=n*c*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<K)return null;n=Pe-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(h),r=Math.sin(h),s=Math.sin(f),o=Zr(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=V+f,o=this.qp-o;break;case this.S_POLE:u=f-V,o=this.qp+o;break}if(Math.abs(u)<K)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?n=this.ymf*u*(this.cosb1*a-this.sinb1*l*i):n=(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*u*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(u=Math.sqrt(o))*r,n=i*(this.mode===this.S_POLE?u:-u)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function p5(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,i,r,s,o,a,l,u;if(this.sphere){var c=0,h,f=0;if(h=Math.sqrt(e*e+n*n),r=h*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(r),c=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=K?0:Math.asin(n*f/h),e*=f,n=c*h;break;case this.OBLIQ:r=Math.abs(h)<=K?this.lat0:Math.asin(c*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(c-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:n=-n,r=V-r;break;case this.S_POLE:r-=V;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<K)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+n*o*this.cosb1/l,a=this.qp*u,n=l*this.cosb1*s-n*this.sinb1*o):(u=n*o/l,a=this.qp*u,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(e,n),r=C5(Math.asin(u),this.apa)}return t.x=J(this.long0+i),t.y=r,t}var y5=.3333333333333333,_5=.17222222222222222,v5=.10257936507936508,x5=.06388888888888888,E5=.0664021164021164,w5=.016415012942191543;function S5(t){var e,n=[];return n[0]=t*y5,e=t*t,n[0]+=e*_5,n[1]=e*x5,e*=t,n[0]+=e*v5,n[1]+=e*E5,n[2]=e*w5,n}function C5(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var T5=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const M5={init:g5,forward:m5,inverse:p5,names:T5,S_POLE:c5,N_POLE:h5,EQUIT:f5,OBLIQ:d5};function ns(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function R5(){Math.abs(this.lat1+this.lat2)<K||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ji(this.e3,this.sin_po,this.cos_po),this.qs1=Zr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ji(this.e3,this.sin_po,this.cos_po),this.qs2=Zr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zr(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>K?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function b5(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Zr(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*J(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function I5(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,e!==0&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=J(r/this.ns0+this.long0),t.x=s,t.y=o,t}function P5(t,e){var n,i,r,s,o,a=ns(.5*e);if(t<K)return a;for(var l=t*t,u=1;u<=25;u++)if(n=Math.sin(a),i=Math.cos(a),r=t*n,s=1-r*r,o=.5*s*s/i*(e/(1-l)-n/s+.5/t*Math.log((1-r)/(1+r))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var A5=["Albers_Conic_Equal_Area","Albers","aea"];const O5={init:R5,forward:b5,inverse:I5,names:A5,phi1z:P5};function L5(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function k5(t){var e,n,i,r,s,o,a,l,u=t.x,c=t.y;return i=J(u-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*r,s=1,o>0||Math.abs(o)<=K?(a=this.x0+this.a*s*n*Math.sin(i)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*r)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t}function D5(t){var e,n,i,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),i=Math.cos(r),o=ns(i*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),s=J(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var F5=["gnom"];const N5={init:L5,forward:k5,inverse:D5,names:F5};function G5(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*V:V;for(var i=Math.asin(.5*e),r,s,o,a,l=0;l<30;l++)if(s=Math.sin(i),o=Math.cos(i),a=t*s,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function U5(){this.sphere||(this.k0=ji(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function z5(t){var e=t.x,n=t.y,i,r,s=J(e-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Zr(this.e,Math.sin(n));i=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return t.x=i,t.y=r,t}function j5(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=J(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=G5(this.e,2*t.y*this.k0/this.a),e=J(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var B5=["cea"];const $5={init:U5,forward:z5,inverse:j5,names:B5};function V5(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function X5(t){var e=t.x,n=t.y,i=J(e-this.long0),r=_s(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t}function W5(t){var e=t.x,n=t.y;return t.x=J(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=_s(this.lat0+(n-this.y0)/this.a),t}var H5=["Equirectangular","Equidistant_Cylindrical","eqc"];const Y5={init:V5,forward:X5,inverse:W5,names:H5};var hE=20;function K5(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hc(this.es),this.e1=fc(this.es),this.e2=dc(this.es),this.e3=gc(this.es),this.ml0=this.a*Yt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function q5(t){var e=t.x,n=t.y,i,r,s,o=J(e-this.long0);if(s=o*Math.sin(n),this.sphere)Math.abs(n)<=K?(i=this.a*o,r=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(n),r=this.a*(_s(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=K)i=this.a*o,r=-1*this.ml0;else{var a=Ia(this.a,this.e,Math.sin(n))/Math.tan(n);i=a*Math.sin(s),r=this.a*Yt(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(s))}return t.x=i+this.x0,t.y=r+this.y0,t}function Z5(t){var e,n,i,r,s,o,a,l,u;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=K)e=J(i/this.a+this.long0),n=0;else{o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,l=o;var c;for(s=hE;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=K){n=l;break}e=J(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=K)n=0,e=J(this.long0+i/this.a);else{o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,l=o;var h,f,g,d,p;for(s=hE;s;--s)if(p=this.e*Math.sin(l),h=Math.sqrt(1-p*p)*Math.tan(l),f=this.a*Yt(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),d=f/this.a,u=(o*(h*d+1)-d-.5*h*(d*d+a))/(this.es*Math.sin(2*l)*(d*d+a-2*o*d)/(4*h)+(o-d)*(h*g-2/Math.sin(2*l))-g),l-=u,Math.abs(u)<=K){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=J(this.long0+Math.asin(i*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var J5=["Polyconic","poly"];const Q5={init:K5,forward:q5,inverse:Z5,names:J5};function eN(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function tN(t){var e,n=t.x,i=t.y,r=i-this.lat0,s=n-this.long0,o=r/Ql*1e-5,a=s,l=1,u=0;for(e=1;e<=10;e++)l=l*o,u=u+this.A[e]*l;var c=u,h=a,f=1,g=0,d,p,m=0,_=0;for(e=1;e<=6;e++)d=f*c-g*h,p=g*c+f*h,f=d,g=p,m=m+this.B_re[e]*f-this.B_im[e]*g,_=_+this.B_im[e]*f+this.B_re[e]*g;return t.x=_*this.a+this.x0,t.y=m*this.a+this.y0,t}function nN(t){var e,n=t.x,i=t.y,r=n-this.x0,s=i-this.y0,o=s/this.a,a=r/this.a,l=1,u=0,c,h,f=0,g=0;for(e=1;e<=6;e++)c=l*o-u*a,h=u*o+l*a,l=c,u=h,f=f+this.C_re[e]*l-this.C_im[e]*u,g=g+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var p=f,m=g,_,y,v=o,x=a;for(e=2;e<=6;e++)_=p*f-m*g,y=m*f+p*g,p=_,m=y,v=v+(e-1)*(this.B_re[e]*p-this.B_im[e]*m),x=x+(e-1)*(this.B_im[e]*p+this.B_re[e]*m);p=1,m=0;var E=this.B_re[1],w=this.B_im[1];for(e=2;e<=6;e++)_=p*f-m*g,y=m*f+p*g,p=_,m=y,E=E+e*(this.B_re[e]*p-this.B_im[e]*m),w=w+e*(this.B_im[e]*p+this.B_re[e]*m);var C=E*E+w*w;f=(v*E+x*w)/C,g=(x*E-v*w)/C}var S=f,R=g,M=1,k=0;for(e=1;e<=9;e++)M=M*S,k=k+this.D[e]*M;var A=this.lat0+k*Ql*1e5,U=this.long0+R;return t.x=U,t.y=A,t}var iN=["New_Zealand_Map_Grid","nzmg"];const rN={init:eN,forward:tN,inverse:nN,names:iN};function sN(){}function oN(t){var e=t.x,n=t.y,i=J(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=s,t}function aN(t){t.x-=this.x0,t.y-=this.y0;var e=J(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var lN=["Miller_Cylindrical","mill"];const uN={init:sN,forward:oN,inverse:aN,names:lN};var cN=20;function hN(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=C_(this.es)}function fN(t){var e,n,i=t.x,r=t.y;if(i=J(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),o=cN;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<K)break}e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var l=Math.sin(r),u=Math.cos(r);n=this.a*qa(r,l,u,this.en),e=this.a*i*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function dN(t){var e,n,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=ns((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ns(Math.sin(e)/this.n)),i=J(i+this.long0),e=_s(e)):(e=T_(t.y/this.a,this.es,this.en),r=Math.abs(e),r<V?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=J(n)):r-K<V&&(i=this.long0)),t.x=i,t.y=e,t}var gN=["Sinusoidal","sinu"];const mN={init:hN,forward:fN,inverse:dN,names:gN};function pN(){}function yN(t){for(var e=t.x,n=t.y,i=J(e-this.long0),r=n,s=Math.PI*Math.sin(n);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<K)break}r/=2,Math.PI/2-Math.abs(n)<K&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=l,t}function _N(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=J(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t}var vN=["Mollweide","moll"];const xN={init:pN,forward:yN,inverse:_N,names:vN};function EN(){Math.abs(this.lat1+this.lat2)<K||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hc(this.es),this.e1=fc(this.es),this.e2=dc(this.es),this.e3=gc(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ji(this.e,this.sinphi,this.cosphi),this.ml1=Yt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<K?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ji(this.e,this.sinphi,this.cosphi),this.ml2=Yt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Yt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function wN(t){var e=t.x,n=t.y,i;if(this.sphere)i=this.a*(this.g-n);else{var r=Yt(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-r)}var s=this.ns*J(e-this.long0),o=this.x0+i*Math.sin(s),a=this.y0+this.rh-i*Math.cos(s);return t.x=o,t.y=a,t}function SN(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,r;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=J(this.long0+s/this.ns),i=_s(this.g-n/this.a),t.x=r,t.y=i,t;var o=this.g-n/this.a;return i=Lf(o,this.e0,this.e1,this.e2,this.e3),r=J(this.long0+s/this.ns),t.x=r,t.y=i,t}var CN=["Equidistant_Conic","eqdc"];const TN={init:EN,forward:wN,inverse:SN,names:CN};function MN(){this.R=this.a}function RN(t){var e=t.x,n=t.y,i=J(e-this.long0),r,s;Math.abs(n)<=K&&(r=this.x0+this.R*i,s=this.y0);var o=ns(2*Math.abs(n/Math.PI));(Math.abs(i)<=K||Math.abs(Math.abs(n)-V)<=K)&&(r=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),f=h*h,g=h*(2/u-1),d=g*g,p=Math.PI*this.R*(a*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(f-d)))/(d+l);i<0&&(p=-p),r=this.x0+p;var m=l+h;return p=Math.PI*this.R*(g*m-a*Math.sqrt((d+l)*(l+1)-m*m))/(d+l),n>=0?s=this.y0+p:s=this.y0-p,t.x=r,t.y=s,t}function bN(t){var e,n,i,r,s,o,a,l,u,c,h,f,g;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,i=t.x/h,r=t.y/h,s=i*i+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+i*i,l=-2*o+1+2*r*r+s*s,g=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),h=3*g/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:n=-(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<K?e=this.long0:e=J(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),t.x=e,t.y=n,t}var IN=["Van_der_Grinten_I","VanDerGrinten","vandg"];const PN={init:MN,forward:RN,inverse:bN,names:IN};function AN(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function ON(t){var e=t.x,n=t.y,i=Math.sin(t.y),r=Math.cos(t.y),s=J(e-this.long0),o,a,l,u,c,h,f,g,d,p,m,_,y,v,x,E,w,C,S,R,M,k,A;return this.sphere?Math.abs(this.sin_p12-1)<=K?(t.x=this.x0+this.a*(V-n)*Math.sin(s),t.y=this.y0-this.a*(V-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=K?(t.x=this.x0+this.a*(V+n)*Math.sin(s),t.y=this.y0+this.a*(V+n)*Math.cos(s),t):(C=this.sin_p12*i+this.cos_p12*r*Math.cos(s),E=Math.acos(C),w=E?E/Math.sin(E):1,t.x=this.x0+this.a*w*r*Math.sin(s),t.y=this.y0+this.a*w*(this.cos_p12*i-this.sin_p12*r*Math.cos(s)),t):(o=hc(this.es),a=fc(this.es),l=dc(this.es),u=gc(this.es),Math.abs(this.sin_p12-1)<=K?(c=this.a*Yt(o,a,l,u,V),h=this.a*Yt(o,a,l,u,n),t.x=this.x0+(c-h)*Math.sin(s),t.y=this.y0-(c-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=K?(c=this.a*Yt(o,a,l,u,V),h=this.a*Yt(o,a,l,u,n),t.x=this.x0+(c+h)*Math.sin(s),t.y=this.y0+(c+h)*Math.cos(s),t):(f=i/r,g=Ia(this.a,this.e,this.sin_p12),d=Ia(this.a,this.e,i),p=Math.atan((1-this.es)*f+this.es*g*this.sin_p12/(d*r)),m=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(s)),m===0?S=Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(m)-Math.PI)<=K?S=-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):S=Math.asin(Math.sin(s)*Math.cos(p)/Math.sin(m)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),v=_*y,x=y*y,R=S*S,M=R*S,k=M*S,A=k*S,E=g*S*(1-R*x*(1-x)/6+M/8*v*(1-2*x)+k/120*(x*(4-7*x)-3*_*_*(1-7*x))-A/48*v),t.x=this.x0+E*Math.sin(m),t.y=this.y0+E*Math.cos(m),t))}function LN(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o,a,l,u,c,h,f,g,d,p,m,_,y,v,x,E,w,C,S;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*V*this.a?void 0:(n=e/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=K?o=this.lat0:(o=ns(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-V,Math.abs(a)<=K?this.lat0>=0?s=J(this.long0+Math.atan2(t.x,-t.y)):s=J(this.long0-Math.atan2(-t.x,t.y)):s=J(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=s,t.y=o,t)):(l=hc(this.es),u=fc(this.es),c=dc(this.es),h=gc(this.es),Math.abs(this.sin_p12-1)<=K?(f=this.a*Yt(l,u,c,h,V),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f-e,o=Lf(g/this.a,l,u,c,h),s=J(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=K?(f=this.a*Yt(l,u,c,h,V),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-f,o=Lf(g/this.a,l,u,c,h),s=J(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),d=Ia(this.a,this.e,this.sin_p12),_=Math.cos(m),y=this.e*this.cos_p12*_,v=-y*y/(1-this.es),x=3*this.es*(1-v)*this.sin_p12*this.cos_p12*_/(1-this.es),E=e/d,w=E-v*(1+v)*Math.pow(E,3)/6-x*(1+3*v)*Math.pow(E,4)/24,C=1-v*w*w/2-E*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*_),s=J(this.long0+Math.asin(Math.sin(m)*Math.sin(w)/Math.cos(p))),S=Math.sin(p),o=Math.atan2((S-this.es*C*this.sin_p12)*Math.tan(p),S*(1-this.es)),t.x=s,t.y=o,t))}var kN=["Azimuthal_Equidistant","aeqd"];const DN={init:AN,forward:ON,inverse:LN,names:kN};function FN(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function NN(t){var e,n,i,r,s,o,a,l,u=t.x,c=t.y;return i=J(u-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*r,s=1,(o>0||Math.abs(o)<=K)&&(a=this.a*s*n*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t}function GN(t){var e,n,i,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=ns(e/this.a),i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=K?(a=this.lat0,t.x=o,t.y=a,t):(a=ns(r*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-V,Math.abs(s)<=K?(this.lat0>=0?o=J(this.long0+Math.atan2(t.x,-t.y)):o=J(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=J(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=o,t.y=a,t))}var UN=["ortho"];const zN={init:FN,forward:NN,inverse:GN,names:UN};var Ve={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ae={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function jN(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=V-Pe/2?this.face=Ve.TOP:this.lat0<=-(V-Pe/2)?this.face=Ve.BOTTOM:Math.abs(this.long0)<=Pe?this.face=Ve.FRONT:Math.abs(this.long0)<=V+Pe?this.face=this.long0>0?Ve.RIGHT:Ve.LEFT:this.face=Ve.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function BN(t){var e={x:0,y:0},n,i,r,s,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,i=t.x,this.face===Ve.TOP)s=V-n,i>=Pe&&i<=V+Pe?(l.value=Ae.AREA_0,r=i-V):i>V+Pe||i<=-(V+Pe)?(l.value=Ae.AREA_1,r=i>0?i-Je:i+Je):i>-(V+Pe)&&i<=-Pe?(l.value=Ae.AREA_2,r=i+V):(l.value=Ae.AREA_3,r=i);else if(this.face===Ve.BOTTOM)s=V+n,i>=Pe&&i<=V+Pe?(l.value=Ae.AREA_0,r=-i+V):i<Pe&&i>=-Pe?(l.value=Ae.AREA_1,r=-i):i<-Pe&&i>=-(V+Pe)?(l.value=Ae.AREA_2,r=-i-V):(l.value=Ae.AREA_3,r=i>0?-i+Je:-i-Je);else{var u,c,h,f,g,d,p;this.face===Ve.RIGHT?i=ua(i,+V):this.face===Ve.BACK?i=ua(i,+Je):this.face===Ve.LEFT&&(i=ua(i,-V)),f=Math.sin(n),g=Math.cos(n),d=Math.sin(i),p=Math.cos(i),u=g*p,c=g*d,h=f,this.face===Ve.FRONT?(s=Math.acos(u),r=Jc(s,h,c,l)):this.face===Ve.RIGHT?(s=Math.acos(c),r=Jc(s,h,-u,l)):this.face===Ve.BACK?(s=Math.acos(-u),r=Jc(s,h,-c,l)):this.face===Ve.LEFT?(s=Math.acos(-c),r=Jc(s,h,u,l)):(s=r=0,l.value=Ae.AREA_0)}return a=Math.atan(12/Je*(r+Math.acos(Math.sin(r)*Math.cos(Pe))-V)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Ae.AREA_1?a+=V:l.value===Ae.AREA_2?a+=Je:l.value===Ae.AREA_3&&(a+=1.5*Je),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function $N(t){var e={lam:0,phi:0},n,i,r,s,o,a,l,u,c,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=Ae.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=Ae.AREA_1,n-=V):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=Ae.AREA_2,n=n<0?n+Je:n-Je):(h.value=Ae.AREA_3,n+=V),c=Je/12*Math.tan(n),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(n),s=Math.tan(i),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Ve.TOP)u=Math.acos(l),e.phi=V-u,h.value===Ae.AREA_0?e.lam=a+V:h.value===Ae.AREA_1?e.lam=a<0?a+Je:a-Je:h.value===Ae.AREA_2?e.lam=a-V:e.lam=a;else if(this.face===Ve.BOTTOM)u=Math.acos(l),e.phi=u-V,h.value===Ae.AREA_0?e.lam=-a+V:h.value===Ae.AREA_1?e.lam=-a:h.value===Ae.AREA_2?e.lam=-a-V:e.lam=a<0?-a-Je:-a+Je;else{var f,g,d;f=l,c=f*f,c>=1?d=0:d=Math.sqrt(1-c)*Math.sin(a),c+=d*d,c>=1?g=0:g=Math.sqrt(1-c),h.value===Ae.AREA_1?(c=g,g=-d,d=c):h.value===Ae.AREA_2?(g=-g,d=-d):h.value===Ae.AREA_3&&(c=g,g=d,d=-c),this.face===Ve.RIGHT?(c=f,f=-g,g=c):this.face===Ve.BACK?(f=-f,g=-g):this.face===Ve.LEFT&&(c=f,f=g,g=-c),e.phi=Math.acos(-d)-V,e.lam=Math.atan2(g,f),this.face===Ve.RIGHT?e.lam=ua(e.lam,-V):this.face===Ve.BACK?e.lam=ua(e.lam,-Je):this.face===Ve.LEFT&&(e.lam=ua(e.lam,+V))}if(this.es!==0){var p,m,_;p=e.phi<0?1:0,m=Math.tan(e.phi),_=this.b/Math.sqrt(m*m+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),p&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Jc(t,e,n,i){var r;return t<K?(i.value=Ae.AREA_0,r=0):(r=Math.atan2(e,n),Math.abs(r)<=Pe?i.value=Ae.AREA_0:r>Pe&&r<=V+Pe?(i.value=Ae.AREA_1,r-=V):r>V+Pe||r<=-(V+Pe)?(i.value=Ae.AREA_2,r=r>=0?r-Je:r+Je):(i.value=Ae.AREA_3,r+=V)),r}function ua(t,e){var n=t+e;return n<-Je?n+=Pu:n>+Je&&(n-=Pu),n}var VN=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const XN={init:jN,forward:BN,inverse:$N,names:VN};var lp=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Dl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],fM=.8487,dM=1.3523,gM=Pi/5,WN=1/gM,Xo=18,kf=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},HN=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function YN(t,e,n,i){for(var r=e;i;--i){var s=t(r);if(r-=s,Math.abs(s)<n)break}return r}function KN(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function qN(t){var e=J(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*gM);i<0?i=0:i>=Xo&&(i=Xo-1),n=Pi*(n-WN*i);var r={x:kf(lp[i],n)*e,y:kf(Dl[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*fM+this.x0,r.y=r.y*this.a*dM+this.y0,r}function ZN(t){var e={x:(t.x-this.x0)/(this.a*fM),y:Math.abs(t.y-this.y0)/(this.a*dM)};if(e.y>=1)e.x/=lp[Xo][0],e.y=t.y<0?-V:V;else{var n=Math.floor(e.y*Xo);for(n<0?n=0:n>=Xo&&(n=Xo-1);;)if(Dl[n][0]>e.y)--n;else if(Dl[n+1][0]<=e.y)++n;else break;var i=Dl[n],r=5*(e.y-i[0])/(Dl[n+1][0]-i[0]);r=YN(function(s){return(kf(i,s)-e.y)/HN(i,s)},r,K,100),e.x/=kf(lp[n],r),e.y=(5*n+r)*Et,t.y<0&&(e.y=-e.y)}return e.x=J(e.x+this.long0),e}var JN=["Robinson","robin"];const QN={init:KN,forward:qN,inverse:ZN,names:JN};function e4(){this.name="geocent"}function t4(t){var e=tM(t,this.es,this.a);return e}function n4(t){var e=nM(t,this.es,this.a,this.b);return e}var i4=["Geocentric","geocentric","geocent","Geocent"];const r4={init:e4,forward:t4,inverse:n4,names:i4};var kt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},El={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function s4(){if(Object.keys(El).forEach((function(n){if(typeof this[n]>"u")this[n]=El[n].def;else{if(El[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);El[n].num&&(this[n]=parseFloat(this[n]))}El[n].degrees&&(this[n]=this[n]*Et)}).bind(this)),Math.abs(Math.abs(this.lat0)-V)<K?this.mode=this.lat0<0?kt.S_POLE:kt.N_POLE:Math.abs(this.lat0)<K?this.mode=kt.EQUIT:(this.mode=kt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function o4(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r,s;switch(this.mode){case kt.OBLIQ:s=this.sinph0*e+this.cosph0*n*i;break;case kt.EQUIT:s=n*i;break;case kt.S_POLE:s=-e;break;case kt.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*n*Math.sin(t.x),this.mode){case kt.OBLIQ:s*=this.cosph0*e-this.sinph0*n*i;break;case kt.EQUIT:s*=e;break;case kt.N_POLE:s*=-(n*i);break;case kt.S_POLE:s*=n*i;break}var o,a;return o=s*this.cg+r*this.sg,a=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*a,s=o*a,t.x=r*this.a,t.y=s*this.a,t}function a4(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,i,r;r=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*r,i=this.pn1*t.y*this.cw*r,t.x=n*this.cg+i*this.sg,t.y=i*this.cg-n*this.sg;var s=an(t.x,t.y);if(Math.abs(s)<K)e.x=0,e.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case kt.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case kt.EQUIT:e.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case kt.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case kt.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var l4=["Tilted_Perspective","tpers"];const u4={init:s4,forward:o4,inverse:a4,names:l4};function c4(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function h4(t){var e=t.x,n=t.y,i,r,s,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/an(this.radius_p*Math.cos(n),Math.sin(n));if(r=a*Math.cos(e)*Math.cos(n),s=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-r)*r-s*s-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/an(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(s/i),t.y=this.radius_g_1*Math.atan(o/an(s,i)))}else this.shape==="sphere"&&(i=Math.cos(n),r=Math.cos(e)*i,s=Math.sin(e)*i,o=Math.sin(n),i=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/an(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(s/i),t.y=this.radius_g_1*Math.atan(o/an(s,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function f4(t){var e=-1,n=0,i=0,r,s,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*an(1,i)):(n=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*an(1,n));var l=i/this.radius_p;if(r=n*n+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,n*=a,i*=a,t.x=Math.atan2(n,e),t.y=Math.atan(i*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),r=n*n+i*i+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,n*=a,i*=a,t.x=Math.atan2(n,e),t.y=Math.atan(i*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var d4=["Geostationary Satellite View","Geostationary_Satellite","geos"];const g4={init:c4,forward:h4,inverse:f4,names:d4};var eu=1.340264,tu=-.081106,nu=893e-6,iu=.003796,Df=Math.sqrt(3)/2;function m4(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function p4(t){var e=J(t.x-this.long0),n=t.y,i=Math.asin(Df*Math.sin(n)),r=i*i,s=r*r*r;return t.x=e*Math.cos(i)/(Df*(eu+3*tu*r+s*(7*nu+9*iu*r))),t.y=i*(eu+tu*r+s*(nu+iu*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function y4(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,i=t.y,r,s,o,a,l,u;for(u=0;u<n&&(r=i*i,s=r*r*r,o=i*(eu+tu*r+s*(nu+iu*r))-t.y,a=eu+3*tu*r+s*(7*nu+9*iu*r),i-=l=o/a,!(Math.abs(l)<e));++u);return r=i*i,s=r*r*r,t.x=Df*t.x*(eu+3*tu*r+s*(7*nu+9*iu*r))/Math.cos(i),t.y=Math.asin(Math.sin(i)/Df),t.x=J(t.x+this.long0),t}var _4=["eqearth","Equal Earth","Equal_Earth"];const v4={init:m4,forward:p4,inverse:y4,names:_4};var Lu=1e-10;function x4(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Lu)throw new Error;this.es?(this.en=C_(this.es),this.m1=qa(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=w4,this.forward=E4):(Math.abs(this.phi1)+Lu>=V?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=C4,this.forward=S4)}function E4(t){var e=J(t.x-(this.long0||0)),n=t.y,i,r,s;return i=this.am1+this.m1-qa(n,r=Math.sin(n),s=Math.cos(n),this.en),r=s*e/(i*Math.sqrt(1-this.es*r*r)),t.x=i*Math.sin(r),t.y=this.am1-i*Math.cos(r),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function w4(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,i,r;if(n=an(t.x,t.y=this.am1-t.y),r=T_(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(r))<V)e=Math.sin(r),i=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else if(Math.abs(e-V)<=Lu)i=0;else throw new Error;return t.x=J(i+(this.long0||0)),t.y=_s(r),t}function S4(t){var e=J(t.x-(this.long0||0)),n=t.y,i,r;return r=this.cphi1+this.phi1-n,Math.abs(r)>Lu?(t.x=r*Math.sin(i=e*Math.cos(n)/r),t.y=this.cphi1-r*Math.cos(i)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function C4(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,i=an(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>V)throw new Error;return Math.abs(Math.abs(n)-V)<=Lu?e=0:e=i*Math.atan2(t.x,t.y)/Math.cos(n),t.x=J(e+(this.long0||0)),t.y=_s(n),t}var T4=["bonne","Bonne (Werner lat_1=90)"];const M4={init:x4,names:T4};function R4(t){t.Proj.projections.add(jh),t.Proj.projections.add(Bh),t.Proj.projections.add(EF),t.Proj.projections.add(AF),t.Proj.projections.add(NF),t.Proj.projections.add(BF),t.Proj.projections.add(YF),t.Proj.projections.add(QF),t.Proj.projections.add(r5),t.Proj.projections.add(u5),t.Proj.projections.add(M5),t.Proj.projections.add(O5),t.Proj.projections.add(N5),t.Proj.projections.add($5),t.Proj.projections.add(Y5),t.Proj.projections.add(Q5),t.Proj.projections.add(rN),t.Proj.projections.add(uN),t.Proj.projections.add(mN),t.Proj.projections.add(xN),t.Proj.projections.add(TN),t.Proj.projections.add(PN),t.Proj.projections.add(DN),t.Proj.projections.add(zN),t.Proj.projections.add(XN),t.Proj.projections.add(QN),t.Proj.projections.add(r4),t.Proj.projections.add(u4),t.Proj.projections.add(g4),t.Proj.projections.add(v4),t.Proj.projections.add(M4)}Mt.defaultDatum="WGS84";Mt.Proj=Ni;Mt.WGS84=new Mt.Proj("WGS84");Mt.Point=ba;Mt.toPoint=iM;Mt.defs=Vt;Mt.nadgrid=SD;Mt.transform=Of;Mt.mgrs=UD;Mt.version="__VERSION__";R4(Mt);function mM(t,e){return function(){return t.apply(e,arguments)}}const{toString:b4}=Object.prototype,{getPrototypeOf:I_}=Object,Dd=(t=>e=>{const n=b4.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),fi=t=>(t=t.toLowerCase(),e=>Dd(e)===t),Fd=t=>e=>typeof e===t,{isArray:Za}=Array,ku=Fd("undefined");function I4(t){return t!==null&&!ku(t)&&t.constructor!==null&&!ku(t.constructor)&&Mn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const pM=fi("ArrayBuffer");function P4(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&pM(t.buffer),e}const A4=Fd("string"),Mn=Fd("function"),yM=Fd("number"),Nd=t=>t!==null&&typeof t=="object",O4=t=>t===!0||t===!1,$h=t=>{if(Dd(t)!=="object")return!1;const e=I_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},L4=fi("Date"),k4=fi("File"),D4=fi("Blob"),F4=fi("FileList"),N4=t=>Nd(t)&&Mn(t.pipe),G4=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mn(t.append)&&((e=Dd(t))==="formdata"||e==="object"&&Mn(t.toString)&&t.toString()==="[object FormData]"))},U4=fi("URLSearchParams"),[z4,j4,B4,$4]=["ReadableStream","Request","Response","Headers"].map(fi),V4=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Za(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(i=0;i<o;i++)a=s[i],e.call(null,t[a],a,t)}}function _M(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Os=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,vM=t=>!ku(t)&&t!==Os;function up(){const{caseless:t}=vM(this)&&this||{},e={},n=(i,r)=>{const s=t&&_M(e,r)||r;$h(e[s])&&$h(i)?e[s]=up(e[s],i):$h(i)?e[s]=up({},i):Za(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&mc(arguments[i],n);return e}const X4=(t,e,n,{allOwnKeys:i}={})=>(mc(e,(r,s)=>{n&&Mn(r)?t[s]=mM(r,n):t[s]=r},{allOwnKeys:i}),t),W4=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),H4=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Y4=(t,e,n,i)=>{let r,s,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&I_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},K4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},q4=t=>{if(!t)return null;if(Za(t))return t;let e=t.length;if(!yM(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Z4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&I_(Uint8Array)),J4=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},Q4=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},e6=fi("HTMLFormElement"),t6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),fE=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),n6=fi("RegExp"),xM=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};mc(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},i6=t=>{xM(t,(e,n)=>{if(Mn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Mn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},r6=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return Za(t)?i(t):i(String(t).split(e)),n},s6=()=>{},o6=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,m0="abcdefghijklmnopqrstuvwxyz",dE="0123456789",EM={DIGIT:dE,ALPHA:m0,ALPHA_DIGIT:m0+m0.toUpperCase()+dE},a6=(t=16,e=EM.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function l6(t){return!!(t&&Mn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const u6=t=>{const e=new Array(10),n=(i,r)=>{if(Nd(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=Za(i)?[]:{};return mc(i,(o,a)=>{const l=n(o,r+1);!ku(l)&&(s[a]=l)}),e[r]=void 0,s}}return i};return n(t,0)},c6=fi("AsyncFunction"),h6=t=>t&&(Nd(t)||Mn(t))&&Mn(t.then)&&Mn(t.catch),wM=((t,e)=>t?setImmediate:e?((n,i)=>(Os.addEventListener("message",({source:r,data:s})=>{r===Os&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),Os.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mn(Os.postMessage)),f6=typeof queueMicrotask<"u"?queueMicrotask.bind(Os):typeof process<"u"&&process.nextTick||wM,D={isArray:Za,isArrayBuffer:pM,isBuffer:I4,isFormData:G4,isArrayBufferView:P4,isString:A4,isNumber:yM,isBoolean:O4,isObject:Nd,isPlainObject:$h,isReadableStream:z4,isRequest:j4,isResponse:B4,isHeaders:$4,isUndefined:ku,isDate:L4,isFile:k4,isBlob:D4,isRegExp:n6,isFunction:Mn,isStream:N4,isURLSearchParams:U4,isTypedArray:Z4,isFileList:F4,forEach:mc,merge:up,extend:X4,trim:V4,stripBOM:W4,inherits:H4,toFlatObject:Y4,kindOf:Dd,kindOfTest:fi,endsWith:K4,toArray:q4,forEachEntry:J4,matchAll:Q4,isHTMLForm:e6,hasOwnProperty:fE,hasOwnProp:fE,reduceDescriptors:xM,freezeMethods:i6,toObjectSet:r6,toCamelCase:t6,noop:s6,toFiniteNumber:o6,findKey:_M,global:Os,isContextDefined:vM,ALPHABET:EM,generateString:a6,isSpecCompliantForm:l6,toJSONObject:u6,isAsyncFn:c6,isThenable:h6,setImmediate:wM,asap:f6};function de(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const SM=de.prototype,CM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{CM[t]={value:t}});Object.defineProperties(de,CM);Object.defineProperty(SM,"isAxiosError",{value:!0});de.from=(t,e,n,i,r,s)=>{const o=Object.create(SM);return D.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),de.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const d6=null;function cp(t){return D.isPlainObject(t)||D.isArray(t)}function TM(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function gE(t,e,n){return t?t.concat(e).map(function(r,s){return r=TM(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function g6(t){return D.isArray(t)&&!t.some(cp)}const m6=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});function Gd(t,e,n){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!D.isUndefined(m[p])});const i=n.metaTokens,r=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function u(d){if(d===null)return"";if(D.isDate(d))return d.toISOString();if(!l&&D.isBlob(d))throw new de("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(d)||D.isTypedArray(d)?l&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function c(d,p,m){let _=d;if(d&&!m&&typeof d=="object"){if(D.endsWith(p,"{}"))p=i?p:p.slice(0,-2),d=JSON.stringify(d);else if(D.isArray(d)&&g6(d)||(D.isFileList(d)||D.endsWith(p,"[]"))&&(_=D.toArray(d)))return p=TM(p),_.forEach(function(v,x){!(D.isUndefined(v)||v===null)&&e.append(o===!0?gE([p],x,s):o===null?p:p+"[]",u(v))}),!1}return cp(d)?!0:(e.append(gE(m,p,s),u(d)),!1)}const h=[],f=Object.assign(m6,{defaultVisitor:c,convertValue:u,isVisitable:cp});function g(d,p){if(!D.isUndefined(d)){if(h.indexOf(d)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(d),D.forEach(d,function(_,y){(!(D.isUndefined(_)||_===null)&&r.call(e,_,D.isString(y)?y.trim():y,p,f))===!0&&g(_,p?p.concat(y):[y])}),h.pop()}}if(!D.isObject(t))throw new TypeError("data must be an object");return g(t),e}function mE(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function P_(t,e){this._pairs=[],t&&Gd(t,this,e)}const MM=P_.prototype;MM.append=function(e,n){this._pairs.push([e,n])};MM.toString=function(e){const n=e?function(i){return e.call(this,i,mE)}:mE;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function p6(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function RM(t,e,n){if(!e)return t;const i=n&&n.encode||p6;D.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(e,n):s=D.isURLSearchParams(e)?e.toString():new P_(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class pE{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(i){i!==null&&e(i)})}}const bM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},y6=typeof URLSearchParams<"u"?URLSearchParams:P_,_6=typeof FormData<"u"?FormData:null,v6=typeof Blob<"u"?Blob:null,x6={isBrowser:!0,classes:{URLSearchParams:y6,FormData:_6,Blob:v6},protocols:["http","https","file","blob","url","data"]},A_=typeof window<"u"&&typeof document<"u",hp=typeof navigator=="object"&&navigator||void 0,E6=A_&&(!hp||["ReactNative","NativeScript","NS"].indexOf(hp.product)<0),w6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",S6=A_&&window.location.href||"http://localhost",C6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:A_,hasStandardBrowserEnv:E6,hasStandardBrowserWebWorkerEnv:w6,navigator:hp,origin:S6},Symbol.toStringTag,{value:"Module"})),Gt={...C6,...x6};function T6(t,e){return Gd(t,new Gt.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return Gt.isNode&&D.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function M6(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function R6(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function IM(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&D.isArray(r)?r.length:o,l?(D.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!D.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&D.isArray(r[o])&&(r[o]=R6(r[o])),!a)}if(D.isFormData(t)&&D.isFunction(t.entries)){const n={};return D.forEachEntry(t,(i,r)=>{e(M6(i),r,n,0)}),n}return null}function b6(t,e,n){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}const pc={transitional:bM,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=D.isObject(e);if(s&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return r?JSON.stringify(IM(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e)||D.isReadableStream(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return T6(e,this.formSerializer).toString();if((a=D.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Gd(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),b6(e)):e}],transformResponse:[function(e){const n=this.transitional||pc.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(e)||D.isReadableStream(e))return e;if(e&&D.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],t=>{pc.headers[t]={}});const I6=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),P6=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&I6[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},yE=Symbol("internals");function wl(t){return t&&String(t).trim().toLowerCase()}function Vh(t){return t===!1||t==null?t:D.isArray(t)?t.map(Vh):String(t)}function A6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const O6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function p0(t,e,n,i,r){if(D.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!D.isString(e)){if(D.isString(i))return e.indexOf(i)!==-1;if(D.isRegExp(i))return i.test(e)}}function L6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function k6(t,e){const n=D.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}class gn{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(a,l,u){const c=wl(l);if(!c)throw new Error("header name must be a non-empty string");const h=D.findKey(r,c);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||l]=Vh(a))}const o=(a,l)=>D.forEach(a,(u,c)=>s(u,c,l));if(D.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(D.isString(e)&&(e=e.trim())&&!O6(e))o(P6(e),n);else if(D.isHeaders(e))for(const[a,l]of e.entries())s(l,a,i);else e!=null&&s(n,e,i);return this}get(e,n){if(e=wl(e),e){const i=D.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return A6(r);if(D.isFunction(n))return n.call(this,r,i);if(D.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=wl(e),e){const i=D.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||p0(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=wl(o),o){const a=D.findKey(i,o);a&&(!n||p0(i,i[a],a,n))&&(delete i[a],r=!0)}}return D.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||p0(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return D.forEach(this,(r,s)=>{const o=D.findKey(i,s);if(o){n[o]=Vh(r),delete n[s];return}const a=e?L6(s):String(s).trim();a!==s&&delete n[s],n[a]=Vh(r),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return D.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&D.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[yE]=this[yE]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=wl(o);i[a]||(k6(r,o),i[a]=!0)}return D.isArray(e)?e.forEach(s):s(e),this}}gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(gn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});D.freezeMethods(gn);function y0(t,e){const n=this||pc,i=e||n,r=gn.from(i.headers);let s=i.data;return D.forEach(t,function(a){s=a.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function PM(t){return!!(t&&t.__CANCEL__)}function Ja(t,e,n){de.call(this,t??"canceled",de.ERR_CANCELED,e,n),this.name="CanceledError"}D.inherits(Ja,de,{__CANCEL__:!0});function AM(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function D6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function F6(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=i[s];o||(o=u),n[r]=l,i[r]=u;let h=s,f=0;for(;h!==r;)f+=n[h++],h=h%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),u-o<e)return;const g=c&&u-c;return g?Math.round(f*1e3/g):void 0}}function N6(t,e){let n=0,i=1e3/e,r,s;const o=(u,c=Date.now())=>{n=c,r=null,s&&(clearTimeout(s),s=null),t.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-n;h>=i?o(u,c):(r=u,s||(s=setTimeout(()=>{s=null,o(r)},i-h)))},()=>r&&o(r)]}const Ff=(t,e,n=3)=>{let i=0;const r=F6(50,250);return N6(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-i,u=r(l),c=o<=a;i=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},_E=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},vE=t=>(...e)=>D.asap(()=>t(...e)),G6=Gt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Gt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,U6=Gt.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(i)&&o.push("path="+i),D.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function z6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function j6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function OM(t,e){return t&&!z6(e)?j6(t,e):e}const xE=t=>t instanceof gn?{...t}:t;function qs(t,e){e=e||{};const n={};function i(u,c,h,f){return D.isPlainObject(u)&&D.isPlainObject(c)?D.merge.call({caseless:f},u,c):D.isPlainObject(c)?D.merge({},c):D.isArray(c)?c.slice():c}function r(u,c,h,f){if(D.isUndefined(c)){if(!D.isUndefined(u))return i(void 0,u,h,f)}else return i(u,c,h,f)}function s(u,c){if(!D.isUndefined(c))return i(void 0,c)}function o(u,c){if(D.isUndefined(c)){if(!D.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function a(u,c,h){if(h in e)return i(u,c);if(h in t)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,h)=>r(xE(u),xE(c),h,!0)};return D.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||r,f=h(t[c],e[c],c);D.isUndefined(f)&&h!==a||(n[c]=f)}),n}const LM=t=>{const e=qs({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=gn.from(o),e.url=RM(OM(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(D.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Gt.hasStandardBrowserEnv&&(i&&D.isFunction(i)&&(i=i(e)),i||i!==!1&&G6(e.url))){const u=r&&s&&U6.read(s);u&&o.set(r,u)}return e},B6=typeof XMLHttpRequest<"u",$6=B6&&function(t){return new Promise(function(n,i){const r=LM(t);let s=r.data;const o=gn.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,c,h,f,g,d;function p(){g&&g(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout;function _(){if(!m)return;const v=gn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:v,config:t,request:m};AM(function(C){n(C),p()},function(C){i(C),p()},E),m=null}"onloadend"in m?m.onloadend=_:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(_)},m.onabort=function(){m&&(i(new de("Request aborted",de.ECONNABORTED,t,m)),m=null)},m.onerror=function(){i(new de("Network Error",de.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let x=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const E=r.transitional||bM;r.timeoutErrorMessage&&(x=r.timeoutErrorMessage),i(new de(x,E.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,m)),m=null},s===void 0&&o.setContentType(null),"setRequestHeader"in m&&D.forEach(o.toJSON(),function(x,E){m.setRequestHeader(E,x)}),D.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),a&&a!=="json"&&(m.responseType=r.responseType),u&&([f,d]=Ff(u,!0),m.addEventListener("progress",f)),l&&m.upload&&([h,g]=Ff(l),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(c=v=>{m&&(i(!v||v.type?new Ja(null,t,m):v),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const y=D6(r.url);if(y&&Gt.protocols.indexOf(y)===-1){i(new de("Unsupported protocol "+y+":",de.ERR_BAD_REQUEST,t));return}m.send(s||null)})},V6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const s=function(u){if(!r){r=!0,a();const c=u instanceof Error?u:this.reason;i.abort(c instanceof de?c:new Ja(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,s(new de(`timeout ${e} of ms exceeded`,de.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>D.asap(a),l}},X6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},W6=async function*(t,e){for await(const n of H6(t))yield*X6(n,e)},H6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},EE=(t,e,n,i)=>{const r=W6(t,e);let s=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await r.next();if(u){a(),l.close();return}let h=c.byteLength;if(n){let f=s+=h;n(f)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Ud=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kM=Ud&&typeof ReadableStream=="function",Y6=Ud&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),DM=(t,...e)=>{try{return!!t(...e)}catch{return!1}},K6=kM&&DM(()=>{let t=!1;const e=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),wE=64*1024,fp=kM&&DM(()=>D.isReadableStream(new Response("").body)),Nf={stream:fp&&(t=>t.body)};Ud&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Nf[e]&&(Nf[e]=D.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new de(`Response type '${e}' is not supported`,de.ERR_NOT_SUPPORT,i)})})})(new Response);const q6=async t=>{if(t==null)return 0;if(D.isBlob(t))return t.size;if(D.isSpecCompliantForm(t))return(await new Request(Gt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(D.isArrayBufferView(t)||D.isArrayBuffer(t))return t.byteLength;if(D.isURLSearchParams(t)&&(t=t+""),D.isString(t))return(await Y6(t)).byteLength},Z6=async(t,e)=>{const n=D.toFiniteNumber(t.getContentLength());return n??q6(e)},J6=Ud&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:f}=LM(t);u=u?(u+"").toLowerCase():"text";let g=V6([r,s&&s.toAbortSignal()],o),d;const p=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let m;try{if(l&&K6&&n!=="get"&&n!=="head"&&(m=await Z6(c,i))!==0){let E=new Request(e,{method:"POST",body:i,duplex:"half"}),w;if(D.isFormData(i)&&(w=E.headers.get("content-type"))&&c.setContentType(w),E.body){const[C,S]=_E(m,Ff(vE(l)));i=EE(E.body,wE,C,S)}}D.isString(h)||(h=h?"include":"omit");const _="credentials"in Request.prototype;d=new Request(e,{...f,signal:g,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:_?h:void 0});let y=await fetch(d);const v=fp&&(u==="stream"||u==="response");if(fp&&(a||v&&p)){const E={};["status","statusText","headers"].forEach(R=>{E[R]=y[R]});const w=D.toFiniteNumber(y.headers.get("content-length")),[C,S]=a&&_E(w,Ff(vE(a),!0))||[];y=new Response(EE(y.body,wE,C,()=>{S&&S(),p&&p()}),E)}u=u||"text";let x=await Nf[D.findKey(Nf,u)||"text"](y,t);return!v&&p&&p(),await new Promise((E,w)=>{AM(E,w,{data:x,headers:gn.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:d})})}catch(_){throw p&&p(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new de("Network Error",de.ERR_NETWORK,t,d),{cause:_.cause||_}):de.from(_,_&&_.code,t,d)}}),dp={http:d6,xhr:$6,fetch:J6};D.forEach(dp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const SE=t=>`- ${t}`,Q6=t=>D.isFunction(t)||t===null||t===!1,FM={getAdapter:t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!Q6(n)&&(i=dp[(o=String(n)).toLowerCase()],i===void 0))throw new de(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(SE).join(`
`):" "+SE(s[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:dp};function _0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ja(null,t)}function CE(t){return _0(t),t.headers=gn.from(t.headers),t.data=y0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FM.getAdapter(t.adapter||pc.adapter)(t).then(function(i){return _0(t),i.data=y0.call(t,t.transformResponse,i),i.headers=gn.from(i.headers),i},function(i){return PM(i)||(_0(t),i&&i.response&&(i.response.data=y0.call(t,t.transformResponse,i.response),i.response.headers=gn.from(i.response.headers))),Promise.reject(i)})}const NM="1.7.9",zd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{zd[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const TE={};zd.transitional=function(e,n,i){function r(s,o){return"[Axios v"+NM+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(e===!1)throw new de(r(o," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!TE[o]&&(TE[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};zd.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function e8(t,e,n){if(typeof t!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new de("option "+s+" must be "+l,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}}const Xh={assertOptions:e8,validators:zd},wi=Xh.validators;class js{constructor(e){this.defaults=e,this.interceptors={request:new pE,response:new pE}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=qs(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Xh.assertOptions(i,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),r!=null&&(D.isFunction(r)?n.paramsSerializer={serialize:r}:Xh.assertOptions(r,{encode:wi.function,serialize:wi.function},!0)),Xh.assertOptions(n,{baseUrl:wi.spelling("baseURL"),withXsrfToken:wi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&D.merge(s.common,s[n.method]);s&&D.forEach(["delete","get","head","post","put","patch","common"],d=>{delete s[d]}),n.headers=gn.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let c,h=0,f;if(!l){const d=[CE.bind(this),void 0];for(d.unshift.apply(d,a),d.push.apply(d,u),f=d.length,c=Promise.resolve(n);h<f;)c=c.then(d[h++],d[h++]);return c}f=a.length;let g=n;for(h=0;h<f;){const d=a[h++],p=a[h++];try{g=d(g)}catch(m){p.call(this,m);break}}try{c=CE.call(this,g)}catch(d){return Promise.reject(d)}for(h=0,f=u.length;h<f;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=qs(this.defaults,e);const n=OM(e.baseURL,e.url);return RM(n,e.params,e.paramsSerializer)}}D.forEach(["delete","get","head","options"],function(e){js.prototype[e]=function(n,i){return this.request(qs(i||{},{method:e,url:n,data:(i||{}).data}))}});D.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,a){return this.request(qs(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}js.prototype[e]=n(),js.prototype[e+"Form"]=n(!0)});class O_{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,a){i.reason||(i.reason=new Ja(s,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new O_(function(r){e=r}),cancel:e}}}function t8(t){return function(n){return t.apply(null,n)}}function n8(t){return D.isObject(t)&&t.isAxiosError===!0}const gp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gp).forEach(([t,e])=>{gp[e]=t});function GM(t){const e=new js(t),n=mM(js.prototype.request,e);return D.extend(n,js.prototype,e,{allOwnKeys:!0}),D.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return GM(qs(t,r))},n}const ot=GM(pc);ot.Axios=js;ot.CanceledError=Ja;ot.CancelToken=O_;ot.isCancel=PM;ot.VERSION=NM;ot.toFormData=Gd;ot.AxiosError=de;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=t8;ot.isAxiosError=n8;ot.mergeConfig=qs;ot.AxiosHeaders=gn;ot.formToJSON=t=>IM(D.isHTMLForm(t)?new FormData(t):t);ot.getAdapter=FM.getAdapter;ot.HttpStatusCode=gp;ot.default=ot;const UM="https://api.dataforsyningen.dk/rest/skraafoto_api/v1.0",i8="https://api.dataforsyningen.dk/rest/skraafoto_api_test/v2";let Zt={API_STAC_TOKEN:"29351748585d8caf01ccb91b41ab14a4",API_STAC_BASEURL:UM,API_DHM_WCS_BASEURL:"https://services.datafordeler.dk/DHMNedboer/dhm_wcs/1.0.0/WCS",API_DHM_BASEURL:"https://test11.dataforsyningen.dk/DHMTerraen/DHMKoter/1.0.0/GEOREST/HentKoter",API_DHM_TOKENA:"ZPTINMIQGH",API_DHM_TOKENB:"Asdf!234",api_base_url:"http://localhost:5000",LOCAL_STORAGE_COOKIE_KEY:"skraafoto-cookie-allowed",LOCAL_STORAGE_FIRST_TIME_VISITOR_KEY:"skraafoto-first-time-visit",DEFAULT_COLLECTION:null,DEFAULT_WORLD_COORDINATE:[574764,6220953],ENABLE_CUSTOM_TOKEN:!1,ENABLE_PARCEL:!1,ENABLE_POINTER:!0,ENABLE_SMALL_FONT:!1,ENABLE_FULLSCREEN:!1,ENABLE_COMPASSARROWS:!0,ENABLE_CROSSHAIR_ICON:!1,ENABLE_SKATLOGO:!1,ENABLE_ALERT:!1,ENABLE_GEOLOCATION:!0,ENABLE_DOWNLOAD:!0,ENABLE_PRINT:!0,ENABLE_FIRST_VISIT_INFO:!0,MAP_ZOOM_DIFFERENCE:12,DEFAULT_ZOOM:4,MINI_ZOOM_DIFFERENCE:2,MAX_ZOOM:10,MIN_ZOOM:1,ENABLE_WEB_STATISTICS:!1,SITEIMPROVE_SCRIPT:"",COLOR_SETTINGS:{targetColor:"#FFF",heightColor:"#FF5252",widthColor:"#3EDDC6",pointerColor:"hsl(0,100%,66%)",parcelColorStroke:"hsl(53, 100%, 50%)",parcelColorFill:"transparent",footprintColor:"hsl(186,100%,12%)"},EXPOSURE_SETTINGS:[{exposure:0,brightness:0,contrast:0,saturation:0},{exposure:0,brightness:0,contrast:.4,saturation:-.2},{exposure:.9,brightness:0,contrast:0,saturation:0},{exposure:.9,brightness:.2,contrast:0,saturation:0}],CUSTOM_STYLES:!1};const ME=new URLSearchParams(location.search);ME.get("api")==="test"?Zt.API_STAC_BASEURL=i8:ME.get("api")==="prod"&&(Zt.API_STAC_BASEURL=UM);function L_(t){return async(...e)=>{let n=5,i=5e3;for(let r=1;r<=n;r++)try{return await t(...e)}catch(s){if(console.error(`Attempt ${r} failed`),r>=n)throw s;await new Promise(o=>setTimeout(o,i))}}}async function r8(t,e,n,i=1){let r={and:[{contains:[{property:"geometry"},{type:"Point",coordinates:[t[0],t[1]]}]},{eq:[{property:"direction"},e]}]};n&&r.and.push({eq:[{property:"collection"},n]});try{return await Dk(`/search?limit=${i}&filter=${encodeURI(JSON.stringify(r))}&filter-lang=cql-json&filter-crs=http://www.opengis.net/def/crs/EPSG/0/25832&crs=http://www.opengis.net/def/crs/EPSG/0/25832`,Zt)}catch(s){throw console.error(`Error querying items: ${s}`),s}}async function s8(t=Zt.API_DHM_TOKENA,e=Zt.API_DHM_TOKENB,n){try{const i=`POINT(${n.join(" ")})`,r=`https://services.datafordeler.dk/DHMTerraen/DHMKoter/1.0.0/GEOREST/HentKoter?username=${encodeURIComponent(t)}&password=${encodeURIComponent(e)}&geop=${encodeURIComponent(i)}`,s=await ot.get(r);if(s.data&&s.data.HentKoterRespons&&s.data.HentKoterRespons.data.length>0)return s.data.HentKoterRespons.data[0].kote;throw new Error("No elevation data found.")}catch(i){throw console.error("Error fetching elevation data:",i),i}}const o8=async t=>{const n=`https://api.dataforsyningen.dk/adgangsadresser?polygon=${JSON.stringify(t)}&srid=25832&struktur=mini`;try{const i=await fetch(n,{method:"GET",headers:{token:Zt.API_STAC_TOKEN,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);return await i.json()}catch(i){console.error("Error fetching adresses:",i)}},k_=L_(r8),zM=L_(s8),a8=L_(o8);async function jM(t,e,n){try{if(!e){console.error("Error: No item provided to updateCenter function.");return}const i=l8(e,t[0],t[1],n);return{worldCoord:[...t,n],imageCoord:i}}catch(i){return console.error("Error in updateCenter function:",i),null}}function l8(t,e,n,i=0){try{const s=t.properties["pers:interior_orientation"].principal_point_offset[0],o=t.properties["pers:interior_orientation"].principal_point_offset[1],a=t.properties["pers:interior_orientation"].focal_length,l=t.properties["pers:interior_orientation"].pixel_spacing[0],u=t.properties["pers:interior_orientation"].sensor_array_dimensions[0],c=t.properties["pers:interior_orientation"].sensor_array_dimensions[1],h=t.properties["pers:perspective_center"][0],f=t.properties["pers:perspective_center"][1],g=t.properties["pers:perspective_center"][2],d=t.properties["pers:omega"],p=t.properties["pers:phi"],m=t.properties["pers:kappa"],_=a*-1,y=u*l/2*-1,v=c*l/2*-1,x=r(d),E=r(p),w=r(m),C=Math.cos(E)*Math.cos(w),S=-Math.cos(E)*Math.sin(w),R=Math.sin(E),M=Math.cos(x)*Math.sin(w)+Math.sin(x)*Math.sin(E)*Math.cos(w),k=Math.cos(x)*Math.cos(w)-Math.sin(x)*Math.sin(E)*Math.sin(w),A=-Math.sin(x)*Math.cos(E),U=Math.sin(x)*Math.sin(w)-Math.cos(x)*Math.sin(E)*Math.cos(w),B=Math.sin(x)*Math.cos(w)+Math.cos(x)*Math.sin(E)*Math.sin(w),G=Math.cos(x)*Math.cos(E),j=-1*_*((C*(e-h)+M*(n-f)+U*(i-g))/(R*(e-h)+A*(n-f)+G*(i-g))),$=-1*_*((S*(e-h)+k*(n-f)+B*(i-g))/(R*(e-h)+A*(n-f)+G*(i-g))),O=(j-s+y)*-1/l,F=($-o+v)*-1/l;return[Math.round(O),Math.round(F)]}catch(s){return console.error("Error in getImageXY function:",s),[0,0]}function r(s){return s*(Math.PI/180)}}class di{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Pa={PROPERTYCHANGE:"propertychange"};class yc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function u8(t,e,n){let i,r;n=n||or;let s=0,o=t.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function or(t,e){return t>e?1:t<e?-1:0}function c8(t,e){return t<e?1:t>e?-1:0}function D_(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){const s=t[r];if(s===e)return r;if(s<e)return n(e,t[r-1],s)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function h8(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function Wn(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function vs(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function f8(t,e,n){const i=e||or;return t.every(function(r,s){if(s===0)return!0;const o=i(t[s-1],r);return!(o>0||o===0)})}function is(){return!0}function Qa(){return!1}function Aa(){}function BM(t){let e,n,i;return function(){const r=Array.prototype.slice.call(arguments);return(!n||this!==i||!vs(r,n))&&(i=this,n=r,e=t.apply(this,arguments)),e}}function $M(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function ro(t){for(const e in t)delete t[e]}function Zs(t){let e;for(e in t)return!1;return!e}class _c extends yc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=n?new di(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,Aa);delete o[i]}return l}disposeInternal(){this.listeners_&&ro(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Aa,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const oe={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Ee(t,e,n,i,r){if(r){const o=n;n=function(){t.removeEventListener(e,n),o.apply(i??this,arguments)}}else i&&i!==t&&(n=n.bind(i));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function Gf(t,e,n,i){return Ee(t,e,n,i,!0)}function ke(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),ro(t))}class vc extends _c{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(oe.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Ee(this,e[s],n);return r}return Ee(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Gf(this,e[s],n)}else i=Gf(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)d8(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}}vc.prototype.on;vc.prototype.once;vc.prototype.un;function d8(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ke(t[e]);else ke(t)}function ae(){throw new Error("Unimplemented abstract method.")}let g8=0;function le(t){return t.ol_uid||(t.ol_uid=String(++g8))}class RE extends di{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class gi extends vc{constructor(e){super(),this.on,this.once,this.un,le(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new RE(i,e,n)),i=Pa.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new RE(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const r=this.values_||(this.values_={});if(i)r[e]=n;else{const s=r[e];r[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Zs(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const mt={ADD:"add",REMOVE:"remove"},bE={LENGTH:"length"};class Qc extends di{constructor(e,n,i){super(e),this.element=n,this.index=i}}class ri extends gi{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(bE.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Qc(mt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Qc(mt.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Qc(mt.REMOVE,r,e)),this.dispatchEvent(new Qc(mt.ADD,n,e))}updateLength_(){this.set(bE.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}const Te={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function Se(t,e){if(!t)throw new Error(e)}function Ne(t,e,n){return Math.min(Math.max(t,e),n)}function m8(t,e,n,i,r,s){const o=r-n,a=s-i;if(o!==0||a!==0){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return ar(t,e,n,i)}function ar(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function p8(t){const e=t.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(t[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=t[r];t[r]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const l=-t[a][i]/t[i][i];for(let u=i;u<e+1;u++)i==u?t[a][u]=0:t[a][u]+=l*t[i][u]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function IE(t){return t*180/Math.PI}function li(t){return t*Math.PI/180}function ca(t,e){const n=t%e;return n*e<0?n+e:n}function En(t,e,n){return t+n*(e-t)}function jd(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function eh(t,e){return Math.floor(jd(t,e))}function th(t,e){return Math.ceil(jd(t,e))}function mp(t,e,n){if(t>=e&&t<n)return t;const i=n-e;return((t-e)%i+i)%i+e}class VM extends gi{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Te.OPACITY]=e.opacity!==void 0?e.opacity:1,Se(typeof n[Te.OPACITY]=="number","Layer opacity must be a number"),n[Te.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Te.Z_INDEX]=e.zIndex,n[Te.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Te.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Te.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Te.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=Ne(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return ae()}getLayerStatesArray(e){return ae()}getExtent(){return this.get(Te.EXTENT)}getMaxResolution(){return this.get(Te.MAX_RESOLUTION)}getMinResolution(){return this.get(Te.MIN_RESOLUTION)}getMinZoom(){return this.get(Te.MIN_ZOOM)}getMaxZoom(){return this.get(Te.MAX_ZOOM)}getOpacity(){return this.get(Te.OPACITY)}getSourceState(){return ae()}getVisible(){return this.get(Te.VISIBLE)}getZIndex(){return this.get(Te.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Te.EXTENT,e)}setMaxResolution(e){this.set(Te.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Te.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Te.MAX_ZOOM,e)}setMinZoom(e){this.set(Te.MIN_ZOOM,e)}setOpacity(e){Se(typeof e=="number","Layer opacity must be a number"),this.set(Te.OPACITY,e)}setVisible(e){this.set(Te.VISIBLE,e)}setZIndex(e){this.set(Te.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const pt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Dt={ANIMATING:0,INTERACTING:1},Qn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},y8=42,F_=256,_8={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function PE(t){return _8[t]}const N_={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Oa{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||N_[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const xc=6378137,Wo=Math.PI*xc,v8=[-Wo,-Wo,Wo,Wo],x8=[-180,-85,180,85],nh=xc*Math.log(Math.tan(Math.PI/2));class fo extends Oa{constructor(e){super({code:e,units:"m",extent:v8,global:!0,worldExtent:x8,getPointResolution:function(n,i){return n/Math.cosh(i[1]/xc)}})}}const AE=[new fo("EPSG:3857"),new fo("EPSG:102100"),new fo("EPSG:102113"),new fo("EPSG:900913"),new fo("http://www.opengis.net/def/crs/EPSG/0/3857"),new fo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function E8(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Wo*t[s]/180;let o=xc*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>nh?o=nh:o<-nh&&(o=-nh),e[s+1]=o}return e}function w8(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*t[s]/Wo,e[s+1]=360*Math.atan(Math.exp(t[s+1]/xc))/Math.PI-90;return e}const S8=6378137,OE=[-180,-90,180,90],C8=Math.PI*S8/180;class Ss extends Oa{constructor(e,n){super({code:e,units:"degrees",extent:OE,axisOrientation:n,global:!0,metersPerUnit:C8,worldExtent:OE})}}const LE=[new Ss("CRS:84"),new Ss("EPSG:4326","neu"),new Ss("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ss("urn:ogc:def:crs:OGC:2:84"),new Ss("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ss("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ss("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let pp={};function Wh(t){return pp[t]||pp[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function T8(t,e){pp[t]=e}let ha={};function Js(t,e,n){const i=t.getCode(),r=e.getCode();i in ha||(ha[i]={}),ha[i][r]=n}function Hh(t,e){return t in ha&&e in ha[t]?ha[t][e]:null}const ft={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Uf(t){const e=In();for(let n=0,i=t.length;n<i;++n)ru(e,t[n]);return e}function M8(t,e,n){const i=Math.min.apply(null,t),r=Math.min.apply(null,e),s=Math.max.apply(null,t),o=Math.max.apply(null,e);return Bi(i,r,s,o,n)}function G_(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function XM(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function so(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function rs(t,e){return U_(t,e[0],e[1])}function Ls(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function U_(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function yp(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=ft.UNKNOWN;return o<n?l=l|ft.LEFT:o>r&&(l=l|ft.RIGHT),a<i?l=l|ft.BELOW:a>s&&(l=l|ft.ABOVE),l===ft.UNKNOWN&&(l=ft.INTERSECTING),l}function In(){return[1/0,1/0,-1/0,-1/0]}function Bi(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function el(t){return Bi(1/0,1/0,-1/0,-1/0,t)}function WM(t,e){const n=t[0],i=t[1];return Bi(n,i,n,i,e)}function z_(t,e,n,i,r){const s=el(r);return HM(s,t,e,n,i)}function Du(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function j_(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function ru(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function HM(t,e,n,i,r){for(;n<i;n+=r)R8(t,e[n],e[n+1]);return t}function R8(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function B_(t,e){let n;return n=e(Bd(t)),n||(n=e($d(t)),n)||(n=e(Vd(t)),n)||(n=e(pr(t)),n)?n:!1}function Fu(t){let e=0;return tl(t)||(e=ve(t)*ut(t)),e}function Bd(t){return[t[0],t[1]]}function $d(t){return[t[2],t[1]]}function mr(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function b8(t,e){let n;if(e==="bottom-left")n=Bd(t);else if(e==="bottom-right")n=$d(t);else if(e==="top-left")n=pr(t);else if(e==="top-right")n=Vd(t);else throw new Error("Invalid corner");return n}function _p(t,e,n,i,r){const[s,o,a,l,u,c,h,f]=I8(t,e,n,i);return Bi(Math.min(s,a,u,h),Math.min(o,l,c,f),Math.max(s,a,u,h),Math.max(o,l,c,f),r)}function I8(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,u=r*a,c=s*o,h=s*a,f=t[0],g=t[1];return[f-l+h,g-u-c,f-l-h,g-u+c,f+l-h,g+u+c,f+l+h,g+u-c,f-l+h,g-u-c]}function ut(t){return t[3]-t[1]}function Kt(t,e,n){const i=n||In();return Ht(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):el(i),i}function pr(t){return[t[0],t[3]]}function Vd(t){return[t[2],t[3]]}function ve(t){return t[2]-t[0]}function Ht(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function tl(t){return t[2]<t[0]||t[3]<t[1]}function P8(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function A8(t,e,n){let i=!1;const r=yp(t,e),s=yp(t,n);if(r===ft.INTERSECTING||s===ft.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],f=n[0],g=n[1],d=(g-h)/(f-c);let p,m;s&ft.ABOVE&&!(r&ft.ABOVE)&&(p=f-(g-u)/d,i=p>=o&&p<=l),!i&&s&ft.RIGHT&&!(r&ft.RIGHT)&&(m=g-(f-l)*d,i=m>=a&&m<=u),!i&&s&ft.BELOW&&!(r&ft.BELOW)&&(p=f-(g-a)/d,i=p>=o&&p<=l),!i&&s&ft.LEFT&&!(r&ft.LEFT)&&(m=g-(f-o)*d,i=m>=a&&m<=u)}return i}function O8(t,e,n,i){if(tl(t))return el(n);let r=[];r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return M8(s,o,n)}function YM(t,e){const n=e.getExtent(),i=mr(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const r=ve(n),o=Math.floor((i[0]-n[0])/r)*r;t[0]-=o,t[2]-=o}return t}function $_(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];YM(t,e);const r=ve(i);if(ve(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}function L8(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function zf(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function V_(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function k8(t,e){return t[0]*=e,t[1]*=e,t}function KM(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function qM(t,e){return Math.sqrt(KM(t,e))}function ZM(t,e){if(e.canWrapX()){const n=ve(e.getExtent()),i=JM(t,e,n);i&&(t[0]-=i*n)}return t}function JM(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||ve(i),r=Math.floor((t[0]-i[0])/n)),r}const QM=63710088e-1;function kE(t,e,n){n=n||QM;const i=li(t[1]),r=li(e[1]),s=(r-i)/2,o=li(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function ih(t,e){let n=0;const i=t.length;let r=t[i-1][0],s=t[i-1][1];for(let o=0;o<i;o++){const a=t[o][0],l=t[o][1];n+=li(a-r)*(2+Math.sin(li(s))+Math.sin(li(l))),r=a,s=l}return n*e*e/2}function eR(t,e){e=e||{};const n=e.radius||QM,i=e.projection||"EPSG:3857",r=t.getType();r!=="GeometryCollection"&&(t=t.clone().transform(i,"EPSG:4326"));let s=0,o,a,l,u,c,h;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=t.getCoordinates(),s=Math.abs(ih(o[0],n)),l=1,u=o.length;l<u;++l)s-=Math.abs(ih(o[l],n));break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,u=o.length;l<u;++l)for(a=o[l],s+=Math.abs(ih(a[0],n)),c=1,h=a.length;c<h;++c)s-=Math.abs(ih(a[c],n));break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,u=f.length;l<u;++l)s+=eR(f[l],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}const jf=.9996,Hn=.00669438,Xd=Hn*Hn,Wd=Xd*Hn,ks=Hn/(1-Hn),DE=Math.sqrt(1-Hn),La=(1-DE)/(1+DE),tR=La*La,X_=tR*La,W_=X_*La,nR=W_*La,iR=1-Hn/4-3*Xd/64-5*Wd/256,D8=3*Hn/8+3*Xd/32+45*Wd/1024,F8=15*Xd/256+45*Wd/1024,N8=35*Wd/3072,G8=3/2*La-27/32*X_+269/512*nR,U8=21/16*tR-55/32*W_,z8=151/96*X_-417/128*nR,j8=1097/512*W_,Bf=6378137;function B8(t,e,n){const i=t-5e5,o=(n.north?e:e-1e7)/jf/(Bf*iR),a=o+G8*Math.sin(2*o)+U8*Math.sin(4*o)+z8*Math.sin(6*o)+j8*Math.sin(8*o),l=Math.sin(a),u=l*l,c=Math.cos(a),h=l/c,f=h*h,g=f*f,d=1-Hn*u,p=Math.sqrt(1-Hn*u),m=Bf/p,_=(1-Hn)/d,y=ks*c**2,v=y*y,x=i/(m*jf),E=x*x,w=E*x,C=w*x,S=C*x,R=S*x,M=a-h/_*(E/2-C/24*(5+3*f+10*y-4*v-9*ks))+R/720*(61+90*f+298*y+45*g-252*ks-3*v);let k=(x-w/6*(1+2*f+y)+S/120*(5-2*y+28*f-3*v+8*ks+24*g))/c;return k=mp(k+li(rR(n.number)),-Math.PI,Math.PI),[IE(k),IE(M)]}const FE=-80,NE=84,$8=-180,V8=180;function X8(t,e,n){t=mp(t,$8,V8),e<FE?e=FE:e>NE&&(e=NE);const i=li(e),r=Math.sin(i),s=Math.cos(i),o=r/s,a=o*o,l=a*a,u=li(t),c=rR(n.number),h=li(c),f=Bf/Math.sqrt(1-Hn*r**2),g=ks*s**2,d=s*mp(u-h,-Math.PI,Math.PI),p=d*d,m=p*d,_=m*d,y=_*d,v=y*d,x=Bf*(iR*i-D8*Math.sin(2*i)+F8*Math.sin(4*i)-N8*Math.sin(6*i)),E=jf*f*(d+m/6*(1-a+g)+y/120*(5-18*a+l+72*g-58*ks))+5e5;let w=jf*(x+f*o*(p/2+_/24*(5-a+9*g+4*g**2)+v/720*(61-58*a+l+600*g-330*ks)));return n.north||(w+=1e7),[E,w]}function rR(t){return(t-1)*6-180+3}const W8=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function sR(t){let e=0;for(const r of W8){const s=t.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,i=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(i=!0,n=e-32600),n?{number:n,north:i}:null}function GE(t,e){return function(n,i,r,s){const o=n.length;r=r>1?r:2,s=s??r,i||(r>2?i=n.slice():i=new Array(o));for(let a=0;a<o;a+=s){const l=n[a],u=n[a+1],c=t(l,u,e);i[a]=c[0],i[a+1]=c[1]}return i}}function H8(t){return sR(t)?new Oa({code:t,units:"m"}):null}function Y8(t){const e=sR(t.getCode());return e?{forward:GE(X8,e),inverse:GE(B8,e)}:null}function oR(...t){console.warn(...t)}function UE(...t){console.error(...t)}const K8=[Y8],q8=[H8];let vp=!0;function Z8(t){vp=!1}function H_(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function $f(t){T8(t.getCode(),t),Js(t,t,H_)}function J8(t){t.forEach($f)}function De(t){if(typeof t!="string")return t;const e=Wh(t);if(e)return e;for(const n of q8){const i=n(t);if(i)return i}return null}function zE(t,e,n,i){t=De(t);let r;const s=t.getPointResolutionFunc();if(s)r=s(e,n);else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=K_(t,De("EPSG:4326"));if(!a&&o!=="degrees")r=e*t.getMetersPerUnit();else{let u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];u=a(u,u,2);const c=kE(u.slice(0,2),u.slice(2,4)),h=kE(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const l=t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function xp(t){J8(t),t.forEach(function(e){t.forEach(function(n){e!==n&&Js(e,n,H_)})})}function Q8(t,e,n,i){t.forEach(function(r){e.forEach(function(s){Js(r,s,n),Js(s,r,i)})})}function Y_(t,e){return t?typeof t=="string"?De(t):t:De(e)}function Vf(t){return function(e,n,i,r){const s=e.length;i=i!==void 0?i:2,r=r??i,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=r){const a=t(e.slice(o,o+i)),l=a.length;for(let u=0,c=r;u<c;++u)n[o+u]=u>=l?e[o+u]:a[u]}return n}}function eG(t,e,n,i){const r=De(t),s=De(e);Js(r,s,Vf(n)),Js(s,r,Vf(i))}function Bs(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||K_(t,e)===H_)&&n}function K_(t,e){const n=t.getCode(),i=e.getCode();let r=Hh(n,i);if(r)return r;let s=null,o=null;for(const l of K8)s||(s=l(t)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=v0(s.inverse,o.forward);else{const l=Hh(n,a);l&&(r=v0(l,o.forward))}else{const l=Hh(a,i);l&&(r=v0(s.inverse,l))}return r&&($f(t),$f(e),Js(t,e,r)),r}function v0(t,e){return function(n,i,r,s){return i=t(n,i,r,s),e(i,i,r,s)}}function Nu(t,e){const n=De(t),i=De(e);return K_(n,i)}function aR(t,e,n){const i=Nu(e,n);if(!i){const r=De(e).getCode(),s=De(n).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return i(t,void 0,t.length)}function Xf(t,e){return t}function ti(t,e){return vp&&!zf(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(vp=!1,oR("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function q_(t,e){return t}function Ai(t,e){return t}function jE(t,e,n){return function(i){let r,s;if(t.canWrapX()){const o=t.getExtent(),a=ve(o);i=i.slice(0),s=JM(i,t,a),s&&(i[0]=i[0]-s*a),i[0]=Ne(i[0],o[0],o[2]),i[1]=Ne(i[1],o[1],o[3]),r=n(i)}else r=n(i);return s&&e.canWrapX()&&(r[0]+=s*ve(e.getExtent())),r}}function tG(){xp(AE),xp(LE),Q8(LE,AE,E8,w8)}tG();function BE(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+c,g=t[2]-l/2+c,d=t[1]+u/2+h,p=t[3]-u/2+h;f>g&&(f=(g+f)/2,g=f),d>p&&(d=(p+d)/2,p=d);let m=Ne(i[0],f,g),_=Ne(i[1],d,p);if(o&&n&&r){const y=30*r;m+=-y*Math.log(1+Math.max(0,f-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-g)/y),_+=-y*Math.log(1+Math.max(0,d-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-p)/y)}return[m,_]}}function nG(t){return t}function Z_(t,e,n,i){const r=ve(e)/n[0],s=ut(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function J_(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),Ne(i,n/2,e*2)}function iG(t,e,n,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=t[0],u=t[t.length-1],c=n?Z_(l,n,o,i):l;if(a)return e?J_(r,c,u):Ne(r,u,c);const h=Math.min(c,r),f=Math.floor(D_(t,h,s));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}function rG(t,e,n,i,r,s){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,u){if(o!==void 0){const c=r?Z_(e,r,l,s):e;if(u)return i?J_(o,c,n):Ne(o,n,c);const h=1e-9,f=Math.ceil(Math.log(e/c)/Math.log(t)-h),g=-a*(.5-h)+.5,d=Math.min(c,o),p=Math.floor(Math.log(e/d)/Math.log(t)+g),m=Math.max(f,p),_=e/Math.pow(t,m);return Ne(_,n,c)}}}function $E(t,e,n,i,r){return n=n!==void 0?n:!0,function(s,o,a,l){if(s!==void 0){const u=i?Z_(t,i,a,r):t;return!n||!l?Ne(s,e,u):J_(s,u,e)}}}function Q_(t){if(t!==void 0)return 0}function VE(t){if(t!==void 0)return t}function sG(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function oG(t){const e=li(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function lR(t){return Math.pow(t,3)}function nl(t){return 1-lR(1-t)}function aG(t){return 3*t*t-2*t*t*t}function lG(t){return t}const e1=new Array(6);function Ut(){return[1,0,0,1,0,0]}function uG(t){return Hd(t,1,0,0,1,0,0)}function Gu(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],f=e[4],g=e[5];return t[0]=n*l+r*u,t[1]=i*l+s*u,t[2]=n*c+r*h,t[3]=i*c+s*h,t[4]=n*f+r*g+o,t[5]=i*f+s*g+a,t}function Hd(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function cG(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function it(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function hG(t,e){const n=Math.cos(e),i=Math.sin(e);return Gu(t,Hd(e1,n,i,-i,n,0,0))}function XE(t,e,n){return Gu(t,Hd(e1,e,0,0,n,0,0))}function fG(t,e,n){return Gu(t,Hd(e1,1,0,0,1,e,n))}function ci(t,e,n,i,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=o*i*u-a*i*l+e,t[5]=o*r*l+a*r*u+n,t}function t1(t,e){const n=dG(e);Se(n!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*l-o*a)/n,t[5]=-(i*l-r*a)/n,t}function dG(t){return t[0]*t[3]-t[1]*t[2]}const WE=[1e6,1e6,1e6,1e6,2,2];function gG(t){return"matrix("+t.map((n,i)=>Math.round(n*WE[i])/WE[i]).join(", ")+")"}function Jr(t,e,n,i,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=i){const u=t[l],c=t[l+1];s[a++]=r[0]*u+r[2]*c+r[4],s[a++]=r[1]*u+r[3]*c+r[5];for(let h=2;h<o;h++)s[a++]=t[l+h]}return s&&s.length!=a&&(s.length=a),s}function n1(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],c=s[1];let h=0;for(let f=e;f<n;f+=i){const g=t[f]-u,d=t[f+1]-c;o[h++]=u+g*a-d*l,o[h++]=c+g*l+d*a;for(let p=f+2;p<f+i;++p)o[h++]=t[p]}return o&&o.length!=h&&(o.length=h),o}function mG(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<n;h+=i){const f=t[h]-l,g=t[h+1]-u;a[c++]=l+r*f,a[c++]=u+s*g;for(let d=h+2;d<h+i;++d)a[c++]=t[d]}return a&&a.length!=c&&(a.length=c),a}function pG(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let u=l+2;u<l+i;++u)o[a++]=t[u]}return o&&o.length!=a&&(o.length=a),o}const HE=Ut();class uR extends gi{constructor(){super(),this.extent_=In(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=BM((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return ae()}closestPointXY(e,n,i,r){return ae()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ae()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&el(n),this.extentRevision_=this.getRevision()}return P8(this.extent_,e)}rotate(e,n){ae()}scale(e,n,i){ae()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ae()}getType(){return ae()}applyTransform(e){ae()}intersectsExtent(e){return ae()}translate(e,n){ae()}transform(e,n){const i=De(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),u=i.getWorldExtent(),c=ut(u)/ut(l);ci(HE,u[0],u[3],c,-c,0,0,0);const h=Jr(s,0,s.length,a,HE,o),f=Nu(i,n);return f?f(h,h,a):h}:Nu(i,n);return this.applyTransform(r),this}}class xs extends uR{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return z_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ae()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=Wf(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){ae()}setLayout(e,n,i){let r;if(e)r=Wf(e);else{for(let s=0;s<i;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=oo(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();n1(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=mr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();mG(r,0,r.length,s,e,n,i,r),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const r=this.getStride();pG(i,0,i.length,r,e,n,i),this.changed()}}}function oo(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function Wf(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function yG(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return Jr(i,0,i.length,r,e,n)}function YE(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],u=t[n]-a,c=t[n+1]-l;let h;if(u===0&&c===0)h=e;else{const f=((r-a)*u+(s-l)*c)/(u*u+c*c);if(f>1)h=n;else if(f>0){for(let g=0;g<i;++g)o[g]=En(t[e+g],t[n+g],f);o.length=i;return}else h=e}for(let f=0;f<i;++f)o[f]=t[h+f];o.length=i}function i1(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],l=t[e+1],u=ar(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function r1(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=i1(t,e,a,i,r),e=a}return r}function _G(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];r=r1(t,e,a,i,r),e=a[a.length-1]}return r}function s1(t,e,n,i,r,s,o,a,l,u,c){if(e==n)return u;let h,f;if(r===0){if(f=ar(o,a,t[e],t[e+1]),f<u){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,f}return u}c=c||[NaN,NaN];let g=e+i;for(;g<n;)if(YE(t,g-i,g,i,o,a,c),f=ar(o,a,c[0],c[1]),f<u){for(u=f,h=0;h<i;++h)l[h]=c[h];l.length=i,g+=i}else g+=i*Math.max((Math.sqrt(f)-Math.sqrt(u))/r|0,1);if(s&&(YE(t,n-i,e,i,o,a,c),f=ar(o,a,c[0],c[1]),f<u)){for(u=f,h=0;h<i;++h)l[h]=c[h];l.length=i}return u}function o1(t,e,n,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];u=s1(t,e,g,i,r,s,o,a,l,u,c),e=g}return u}function vG(t,e,n,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];u=o1(t,e,g,i,r,s,o,a,l,u,c),e=g[g.length-1]}return u}function cR(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function Yd(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function Ec(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=Yd(t,e,n[o],i);r[s++]=l,e=l}return r.length=s,r}function hR(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=Ec(t,e,n[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function Kd(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,n-i];let c=0;for(;u.length>0;){const h=u.pop(),f=u.pop();let g=0;const d=t[f],p=t[f+1],m=t[h],_=t[h+1];for(let y=f+i;y<h;y+=i){const v=t[y],x=t[y+1],E=m8(v,x,d,p,m,_);E>g&&(c=y,g=E)}g>r&&(l[(c-e)/i]=1,f+i<c&&u.push(f,c),c+i<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*i],s[o++]=t[e+h*i+1]);return o}function fR(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=Kd(t,e,c,i,r,s,o),a.push(o),e=c}return o}function bs(t,e){return e*Math.round(t/e)}function xG(t,e,n,i,r,s,o){if(e==n)return o;let a=bs(t[e],r),l=bs(t[e+1],r);e+=i,s[o++]=a,s[o++]=l;let u,c;do if(u=bs(t[e],r),c=bs(t[e+1],r),e+=i,e==n)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<n;){const h=bs(t[e],r),f=bs(t[e+1],r);if(e+=i,h==u&&f==c)continue;const g=u-a,d=c-l,p=h-a,m=f-l;if(g*m==d*p&&(g<0&&p<g||g==p||g>0&&p>g)&&(d<0&&m<d||d==m||d>0&&m>d)){u=h,c=f;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=f}return s[o++]=u,s[o++]=c,o}function a1(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=xG(t,e,c,i,r,s,o),a.push(o),e=c}return o}function EG(t,e,n,i,r,s,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l],h=[];o=a1(t,e,c,i,r,s,o,h),a.push(h),e=c[c.length-1]}return o}function zr(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function Uu(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=zr(t,e,l,i,r[s]),e=l}return r.length=s,r}function Ep(t,e,n,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];r[s++]=l.length===1&&l[0]===e?[]:Uu(t,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function dR(t,e,n,i){let r=0;const s=t[n-i],o=t[n-i+1];let a=0,l=0;for(;e<n;e+=i){const u=t[e]-s,c=t[e+1]-o;r+=l*u-a*c,a=u,l=c}return r/2}function gR(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=dR(t,e,a,i),e=a}return r}function wG(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];r+=gR(t,e,a,i),e=a[a.length-1]}return r}class zu extends xs{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new zu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<so(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(i1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),s1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return dR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=Kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new zu(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yd(this.flatCoordinates,0,e,this.stride),this.changed()}}class Gi extends xs{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Gi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=ar(e,n,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return WM(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return U_(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=cR(this.flatCoordinates,0,e,this.stride),this.changed()}}function SG(t,e,n,i,r){return!B_(r,function(o){return!Ds(t,e,n,i,o[0],o[1])})}function Ds(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const u=t[e],c=t[e+1];l<=s?c>s&&(u-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function l1(t,e,n,i,r,s){if(n.length===0||!Ds(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Ds(t,n[o-1],n[o],i,r,s))return!1;return!0}function CG(t,e,n,i,r,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(l1(t,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function u1(t,e,n,i,r,s,o){let a,l,u,c,h,f,g;const d=r[s+1],p=[];for(let y=0,v=n.length;y<v;++y){const x=n[y];for(c=t[x-i],f=t[x-i+1],a=e;a<x;a+=i)h=t[a],g=t[a+1],(d<=f&&g<=d||f<=d&&d<=g)&&(u=(d-f)/(g-f)*(h-c)+c,p.push(u)),c=h,f=g}let m=NaN,_=-1/0;for(p.sort(or),c=p[0],a=1,l=p.length;a<l;++a){h=p[a];const y=Math.abs(h-c);y>_&&(u=(c+h)/2,l1(t,e,n,i,u,d)&&(m=u,_=y)),c=h}return isNaN(m)&&(m=r[s]),o?(o.push(m,d,_),o):[m,d,_]}function mR(t,e,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=u1(t,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function pR(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function qd(t,e,n,i,r){const s=HM(In(),t,e,n,i);return Ht(r,s)?Ls(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:pR(t,e,n,i,function(o,a){return A8(r,o,a)}):!1}function TG(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){if(qd(t,e,n[s],i,r))return!0;e=n[s]}return!1}function yR(t,e,n,i,r){return!!(qd(t,e,n,i,r)||Ds(t,e,n,i,r[0],r[1])||Ds(t,e,n,i,r[0],r[3])||Ds(t,e,n,i,r[2],r[1])||Ds(t,e,n,i,r[2],r[3]))}function _R(t,e,n,i,r){if(!yR(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(SG(t,n[s-1],n[s],i,r)&&!qd(t,n[s-1],n[s],i,r))return!1;return!0}function MG(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(_R(t,e,a,i,r))return!0;e=a[a.length-1]}return!1}function RG(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function c1(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function h1(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=c1(t,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function vR(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!h1(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Hf(t,e,n,i,r){r=r!==void 0?r:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=c1(t,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&RG(t,e,a,i),e=a}return e}function wp(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=Hf(t,e,n[s],i,r);return e}function bG(t,e){const n=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=c1(t,i,l,2);if(s===void 0&&(s=u),u===s)n.push(e.slice(r,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[r])}r=o+1,i=l}return n}class $i extends xs{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?Wn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new $i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<so(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return l1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return gR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Hf(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Uu(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=mr(this.getExtent());this.flatInteriorPoint_=u1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Gi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new zu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=new zu(n.slice(s,l),e);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;h1(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Hf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=a1(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new $i(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return _R(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ec(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function KE(t){if(tl(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new $i(s,"XY",[s.length])}const x0=0;class jn extends gi{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Y_(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Z8(),e.center&&(e.center=ti(e.center,this.projection_)),e.extent&&(e.extent=Ai(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in Qn)delete n[a];this.setProperties(n,!0);const i=PG(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=IG(e),s=i.constraint,o=AG(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-n[3]+n[1]-r[1]),a=s/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=ti(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=ti(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===n){i&&rh(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<n;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||aG,callback:i};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const f=ca(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}OG(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Dt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Dt.ANIMATING]>0}getInteracting(){return this.hints_[Dt.INTERACTING]>0}cancelAnimations(){this.setHint(Dt.ANIMATING,-this.hints_[Dt.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const r=this.animations_[n];if(r[0].callback&&rh(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const f=l.sourceCenter[0],g=l.sourceCenter[1],d=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=f+h*(d-f),_=g+h*(p-g);this.targetCenter_=[m,_]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(d,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?ca(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Dt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&rh(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],V_(i,e-this.getRotation()),L8(i,n)),i}calculateCenterZoom(e,n){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-r[0])/s,a=n[1]-e*(n[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Xf(e,this.getProjection())}getCenterInternal(){return this.get(Qn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return q_(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();Se(n,"The view center is not defined");const i=this.getResolution();Se(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Se(r!==void 0,"The view rotation is not defined"),_p(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Qn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Ai(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=ve(e)/n[0],r=ut(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(s){return n/Math.pow(e,s*r)}}getRotation(){return this.get(Qn.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/n;return function(o){return Math.log(i/o)/n/s}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=E0(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){const s=D_(this.resolutions_,e,1);n=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){var n;if((n=this.resolutions_)!=null&&n.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Ne(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,Ne(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(Se(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Se(!tl(e),"Cannot fit empty extent provided as `geometry`");const r=Ai(e,this.getProjection());i=KE(r)}else if(e.getType()==="Circle"){const r=Ai(e.getExtent(),this.getProjection());i=KE(r),i.rotate(this.getRotation(),mr(r))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,f=s.length;h<f;h+=o){const g=s[h]*i-s[h+1]*r,d=s[h]*r+s[h+1]*i;a=Math.min(a,g),l=Math.min(l,d),u=Math.max(u,g),c=Math.max(c,d)}return[a,l,u,c]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const r=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),f=mr(a);f[0]+=(r[1]-r[3])/2*l,f[1]+=(r[0]-r[2])/2*l;const g=f[0]*h-f[1]*c,d=f[1]*h+f[0]*c,p=this.getConstrainedCenter([g,d],l),m=n.callback?n.callback:Aa;n.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:n.duration,easing:n.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),rh(m,!0))}centerOn(e,n,i){this.centerOnInternal(ti(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(E0(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=E0(e,r,[a[0]/2+o[3],a[1]/2+o[0]],n,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=Xf(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&ti(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=ti(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&ti(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Qn.ROTATION)!==r&&this.set(Qn.ROTATION,r),this.get(Qn.RESOLUTION)!==o&&(this.set(Qn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Qn.CENTER)||!zf(this.get(Qn.CENTER),a))&&this.set(Qn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const r=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!zf(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:nl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Dt.INTERACTING,1)}endInteraction(e,n,i){i=i&&ti(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(Dt.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function rh(t,e){setTimeout(function(){t(e)},0)}function IG(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return BE(t.extent,t.constrainOnlyCenter,n)}const e=Y_(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,BE(n,!1,!1)}return nG}function PG(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:x0,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,u=t.multiWorld!==void 0?t.multiWorld:!1,c=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=Y_(t.projection,"EPSG:3857"),g=f.getExtent();let d=t.constrainOnlyCenter,p=t.extent;if(!u&&!p&&f.isGlobal()&&(d=!1,p=g),t.resolutions!==void 0){const m=t.resolutions;n=m[o],i=m[a]!==void 0?m[a]:m[m.length-1],t.constrainResolution?e=iG(m,c,!d&&p,h):e=$E(n,i,c,!d&&p,h)}else{const _=(g?Math.max(ve(g),ut(g)):360*N_.degrees/f.getMetersPerUnit())/F_/Math.pow(2,x0),y=_/Math.pow(2,28-x0);n=t.maxResolution,n!==void 0?o=0:n=_/Math.pow(l,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=_/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),t.constrainResolution?e=rG(l,n,i,c,!d&&p,h):e=$E(n,i,c,!d&&p,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function AG(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?oG():n===!1?VE:typeof n=="number"?sG(n):VE}return Q_}function OG(t){return!(t.sourceCenter&&t.targetCenter&&!zf(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function E0(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}class Zd extends VM{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Te.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Te.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ke(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Ee(e,oe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof jn?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(n.layerStatesArray){if(r=n.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return f1(r,n.viewState)&&(!s||Ht(s,n.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const n=(s=this.getSource())==null?void 0:s.getAttributions();if(!n)return[];const i=e instanceof jn?e.getViewStateAndExtent():e;let r=n(i);return Array.isArray(r)||(r=[r]),r}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Te.MAP,e)}getMapInternal(){return this.get(Te.MAP)}setMap(e){this.mapPrecomposeKey_&&(ke(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ke(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Ee(e,pt.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ee(this,oe.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,i=this.getLayerState(!1);Se(!n.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(i)}setSource(e){this.set(Te.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function f1(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}function xR(t,e,n=0,i=t.length-1,r=LG){for(;i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,c=Math.log(l),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*h/l+f)),d=Math.min(i,Math.floor(e+(l-u)*h/l+f));xR(t,e,g,d,r)}const s=t[e];let o=n,a=i;for(Sl(t,n,e),r(t[i],s)>0&&Sl(t,n,i);o<a;){for(Sl(t,o,a),o++,a--;r(t[o],s)<0;)o++;for(;r(t[a],s)>0;)a--}r(t[n],s)===0?Sl(t,n,a):(a++,Sl(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}}function Sl(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function LG(t,e){return t<e?-1:t>e?1:0}let ER=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!oh(e,n))return i;const r=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?r(a):a;oh(e,l)&&(n.leaf?i.push(a):S0(e,l)?this._all(a,i):s.push(a))}n=s.pop()}return i}collides(e){let n=this.data;if(!oh(e,n))return!1;const i=[];for(;n;){for(let r=0;r<n.children.length;r++){const s=n.children[r],o=n.leaf?this.toBBox(s):s;if(oh(e,o)){if(n.leaf||S0(e,o))return!0;i.push(s)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Co([]),this}remove(e,n){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,u;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),i.leaf){const c=kG(e,i.children,n);if(c!==-1)return i.children.splice(c,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&S0(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,r){const s=i-n+1;let o=this._maxEntries,a;if(s<=o)return a=Co(e.slice(n,i+1)),go(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Co([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));qE(e,n,i,u,this.compareMinX);for(let c=n;c<=i;c+=u){const h=Math.min(c+u-1,i);qE(e,c,h,l,this.compareMinY);for(let f=c;f<=h;f+=l){const g=Math.min(f+l-1,h);a.children.push(this._build(e,f,g,r-1))}}return go(a,this.toBBox),a}_chooseSubtree(e,n,i,r){for(;r.push(n),!(n.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const u=n.children[l],c=w0(u),h=NG(e,u)-c;h<o?(o=h,s=c<s?c:s,a=u):h===o&&c<s&&(s=c,a=u)}n=a||n.children[0]}return n}_insert(e,n,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,n,s);for(o.children.push(e),Nl(o,r);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(r,s,n)}_split(e,n){const i=e[n],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=Co(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,go(i,this.toBBox),go(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=Co([e,n]),this.data.height=e.height+1,this.data.leaf=!1,go(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let r,s=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Fl(e,0,a,this.toBBox),u=Fl(e,a,i,this.toBBox),c=GG(l,u),h=w0(l)+w0(u);c<s?(s=c,r=a,o=h<o?h:o):c===s&&h<o&&(o=h,r=a)}return r||i-n}_chooseSplitAxis(e,n,i){const r=e.leaf?this.compareMinX:DG,s=e.leaf?this.compareMinY:FG,o=this._allDistMargin(e,n,i,r),a=this._allDistMargin(e,n,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,n,i,r){e.children.sort(r);const s=this.toBBox,o=Fl(e,0,n,s),a=Fl(e,i-n,i,s);let l=sh(o)+sh(a);for(let u=n;u<i-n;u++){const c=e.children[u];Nl(o,e.leaf?s(c):c),l+=sh(o)}for(let u=i-n-1;u>=n;u--){const c=e.children[u];Nl(a,e.leaf?s(c):c),l+=sh(a)}return l}_adjustParentBBoxes(e,n,i){for(let r=i;r>=0;r--)Nl(n[r],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():go(e[n],this.toBBox)}};function kG(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function go(t,e){Fl(t,0,t.children.length,e,t)}function Fl(t,e,n,i,r){r||(r=Co(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];Nl(r,t.leaf?i(o):o)}return r}function Nl(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function DG(t,e){return t.minX-e.minX}function FG(t,e){return t.minY-e.minY}function w0(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function sh(t){return t.maxX-t.minX+(t.maxY-t.minY)}function NG(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function GG(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function S0(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function oh(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Co(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qE(t,e,n,i,r){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;xR(t,o,e,n,r),s.push(e,o,o,n)}}const pe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},ju={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var St={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};St.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};St.max=St.whitepoint[2].D65;St.rgb=function(t,e){e=e||St.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],r=t[2]/e[2],s,o,a;return s=n*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=n*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};ju.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=n*.41239079926595+i*.35758433938387+r*.18048078840183,o=n*.21263900587151+i*.71516867876775+r*.072192315360733,a=n*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||St.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const d1={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,u,c,h,f,g,d,p;if(s=t[0],o=t[1],a=t[2],s===0)return[0,0,0];var m=.0011070564598794539;return e=e||"D65",n=n||2,h=St.whitepoint[n][e][0],f=St.whitepoint[n][e][1],g=St.whitepoint[n][e][2],d=4*h/(h+15*f+3*g),p=9*f/(h+15*f+3*g),i=o/(13*s)+d||0,r=a/(13*s)+p||0,u=s>8?f*Math.pow((s+16)/116,3):f*s*m,l=u*9*i/(4*r)||0,c=u*(12-3*i-20*r)/(4*r)||0,[l,u,c]}};St.luv=function(t,e,n){var i,r,s,o,a,l,u,c,h,f,g,d,p,m=.008856451679035631,_=903.2962962962961;e=e||"D65",n=n||2,h=St.whitepoint[n][e][0],f=St.whitepoint[n][e][1],g=St.whitepoint[n][e][2],d=4*h/(h+15*f+3*g),p=9*f/(h+15*f+3*g),l=t[0],u=t[1],c=t[2],i=4*l/(l+15*u+3*c)||0,r=9*u/(l+15*u+3*c)||0;var y=u/f;return s=y<=m?_*y:116*Math.pow(y,1/3)-16,o=13*s*(i-d),a=13*s*(r-p),[s,o,a]};var wR={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],r,s,o;return o=i/360*2*Math.PI,r=n*Math.cos(o),s=n*Math.sin(o),[e,r,s]},xyz:function(t){return d1.xyz(wR.luv(t))}};d1.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};St.lchuv=function(t){return d1.lchuv(St.luv(t))};const ZE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var JE={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function UG(t){var c,h;var e,n=[],i=1,r;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),ZE[t])n=ZE[t].slice(),r="rgb";else if(t==="transparent")i=0,r="rgb",n=[0,0,0];else if(t[0]==="#"){var s=t.slice(1),o=s.length,a=o<=4;i=1,a?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];r=l.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=n.shift()),n=n.map(function(f,g){if(f[f.length-1]==="%")return f=parseFloat(f)/100,g===3?f:r==="rgb"?f*255:r[0]==="h"||r[0]==="l"&&!g?f*100:r==="lab"?f*125:r==="lch"?g<2?f*150:f*360:r[0]==="o"&&!g?f:r==="oklab"?f*.4:r==="oklch"?g<2?f*.4:f*360:f;if(r[g]==="h"||g===2&&r[r.length-1]==="h"){if(JE[f]!==void 0)return JE[f];if(f.endsWith("deg"))return parseFloat(f);if(f.endsWith("turn"))return parseFloat(f)*360;if(f.endsWith("grad"))return parseFloat(f)*360/400;if(f.endsWith("rad"))return parseFloat(f)*180/Math.PI}return f==="none"?0:parseFloat(f)}),i=n.length>u?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),r=((h=(c=t.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:n,alpha:i}}const C0={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,s,o,a,l,u=0;if(n===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+n):i+n-i*n,r=2*i-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[u++]=l*255;return a}};ju.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=s-r,a,l,u;return s===r?a=0:e===s?a=(n-i)/o:n===s?a=2+(i-e)/o:i===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(r+s)/2,s===r?l=0:u<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,u*100]};function zG(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=UG(t);if(!n.space)return[];const i=n.space[0]==="h"?C0.min:ju.min,r=n.space[0]==="h"?C0.max:ju.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),n.space[0]==="h"&&(e=C0.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}const g1=[NaN,NaN,NaN,0];function jG(t){return typeof t=="string"?t:p1(t)}const BG=1024,Cl={};let T0=0;function $G(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function QE(t){const e=St.lchuv(ju.xyz(t));return e[3]=t[3],e}function VG(t){const e=St.rgb(wR.xyz(t));return e[3]=t[3],e}function m1(t){if(t==="none")return g1;if(Cl.hasOwnProperty(t))return Cl[t];if(T0>=BG){let n=0;for(const i in Cl)n++&3||(delete Cl[i],--T0)}const e=zG(t);if(e.length!==4)throw new Error('failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('failed to parse "'+t+'" as color');return SR(e),Cl[t]=e,++T0,e}function ss(t){return Array.isArray(t)?t:m1(t)}function SR(t){return t[0]=Ne(t[0]+.5|0,0,255),t[1]=Ne(t[1]+.5|0,0,255),t[2]=Ne(t[2]+.5|0,0,255),t[3]=Ne(t[3],0,1),t}function p1(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const r=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+r+")"}const os=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",XG=os.includes("firefox"),WG=os.includes("safari")&&!os.includes("chrom"),HG=WG&&(os.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(os)),YG=os.includes("webkit")&&!os.includes("edge"),CR=os.includes("macintosh"),TR=typeof devicePixelRatio<"u"?devicePixelRatio:1,y1=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,MR=typeof Image<"u"&&Image.prototype.decode,RR=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function tt(t,e,n,i){let r;return n&&n.length?r=n.shift():y1?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let M0;function Yf(){return M0||(M0=tt(1,1)),M0}function Jd(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function KG(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function qG(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function e2(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function bR(t){for(;t.lastChild;)t.lastChild.remove()}function ZG(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){t.appendChild(s);continue}if(!s){t.removeChild(r),--i;continue}t.insertBefore(s,r)}}}function JG(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[Gf(i,oe.LOAD,function(){o=!0,s||e()})];return i.src&&MR?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():n())})):a.push(Gf(i,oe.ERROR,n)),function(){r=!1,a.forEach(ke)}}function QG(t,e){return new Promise((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s)})}function eU(t,e){return e&&(t.src=e),t.src&&MR?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):QG(t)}class tU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){const r=R0(e,n,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,n,i){const r=R0(e,n,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,i,r,s){const o=R0(e,n,i),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===pe.IDLE&&r.load(),r.getImageState()===pe.LOADING?r.ready().then(()=>{this.patternCache_[o]=Yf().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=Yf().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function R0(t,e,n){const i=n?ss(n):"null";return e+":"+t+":"+i}const Vn=new tU;let Tl=null;class IR extends _c{constructor(e,n,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?pe.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===pe.LOADED){Tl||(Tl=tt(1,1,void 0,{willReadFrequently:!0})),Tl.drawImage(this.image_,0,0);try{Tl.getImageData(0,0,1,1),this.tainted_=!1}catch{Tl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(oe.CHANGE)}handleImageError_(){this.imageState_=pe.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=pe.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=tt(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===pe.IDLE){this.image_||this.initializeImage_(),this.imageState_=pe.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&eU(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==pe.LOADED)return;const n=this.image_,i=tt(Math.ceil(n.width*e),Math.ceil(n.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(n,0,0),i.globalCompositeOperation="multiply",i.fillStyle=jG(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===pe.LOADED||this.imageState_===pe.ERROR)e();else{const n=()=>{(this.imageState_===pe.LOADED||this.imageState_===pe.ERROR)&&(this.removeEventListener(oe.CHANGE,n),e())};this.addEventListener(oe.CHANGE,n)}})),this.ready_}}function _1(t,e,n,i,r,s){let o=e===void 0?void 0:Vn.get(e,n,r);return o||(o=new IR(t,t&&"src"in t?t.src||void 0:e,n,i,r),Vn.set(e,n,r,o,s)),s&&o&&!Vn.getPattern(e,n,r)&&Vn.set(e,n,r,o,s),o}function t2(t){return t[0]>0&&t[1]>0}function nU(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function et(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class Qd{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=et(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Qd({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ae()}getImage(e){return ae()}getHitDetectionImage(){return ae()}getPixelRatio(e){return 1}getImageState(){return ae()}getImageSize(){return ae()}getOrigin(){return ae()}getSize(){return ae()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=et(e)}listenImageChange(e){ae()}load(){ae()}unlistenImageChange(e){ae()}ready(){return Promise.resolve()}}function Oi(t){return t?Array.isArray(t)?p1(t):typeof t=="object"&&"src"in t?iU(t):t:null}function iU(t){if(!t.offset||!t.size)return Vn.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Vn.getPattern(e,void 0,t.color);if(n)return n;const i=Vn.get(t.src,"anonymous",null);if(i.getImageState()!==pe.LOADED)return null;const r=tt(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),_1(r.canvas,e,void 0,pe.LOADED,t.color,!0),Vn.getPattern(e,void 0,t.color)}const ah="ol-hidden",rU="ol-selectable",eg="ol-unselectable",v1="ol-control",n2="ol-collapsed",sU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),i2=["style","variant","weight","size","lineHeight","family"],PR=function(t){const e=t.match(sU);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=i2.length;i<r;++i){const s=e[i+1];s!==void 0&&(n[i2[i]]=s)}return n.families=n.family.split(/,\s?/),n},AR="10px sans-serif",on="#000",ka="round",lr=[],ur=0,Da="round",Bu=10,$u="#000",Vu="center",Kf="middle",Fs=[0,0,0,0],Xu=1,Zi=new gi;let To=null,Sp;const Cp={},oU=function(){const e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let f=!0;for(let g=0;g<i;++g){const d=n[g];if(o=qf(u+" "+c+" "+e+d,r),h!=d){const p=qf(u+" "+c+" "+e+h+","+d,r);f=f&&p!=o}}return!!f}function l(){let u=!0;const c=Zi.getKeys();for(let h=0,f=c.length;h<f;++h){const g=c[h];if(Zi.get(g)<100){const[d,p,m]=g.split(`
`);a(d,p,m)?(ro(Cp),To=null,Sp=void 0,Zi.set(g,100)):(Zi.set(g,Zi.get(g)+1,!0),u=!1)}}u&&(clearInterval(s),s=void 0)}return function(u){const c=PR(u);if(!c)return;const h=c.families;for(let f=0,g=h.length;f<g;++f){const d=h[f],p=c.style+`
`+c.weight+`
`+d;Zi.get(p)===void 0&&(Zi.set(p,100,!0),a(c.style,c.weight,d)||(Zi.set(p,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),aU=function(){let t;return function(e){let n=Cp[e];if(n==null){if(y1){const i=PR(e),r=OR(e,"g");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Cp[e]=n}return n}}();function OR(t,e){return To||(To=tt(1,1)),t!=Sp&&(To.font=t,Sp=To.font),To.measureText(e)}function qf(t,e){return OR(t,e).width}function r2(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,qf(t,s)),0);return n[e]=i,i}function lU(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const f=e[u+1]||t.font,g=qf(f,h);n.push(g),o+=g;const d=aU(f);i.push(d),l=Math.max(l,d)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function uU(t,e,n,i,r,s,o,a,l,u,c){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),cU(i,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,u,o*c[0],a*c[1]),t.restore()}function cU(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class tg extends Qd{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?pe.LOADING:pe.LOADED,this.imageState_===pe.LOADING&&this.ready().then(()=>this.imageState_=pe.LOADED),this.render()}clone(){const e=this.getScale(),n=new tg({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,o;const n=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let r=(o=Vn.get(i,null,null))==null?void 0:o.getImage(1);if(!r){const a=this.renderOptions_,l=Math.ceil(a.size*e),u=tt(l,l);this.draw_(a,u,e),r=u.canvas,Vn.set(i,null,null,new IR(r,void 0,null,pe.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const w=r;r=s,s=w}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=r-u,h=Math.sqrt(l*l+c*c),f=h/l;if(e==="miter"&&f<=i)return f*n;const g=n/2/f,d=n/2*(c/h),m=Math.sqrt((r+g)*(r+g)+d*d)-r;if(this.radius2_===void 0||e==="bevel")return m*2;const _=r*Math.sin(a),y=Math.sqrt(r*r-_*_),v=s-y,E=Math.sqrt(_*_+v*v)/_;if(E<=i){const w=E*n/2-s-r;return 2*Math.max(m,w)}return m*2}createRenderOptions(){let e=ka,n=Da,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=Oi(this.stroke_.getColor()??$u),a=this.stroke_.getWidth()??Xu,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Da,e=this.stroke_.getLineCap()??ka,i=this.stroke_.getMiterLimit()??Bu);const l=this.calculateLineJoinSize_(n,a,i),u=Math.max(this.radius,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=on),n.fillStyle=Oi(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=ss(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=tt(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,u=a%2===0?i:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=on,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class il extends tg{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new il({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class Vi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Vi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=_1(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===pe.IDLE&&n.load(),n.getImageState()===pe.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?le(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:ss(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class cr{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new cr({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class cn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=s2,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new cn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=s2,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function hU(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(Se(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let b0=null;function LR(t,e){if(!b0){const n=new Vi({color:"rgba(255,255,255,0.4)"}),i=new cr({color:"#3399CC",width:1.25});b0=[new cn({image:new il({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return b0}function kR(){const t={},e=[255,255,255,1],n=[0,153,255,1],i=3;return t.Polygon=[new cn({fill:new Vi({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new cn({stroke:new cr({color:e,width:i+2})}),new cn({stroke:new cr({color:n,width:i})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new cn({image:new il({radius:i*2,fill:new Vi({color:n}),stroke:new cr({color:e,width:i/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function s2(t){return t.getGeometry()}function o2(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class wc extends Qd{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Se(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||le(o)),Se(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Se(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=pe.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?pe.LOADED:pe.IDLE:l=pe.LOADING:l=pe.LOADED),this.color_=e.color!==void 0?ss(e.color):null,this.iconImage_=_1(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(o2(g[0],g[1],e.width,e.height))};this.listenImageChange(f);return}}u!==void 0&&this.setScale(o2(u,c,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new wc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==pe.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==pe.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(oe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(oe.CHANGE,e)}ready(){return this.iconImage_.ready()}}const fU="#333";class x1{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=et(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Vi({color:fU}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new x1({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=et(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let ao=0;const Nt=1<<ao++,fe=1<<ao++,Wt=1<<ao++,Sn=1<<ao++,as=1<<ao++,Ho=1<<ao++,lh=Math.pow(2,ao)-1,E1={[Nt]:"boolean",[fe]:"number",[Wt]:"string",[Sn]:"color",[as]:"number[]",[Ho]:"size"},dU=Object.keys(E1).map(Number).sort(or);function gU(t){return t in E1}function Yo(t){const e=[];for(const n of dU)Gl(t,n)&&e.push(E1[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Gl(t,e){return(t&e)===e}function Tr(t,e){return t===e}class at{constructor(e,n){if(!gU(e))throw new Error(`literal expressions must have a specific type, got ${Yo(e)}`);this.type=e,this.value=n}}class DR{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function w1(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function yt(t,e,n){switch(typeof t){case"boolean":{if(Tr(e,Wt))return new at(Wt,t?"true":"false");if(!Gl(e,Nt))throw new Error(`got a boolean, but expected ${Yo(e)}`);return new at(Nt,t)}case"number":{if(Tr(e,Ho))return new at(Ho,et(t));if(Tr(e,Nt))return new at(Nt,!!t);if(Tr(e,Wt))return new at(Wt,t.toString());if(!Gl(e,fe))throw new Error(`got a number, but expected ${Yo(e)}`);return new at(fe,t)}case"string":{if(Tr(e,Sn))return new at(Sn,m1(t));if(Tr(e,Nt))return new at(Nt,!!t);if(!Gl(e,Wt))throw new Error(`got a string, but expected ${Yo(e)}`);return new at(Wt,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return TU(t,e,n);for(const i of t)if(typeof i!="number")throw new Error("expected an array of numbers");if(Tr(e,Ho)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new at(Ho,t)}if(Tr(e,Sn)){if(t.length===3)return new at(Sn,[...t,1]);if(t.length===4)return new at(Sn,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Gl(e,as))throw new Error(`got an array of numbers, but expected ${Yo(e)}`);return new at(as,t)}const b={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},mU={[b.Get]:ue(ge(1,1/0),a2),[b.Var]:ue(ge(1,1),pU),[b.Has]:ue(ge(1,1/0),a2),[b.Id]:ue(yU,mo),[b.Concat]:ue(ge(2,1/0),Me(Wt)),[b.GeometryType]:ue(_U,mo),[b.LineMetric]:ue(mo),[b.Resolution]:ue(mo),[b.Zoom]:ue(mo),[b.Time]:ue(mo),[b.Any]:ue(ge(2,1/0),Me(Nt)),[b.All]:ue(ge(2,1/0),Me(Nt)),[b.Not]:ue(ge(1,1),Me(Nt)),[b.Equal]:ue(ge(2,2),Me(lh)),[b.NotEqual]:ue(ge(2,2),Me(lh)),[b.GreaterThan]:ue(ge(2,2),Me(fe)),[b.GreaterThanOrEqualTo]:ue(ge(2,2),Me(fe)),[b.LessThan]:ue(ge(2,2),Me(fe)),[b.LessThanOrEqualTo]:ue(ge(2,2),Me(fe)),[b.Multiply]:ue(ge(2,1/0),l2),[b.Coalesce]:ue(ge(2,1/0),l2),[b.Divide]:ue(ge(2,2),Me(fe)),[b.Add]:ue(ge(2,1/0),Me(fe)),[b.Subtract]:ue(ge(2,2),Me(fe)),[b.Clamp]:ue(ge(3,3),Me(fe)),[b.Mod]:ue(ge(2,2),Me(fe)),[b.Pow]:ue(ge(2,2),Me(fe)),[b.Abs]:ue(ge(1,1),Me(fe)),[b.Floor]:ue(ge(1,1),Me(fe)),[b.Ceil]:ue(ge(1,1),Me(fe)),[b.Round]:ue(ge(1,1),Me(fe)),[b.Sin]:ue(ge(1,1),Me(fe)),[b.Cos]:ue(ge(1,1),Me(fe)),[b.Atan]:ue(ge(1,2),Me(fe)),[b.Sqrt]:ue(ge(1,1),Me(fe)),[b.Match]:ue(ge(4,1/0),u2,xU),[b.Between]:ue(ge(3,3),Me(fe)),[b.Interpolate]:ue(ge(6,1/0),u2,EU),[b.Case]:ue(ge(3,1/0),vU,wU),[b.In]:ue(ge(2,2),SU),[b.Number]:ue(ge(1,1/0),Me(lh)),[b.String]:ue(ge(1,1/0),Me(lh)),[b.Array]:ue(ge(1,1/0),Me(fe)),[b.Color]:ue(ge(1,4),Me(fe)),[b.Band]:ue(ge(1,3),Me(fe)),[b.Palette]:ue(ge(2,2),CU),[b.ToString]:ue(ge(1,1),Me(Nt|fe|Wt|Sn))};function a2(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=t[s+1];switch(typeof o){case"number":{r[s]=new at(fe,o);break}case"string":{r[s]=new at(Wt,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return r}function pU(t,e,n){const i=t[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return n.variables.add(i),[new at(Wt,i)]}function yU(t,e,n){n.featureId=!0}function _U(t,e,n){n.geometryType=!0}function mo(t,e,n){const i=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ge(t,e){return function(n,i,r){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${s}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function l2(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const o=yt(t[s+1],e,n);r[s]=o}return r}function Me(t){return function(e,n,i){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=yt(e[o+1],t,i);s[o]=a}return s}}function vU(t,e,n){const i=t[0],r=t.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function u2(t,e,n){const i=t[0],r=t.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function xU(t,e,n){const i=t.length-1,r=Wt|fe|Nt,s=yt(t[1],r,n),o=yt(t[t.length-1],e,n),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const u=yt(t[l+2],s.type,n);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=yt(t[l+3],o.type,n);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...a,o]}function EU(t,e,n){const i=t[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new at(fe,r);let o;try{o=yt(t[2],fe,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const u=yt(t[l+3],fe,n);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=yt(t[l+4],e,n);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,o,...a]}function wU(t,e,n){const i=yt(t[t.length-1],e,n),r=new Array(t.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=yt(t[s+1],Nt,n);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=yt(t[s+2],i.type,n);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=i,r}function SU(t,e,n){let i=t[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Wt}else r=fe;const s=new Array(i.length);for(let a=0;a<s.length;a++)try{const l=yt(i[a],r,n);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[yt(t[1],r,n),...s]}function CU(t,e,n){let i;try{i=yt(t[1],fe,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=yt(r[o],Sn,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof at))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[i,...s]}function ue(...t){return function(e,n,i){const r=e[0];let s;for(let o=0;o<t.length;o++){const a=t[o](e,n,i);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new DR(n,r,...s)}}function TU(t,e,n){const i=t[0],r=mU[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(t,e,n)}function FR(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return FR(t.getGeometries()[0]);default:return""}}function NR(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function wr(t,e,n){const i=yt(t,e,n);return hi(i)}function hi(t,e){if(t instanceof at){if(t.type===Sn&&typeof t.value=="string"){const i=m1(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case b.Number:case b.String:case b.Coalesce:return MU(t);case b.Get:case b.Var:case b.Has:return RU(t);case b.Id:return i=>i.featureId;case b.GeometryType:return i=>i.geometryType;case b.Concat:{const i=t.args.map(r=>hi(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case b.Resolution:return i=>i.resolution;case b.Any:case b.All:case b.Between:case b.In:case b.Not:return IU(t);case b.Equal:case b.NotEqual:case b.LessThan:case b.LessThanOrEqualTo:case b.GreaterThan:case b.GreaterThanOrEqualTo:return bU(t);case b.Multiply:case b.Divide:case b.Add:case b.Subtract:case b.Clamp:case b.Mod:case b.Pow:case b.Abs:case b.Floor:case b.Ceil:case b.Round:case b.Sin:case b.Cos:case b.Atan:case b.Sqrt:return PU(t);case b.Case:return AU(t);case b.Match:return OU(t);case b.Interpolate:return LU(t);case b.ToString:return kU(t);default:throw new Error(`Unsupported operator ${n}`)}}function MU(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=hi(t.args[s]);switch(n){case b.Coalesce:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case b.Number:case b.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function RU(t,e){const i=t.args[0].value;switch(t.operator){case b.Get:return r=>{const s=t.args;let o=r.properties[i];for(let a=1,l=s.length;a<l;++a){const c=s[a].value;o=o[c]}return o};case b.Var:return r=>r.variables[i];case b.Has:return r=>{const s=t.args;if(!(i in r.properties))return!1;let o=r.properties[i];for(let a=1,l=s.length;a<l;++a){const c=s[a].value;if(!o||!Object.hasOwn(o,c))return!1;o=o[c]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function bU(t,e){const n=t.operator,i=hi(t.args[0]),r=hi(t.args[1]);switch(n){case b.Equal:return s=>i(s)===r(s);case b.NotEqual:return s=>i(s)!==r(s);case b.LessThan:return s=>i(s)<r(s);case b.LessThanOrEqualTo:return s=>i(s)<=r(s);case b.GreaterThan:return s=>i(s)>r(s);case b.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function IU(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=hi(t.args[s]);switch(n){case b.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case b.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case b.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case b.In:return s=>{const o=r[0](s);for(let a=1;a<i;++a)if(o===r[a](s))return!0;return!1};case b.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function PU(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=hi(t.args[s]);switch(n){case b.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case b.Divide:return s=>r[0](s)/r[1](s);case b.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case b.Subtract:return s=>r[0](s)-r[1](s);case b.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case b.Mod:return s=>r[0](s)%r[1](s);case b.Pow:return s=>Math.pow(r[0](s),r[1](s));case b.Abs:return s=>Math.abs(r[0](s));case b.Floor:return s=>Math.floor(r[0](s));case b.Ceil:return s=>Math.ceil(r[0](s));case b.Round:return s=>Math.round(r[0](s));case b.Sin:return s=>Math.sin(r[0](s));case b.Cos:return s=>Math.cos(r[0](s));case b.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case b.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function AU(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=hi(t.args[r]);return r=>{for(let s=0;s<n-1;s+=2)if(i[s](r))return i[s+1](r);return i[n-1](r)}}function OU(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=hi(t.args[r]);return r=>{const s=i[0](r);for(let o=1;o<n;o+=2)if(s===i[o](r))return i[o+1](r);return i[n-1](r)}}function LU(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=hi(t.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let u=2;u<n;u+=2){const c=i[u](r);let h=i[u+1](r);const f=Array.isArray(h);if(f&&(h=$G(h)),c>=o)return u===2?h:f?DU(s,o,a,l,c,h):Ul(s,o,a,l,c,h);a=c,l=h}return l}}function kU(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=hi(t.args[s]);switch(n){case b.ToString:return s=>{const o=r[0](s);return t.args[0].type===Sn?p1(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Ul(t,e,n,i,r,s){const o=r-n;if(o===0)return i;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(s-i)}function DU(t,e,n,i,r,s){if(r-n===0)return i;const a=QE(i),l=QE(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[Ul(t,e,n,a[0],r,l[0]),Ul(t,e,n,a[1],r,l[1]),a[2]+Ul(t,e,n,0,r,u),Ul(t,e,n,i[3],r,s[3])];return SR(VG(c))}function FU(t){return!0}function NU(t){const e=w1(),n=GU(t,e),i=NR();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=FR(r.getGeometry())),n(i)}}function c2(t){const e=w1(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Tp(t[o],e);const r=NR(),s=new Array(n);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<n;++u){const c=i[u](r);c&&(s[l]=c,l+=1)}return s.length=l,s}}function GU(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const s=t[r],o="filter"in s?wr(s.filter,Nt,e):FU;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=Tp(s.style[u],e)}else a=[Tp(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(r)&&!(t[a].else&&o)){o=!0;for(const u of i[a].styles){const c=u(r);c&&s.push(c)}}}return s}}function Tp(t,e){const n=Wu(t,"",e),i=Hu(t,"",e),r=UU(t,e),s=zU(t,e),o=ln(t,"z-index",e);if(!n&&!i&&!r&&!s&&!Zs(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new cn;return function(l){let u=!0;if(n){const c=n(l);c&&(u=!1),a.setFill(c)}if(i){const c=i(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function Wu(t,e,n){let i;if(e+"fill-pattern-src"in t)i=VU(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;i=S1(t,e+"fill-color",n)}if(!i)return null;const r=new Vi;return function(s){const o=i(s);return o===g1?null:(r.setColor(o),r)}}function Hu(t,e,n){const i=ln(t,e+"stroke-width",n),r=S1(t,e+"stroke-color",n);if(!i&&!r)return null;const s=nr(t,e+"stroke-line-cap",n),o=nr(t,e+"stroke-line-join",n),a=GR(t,e+"stroke-line-dash",n),l=ln(t,e+"stroke-line-dash-offset",n),u=ln(t,e+"stroke-miter-limit",n),c=new cr;return function(h){if(r){const f=r(h);if(f===g1)return null;c.setColor(f)}if(i&&c.setWidth(i(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function UU(t,e){const n="text-",i=nr(t,n+"value",e);if(!i)return null;const r=Wu(t,n,e),s=Wu(t,n+"background-",e),o=Hu(t,n,e),a=Hu(t,n+"background-",e),l=nr(t,n+"font",e),u=ln(t,n+"max-angle",e),c=ln(t,n+"offset-x",e),h=ln(t,n+"offset-y",e),f=fa(t,n+"overflow",e),g=nr(t,n+"placement",e),d=ln(t,n+"repeat",e),p=ng(t,n+"scale",e),m=fa(t,n+"rotate-with-view",e),_=ln(t,n+"rotation",e),y=nr(t,n+"align",e),v=nr(t,n+"justify",e),x=nr(t,n+"baseline",e),E=fa(t,n+"keep-upright",e),w=GR(t,n+"padding",e),C=ig(t,n+"declutter-mode"),S=new x1({declutterMode:C});return function(R){if(S.setText(i(R)),r&&S.setFill(r(R)),s&&S.setBackgroundFill(s(R)),o&&S.setStroke(o(R)),a&&S.setBackgroundStroke(a(R)),l&&S.setFont(l(R)),u&&S.setMaxAngle(u(R)),c&&S.setOffsetX(c(R)),h&&S.setOffsetY(h(R)),f&&S.setOverflow(f(R)),g){const M=g(R);if(M!=="point"&&M!=="line")throw new Error("Expected point or line for text-placement");S.setPlacement(M)}if(d&&S.setRepeat(d(R)),p&&S.setScale(p(R)),m&&S.setRotateWithView(m(R)),_&&S.setRotation(_(R)),y){const M=y(R);if(M!=="left"&&M!=="center"&&M!=="right"&&M!=="end"&&M!=="start")throw new Error("Expected left, right, center, start, or end for text-align");S.setTextAlign(M)}if(v){const M=v(R);if(M!=="left"&&M!=="right"&&M!=="center")throw new Error("Expected left, right, or center for text-justify");S.setJustify(M)}if(x){const M=x(R);if(M!=="bottom"&&M!=="top"&&M!=="middle"&&M!=="alphabetic"&&M!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");S.setTextBaseline(M)}return w&&S.setPadding(w(R)),E&&S.setKeepUpright(E(R)),S}}function zU(t,e){return"icon-src"in t?jU(t,e):"shape-points"in t?BU(t,e):"circle-radius"in t?$U(t,e):null}function jU(t,e){const n="icon-",i=n+"src",r=UR(t[i],i),s=Zf(t,n+"anchor",e),o=ng(t,n+"scale",e),a=ln(t,n+"opacity",e),l=Zf(t,n+"displacement",e),u=ln(t,n+"rotation",e),c=fa(t,n+"rotate-with-view",e),h=f2(t,n+"anchor-origin"),f=d2(t,n+"anchor-x-units"),g=d2(t,n+"anchor-y-units"),d=YU(t,n+"color"),p=WU(t,n+"cross-origin"),m=HU(t,n+"offset"),_=f2(t,n+"offset-origin"),y=Jf(t,n+"width"),v=Jf(t,n+"height"),x=XU(t,n+"size"),E=ig(t,n+"declutter-mode"),w=new wc({src:r,anchorOrigin:h,anchorXUnits:f,anchorYUnits:g,color:d,crossOrigin:p,offset:m,offsetOrigin:_,height:v,width:y,size:x,declutterMode:E});return function(C){return a&&w.setOpacity(a(C)),l&&w.setDisplacement(l(C)),u&&w.setRotation(u(C)),c&&w.setRotateWithView(c(C)),o&&w.setScale(o(C)),s&&w.setAnchor(s(C)),w}}function BU(t,e){const n="shape-",i=n+"points",r=n+"radius",s=Mp(t[i],i),o=Mp(t[r],r),a=Wu(t,n,e),l=Hu(t,n,e),u=ng(t,n+"scale",e),c=Zf(t,n+"displacement",e),h=ln(t,n+"rotation",e),f=fa(t,n+"rotate-with-view",e),g=Jf(t,n+"radius2"),d=Jf(t,n+"angle"),p=ig(t,n+"declutter-mode"),m=new tg({points:s,radius:o,radius2:g,angle:d,declutterMode:p});return function(_){return a&&m.setFill(a(_)),l&&m.setStroke(l(_)),c&&m.setDisplacement(c(_)),h&&m.setRotation(h(_)),f&&m.setRotateWithView(f(_)),u&&m.setScale(u(_)),m}}function $U(t,e){const n="circle-",i=Wu(t,n,e),r=Hu(t,n,e),s=ln(t,n+"radius",e),o=ng(t,n+"scale",e),a=Zf(t,n+"displacement",e),l=ln(t,n+"rotation",e),u=fa(t,n+"rotate-with-view",e),c=ig(t,n+"declutter-mode"),h=new il({radius:5,declutterMode:c});return function(f){return s&&h.setRadius(s(f)),i&&h.setFill(i(f)),r&&h.setStroke(r(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),u&&h.setRotateWithView(u(f)),o&&h.setScale(o(f)),h}}function ln(t,e,n){if(!(e in t))return;const i=wr(t[e],fe,n);return function(r){return Mp(i(r),e)}}function nr(t,e,n){if(!(e in t))return null;const i=wr(t[e],Wt,n);return function(r){return UR(i(r),e)}}function VU(t,e,n){const i=nr(t,e+"pattern-src",n),r=h2(t,e+"pattern-offset",n),s=h2(t,e+"pattern-size",n),o=S1(t,e+"color",n);return function(a){return{src:i(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function fa(t,e,n){if(!(e in t))return null;const i=wr(t[e],Nt,n);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function S1(t,e,n){if(!(e in t))return null;const i=wr(t[e],Sn,n);return function(r){return zR(i(r),e)}}function GR(t,e,n){if(!(e in t))return null;const i=wr(t[e],as,n);return function(r){return Sc(i(r),e)}}function Zf(t,e,n){if(!(e in t))return null;const i=wr(t[e],as,n);return function(r){const s=Sc(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function h2(t,e,n){if(!(e in t))return null;const i=wr(t[e],as,n);return function(r){return jR(i(r),e)}}function ng(t,e,n){if(!(e in t))return null;const i=wr(t[e],as|fe,n);return function(r){return KU(i(r),e)}}function Jf(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function XU(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return et(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function WU(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function f2(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function d2(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function HU(t,e){const n=t[e];if(n!==void 0)return Sc(n,e)}function ig(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function YU(t,e){const n=t[e];if(n!==void 0)return zR(n,e)}function Sc(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function UR(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function Mp(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function zR(t,e){if(typeof t=="string")return t;const n=Sc(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function jR(t,e){const n=Sc(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function KU(t,e){return typeof t=="number"?t:jR(t,e)}const g2={RENDER_ORDER:"renderOrder"};class BR extends Zd{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(g2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new ER(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(g2.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?LR:e;const n=qU(e);this.styleFunction_=e===null?void 0:hU(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function qU(t){if(t===void 0)return LR;if(!t)return null;if(typeof t=="function"||t instanceof cn)return t;if(!Array.isArray(t))return c2([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof cn){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof cn))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in n){const r=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return NU(r)}return c2(t)}class ZU extends yc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){ae()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;ci(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),t1(r,i)}forEachFeatureAtCoordinate(e,n,i,r,s,o,a,l){let u;const c=n.viewState;function h(x,E,w,C){return s.call(o,E,x?w:null,C)}const f=c.projection,g=ZM(e.slice(),f),d=[[0,0]];if(f.canWrapX()&&r){const x=f.getExtent(),E=ve(x);d.push([-E,0],[E,0])}const p=n.layerStatesArray,m=p.length,_=[],y=[];for(let x=0;x<d.length;x++)for(let E=m-1;E>=0;--E){const w=p[E],C=w.layer;if(C.hasRenderer()&&f1(w,c)&&a.call(l,C)){const S=C.getRenderer(),R=C.getSource();if(S&&R){const M=R.getWrapX()?g:e,k=h.bind(null,w.managed);y[0]=M[0]+d[x][0],y[1]=M[1]+d[x][1],u=S.forEachFeatureAtCoordinate(y,n,i,k,_)}if(u)return u}}if(_.length===0)return;const v=1/_.length;return _.forEach((x,E)=>x.distanceSq+=E*v),_.sort((x,E)=>x.distanceSq-E.distanceSq),_.some(x=>u=x.callback(x.feature,x.layer,x.geometry)),u}hasFeatureAtCoordinate(e,n,i,r,s,o){return this.forEachFeatureAtCoordinate(e,n,i,r,is,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ae()}scheduleExpireIconCache(e){Vn.canExpireCache()&&e.postRenderFunctions.push(JU)}}function JU(t,e){Vn.expire()}class su extends di{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}}class QU extends ZU{constructor(e){super(e),this.fontChangeListenerKey_=Ee(Zi,Pa.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=eg+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const r=new su(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){ke(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(pt.PRECOMPOSE,e);const n=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);n.some(a=>a.layer instanceof BR&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=n.length;a<l;++a){const u=n[a];e.layerIndex=a;const c=u.layer,h=c.getSourceState();if(!f1(u,r)||h!="ready"&&h!="undefined"){c.unrender();continue}const f=c.render(e,o);f&&(f!==o&&(this.children_.push(f),o=f),s.push(u))}this.declutter(e,s),ZG(this.element_,this.children_),this.dispatchRenderEvent(pt.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){const r=n[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}n.forEach(i=>i.layer.renderDeferred(e))}}}class kr extends di{constructor(e,n){super(e),this.layer=n}}const I0={LAYERS:"layers"};class rl extends VM{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(I0.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new ri(i.slice(),{unique:!0}):Se(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new ri(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ke),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Ee(e,mt.ADD,this.handleLayersAdd_,this),Ee(e,mt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ke);ro(this.listenerKeys_);const n=e.getArray();for(let i=0,r=n.length;i<r;i++){const s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new kr("addlayer",s))}this.changed()}registerLayerListeners_(e){const n=[Ee(e,Pa.PROPERTYCHANGE,this.handleLayerChange_,this),Ee(e,oe.CHANGE,this.handleLayerChange_,this)];e instanceof rl&&n.push(Ee(e,"addlayer",this.handleLayerGroupAdd_,this),Ee(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[le(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new kr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new kr("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new kr("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=le(n);this.listenerKeys_[i].forEach(ke),delete this.listenerKeys_[i],this.dispatchEvent(new kr("removelayer",n)),this.changed()}getLayers(){return this.get(I0.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new kr("removelayer",i[r]))}this.set(I0.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Kt(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}}class Mo extends di{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class Qi extends Mo{constructor(e,n,i,r,s,o){super(e,n,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ie={SINGLECLICK:"singleclick",CLICK:oe.CLICK,DBLCLICK:oe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Rp={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class e9 extends _c{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ee(i,Rp.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ee(i,Rp.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(oe.TOUCHMOVE,this.boundHandleTouchMove_,RR?{passive:!1}:!1)}emulateClick_(e){let n=new Qi(Ie.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Qi(Ie.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Qi(Ie.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==Ie.POINTERUP||n.type==Ie.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==Ie.POINTERDOWN||n.type==Ie.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Qi(Ie.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Qi(Ie.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ee(i,Ie.POINTERMOVE,this.handlePointerMove_,this),Ee(i,Ie.POINTERUP,this.handlePointerUp_,this),Ee(this.element_,Ie.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Ee(this.element_.getRootNode(),Ie.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Qi(Ie.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Qi(Ie.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ke(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(oe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ke(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ke),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const er={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Lt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Qf=1/0;class t9{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ro(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Se(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=Qf?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,r=n.length,s=n[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&i[u]<i[l]?u:l;n[e]=n[c],i[e]=i[c],e=c}n[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,r=this.priorities_,s=i[n],o=r[n];for(;n>e;){const a=this.getParentIndex_(n);if(r[a]>o)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=s,r[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let r=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==Qf?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,n[r++]=o);n.length=r,i.length=r,this.heapify_()}}const Y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class n9 extends t9{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(oe.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===Y.LOADED||i===Y.ERROR||i===Y.EMPTY){i!==Y.ERROR&&n.removeEventListener(oe.CHANGE,this.boundHandleTileChange_);const r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===Y.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}}function i9(t,e,n,i,r){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return Qf;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}let C1=class extends gi{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var n;this.map_&&((n=this.element)==null||n.remove());for(let i=0,r=this.listenerKeys.length;i<r;++i)ke(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==Aa&&this.listenerKeys.push(Ee(e,er.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}};class r9 extends C1{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(oe.CLICK,this.handleClick_.bind(this),!1);const u=n+" "+eg+" "+v1+(this.collapsed_&&this.collapsible_?" "+n2:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),i=new Set(n.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!n.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(r=>$M(()=>r))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!vs(n,this.renderedAttributions_)){bR(this.ulElement_);for(let r=0,s=n.length;r<s;++r){const o=document.createElement("li");o.innerHTML=n[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(n2),this.collapsed_?e2(this.collapseLabel_,this.label_):e2(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class s9 extends C1{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(oe.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+eg+" "+v1,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ah)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:nl}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(ah);!s&&i===0?this.element.classList.add(ah):s&&i!==0&&this.element.classList.remove(ah)}this.label_.style.transform=r}this.rotation_=i}}class o9 extends C1{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(oe.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(oe.CLICK,this.handleClick_.bind(this,-i),!1);const f=n+" "+eg+" "+v1,g=this.element;g.className=f,g.appendChild(c),g.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:nl})):i.setZoom(s)}}}function a9(t){t=t||{};const e=new ri;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new o9(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new s9(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new r9(t.attributionOptions)),e}const bp={ACTIVE:"active"};class sl extends gi{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(bp.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(bp.ACTIVE,e)}setMap(e){this.map_=e}}function l9(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:lG,center:t.getConstrainedCenter(r)})}}function T1(t,e,n,i){const r=t.getZoom();if(r===void 0)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:nl})}class u9 extends sl{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==Ie.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();T1(a,o,s,this.duration_),i.preventDefault(),n=!0}return!n}}class ol extends sl{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ie.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ie.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ie.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==Ie.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function M1(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}function Ip(t){const e=arguments;return function(n){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](n),!!i);++r);return i}}const c9=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},h9=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),i=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(i):e.contains(i)},$R=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?h9(t):!0},Pp=is,VR=function(t){const e=t.originalEvent;return e.button==0&&!(YG&&CR&&e.ctrlKey)},Ap=Qa,f9=function(t){return t.type==Ie.SINGLECLICK},R1=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},d9=function(t){const e=t.originalEvent;return CR?e.metaKey:e.ctrlKey},b1=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},XR=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},P0=function(t){const e=t.originalEvent;return Se(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},g9=function(t){const e=t.originalEvent;return Se(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class m9 extends ol{constructor(e){super({stopDown:Qa}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:Ip(R1,g9);this.condition_=e.onFocusOnly?Ip($R,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,r=n.getEventPixel(M1(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();k8(s,a.getResolution()),V_(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:nl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class p9 extends ol{constructor(e){e=e||{},super({stopDown:Qa}),this.condition_=e.condition?e.condition:c9,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!P0(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===Q_)return;const r=n.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return P0(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return P0(e)&&VR(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class y9 extends yc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new $i([r])}getGeometry(){return this.geometry_}}const po={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ml extends di{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class _9 extends ol{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new y9(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??VR,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const r=i[0]-n[0],s=i[1]-n[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ml(po.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new Ml(n?po.BOXEND:po.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ml(po.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ml(po.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ml(po.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class v9 extends _9{constructor(e){e=e||{};const n=e.condition?e.condition:b1;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:nl})}}const Cs={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class x9 extends sl{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return R1(n)&&XR(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==oe.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Cs.DOWN||r==Cs.LEFT||r==Cs.RIGHT||r==Cs.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;r==Cs.DOWN?u=-a:r==Cs.LEFT?l=-a:r==Cs.RIGHT?l=a:u=a;const c=[l,u];V_(c,o.getRotation()),l9(o,c,this.duration_),i.preventDefault(),n=!0}}return!n}}class E9 extends sl{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!d9(n)&&XR(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==oe.KEYDOWN||e.type==oe.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();T1(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class w9{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class S9 extends sl{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:Pp;this.condition_=e.onFocusOnly?Ip($R,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==oe.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==oe.WHEEL&&(s=r.deltaY,XG&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=TR),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-Ne(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),T1(n,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class C9 extends ol{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Qa),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Q_&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(M1(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class T9 extends ol{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Qa),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(M1(this.targetPointers))),l.render(),u.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function M9(t){t=t||{};const e=new ri,n=new w9(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new p9),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new u9({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new m9({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new C9),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new T9({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new x9),e.push(new E9({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new S9({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new v9({duration:t.zoomDuration})),e}function WR(t){if(t instanceof Zd){t.setMapInternal(null);return}t instanceof rl&&t.getLayers().forEach(WR)}function HR(t,e){if(t instanceof Zd){t.setMapInternal(e);return}if(t instanceof rl){const n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)HR(n[i],e)}}let I1=class extends gi{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=R9(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:TR,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ut(),this.pixelToCoordinateTransform_=Ut(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||a9(),this.interactions=n.interactions||M9({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new n9(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Lt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Lt.VIEW,this.handleViewChanged_),this.addChangeListener(Lt.SIZE,this.handleSizeChanged_),this.addChangeListener(Lt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof jn)&&e.view.then(function(r){i.setView(new jn(r))}),this.controls.addEventListener(mt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(mt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(mt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(mt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(mt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(mt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){HR(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:is,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(r){r instanceof rl?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.layerFilter!==void 0?n.layerFilter:is,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Lt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Xf(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?it(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Lt.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof ri){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=ti(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?it(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Lt.SIZE)}getView(){return this.get(Lt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return i9(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;const i=new Qi(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===Rp.POINTERDOWN||i===oe.WHEEL||i===oe.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=n.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[Dt.ANIMATING]||o[Dt.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(pt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(pt.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Mo(er.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Mo(er.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)ke(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(oe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(oe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new QU(this)),this.mapBrowserEventHandler_=new e9(this,this.moveTolerance_);for(const s in Ie)this.mapBrowserEventHandler_.addEventListener(Ie[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(oe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(oe.WHEEL,this.boundHandleBrowserEvent_,RR?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=n.getRootNode();i=s instanceof ShadowRoot?s.host:n}this.targetChangeHandlerKeys_=[Ee(i,oe.KEYDOWN,this.handleBrowserEvent,this),Ee(i,oe.KEYPRESS,this.handleBrowserEvent,this)];const r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ke(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ke(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ee(e,Pa.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ee(e,oe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ke),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new kr("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Ee(e,Pa.PROPERTYCHANGE,this.render,this),Ee(e,oe.CHANGE,this.render,this),Ee(e,"addlayer",this.handleLayerAdd_,this),Ee(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){WR(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(n!==void 0&&t2(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:_p(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:le(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=_p(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!tl(this.previousExtent_)&&!Du(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Mo(er.MOVESTART,this,r)),this.previousExtent_=el(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Dt.ANIMATING]&&!s.viewHints[Dt.INTERACTING]&&!Du(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Mo(er.MOVEEND,this,s)),XM(s.extent,this.previousExtent_))),this.dispatchEvent(new Mo(er.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(er.LOADSTART)||this.hasListener(er.LOADEND)||this.hasListener(pt.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new kr("removelayer",n)),this.set(Lt.LAYERGROUP,e)}setSize(e){this.set(Lt.SIZE,e)}setTarget(e){this.set(Lt.TARGET,e)}setView(e){if(!e||e instanceof jn){this.set(Lt.VIEW,e);return}this.set(Lt.VIEW,new jn);const n=this;e.then(function(i){n.setView(new jn(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(n=[Math.max(0,s),Math.max(0,o)],!t2(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&oR("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!vs(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function R9(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new rl({layers:t.layers});n[Lt.LAYERGROUP]=i,n[Lt.TARGET]=t.target,n[Lt.VIEW]=t.view instanceof jn?t.view:new jn;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new ri(t.controls.slice()):(Se(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new ri(t.interactions.slice()):(Se(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new ri(t.overlays.slice()):(Se(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new ri,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const uh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class YR extends Zd{constructor(e){e=e||{};const n=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(uh.PRELOAD)}setPreload(e){this.set(uh.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(uh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(uh.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const KR=.5;class P1 extends _c{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(oe.CHANGE)}release(){this.state===Y.ERROR&&this.setState(Y.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Y.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ae()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=n-i+1e3/60;return r>=this.transition_?1:lR(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Fa(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function Op(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}const b9=new Error("disposed");let yo=null;function I9(t){yo||(yo=tt(t.width,t.height,void 0,{willReadFrequently:!0}));const e=yo.canvas,n=t.width;e.width!==n&&(e.width=n);const i=t.height;return e.height!==i&&(e.height=i),yo.clearRect(0,0,n,i),yo.drawImage(t,0,0),yo.getImageData(0,0,n,i).data}const P9=[256,256];class Yu extends P1{constructor(e){const n=Y.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Fa(this.data_);return e?[e.width,e.height]:P9}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Y.IDLE&&this.state!==Y.ERROR)return;this.state=Y.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=Y.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=Y.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(b9),this.controller_=null),super.disposeInternal()}}const A9=10,m2=.25;class qR{constructor(e,n,i,r,s,o,a){this.sourceProj_=e,this.targetProj_=n;let l={};const u=a?Vf(v=>it(a,aR(v,this.targetProj_,this.sourceProj_))):Nu(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const x=v[0]+"/"+v[1];return l[x]||(l[x]=u(v)),l[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ve(r)>=ve(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ve(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ve(this.targetProj_.getExtent()):null;const c=pr(i),h=Vd(i),f=$d(i),g=Bd(i),d=this.transformInv_(c),p=this.transformInv_(h),m=this.transformInv_(f),_=this.transformInv_(g),y=A9+(o?Math.max(0,Math.ceil(Math.log2(Fu(i)/(o*o*256*256)))):0);if(this.addQuad_(c,h,f,g,d,p,m,_,y),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(x,E,w){v=Math.min(v,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-v>this.sourceWorldWidth_/2){const E=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];E[0][0]-v>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-v>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-v>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const w=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-w<this.sourceWorldWidth_/2&&(x.source=E)}})}l={}}addTriangle_(e,n,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,n,i]})}addQuad_(e,n,i,r,s,o,a,l,u){const c=Uf([s,o,a,l]),h=this.sourceWorldWidth_?ve(c)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1;let d=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=Uf([e,n,i,r]);d=ve(m)/this.targetWorldWidth_>m2||d}!g&&this.sourceProj_.isGlobal()&&h&&(d=h>m2||d)}if(!d&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Ht(c,this.maxSourceExtent_))return;let p=0;if(!d&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)d=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!d){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],_=this.transformInv_(m);let y;g?y=(ca(s[0],f)+ca(a[0],f))/2-ca(_[0],f):y=(s[0]+a[0])/2-_[0];const v=(s[1]+a[1])/2-_[1];d=y*y+v*v>this.errorThresholdSquared_}if(d){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const m=[(n[0]+i[0])/2,(n[1]+i[1])/2],_=this.transformInv_(m),y=[(r[0]+e[0])/2,(r[1]+e[1])/2],v=this.transformInv_(y);this.addQuad_(e,n,m,y,s,o,_,v,u-1),this.addQuad_(y,m,i,r,v,_,a,l,u-1)}else{const m=[(e[0]+n[0])/2,(e[1]+n[1])/2],_=this.transformInv_(m),y=[(i[0]+r[0])/2,(i[1]+r[1])/2],v=this.transformInv_(y);this.addQuad_(e,m,y,r,s,_,v,l,u-1),this.addQuad_(m,n,i,y,_,o,a,v,u-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,i,r,s,a,l),p&14||this.addTriangle_(e,i,n,s,a,o),p&&(p&13||this.addTriangle_(n,r,e,o,l,s),p&7||this.addTriangle_(n,r,i,o,l,a))}calculateSourceExtent(){const e=In();return this.triangles_.forEach(function(n,i,r){const s=n.source;ru(e,s[0]),ru(e,s[1]),ru(e,s[2])}),e}getTriangles(){return this.triangles_}}let A0;const da=[];function p2(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function O0(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function O9(){if(A0===void 0){const t=tt(6,6,da);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",p2(t,4,5,4,0),p2(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;A0=O0(e,0)||O0(e,4)||O0(e,8),Jd(t),da.push(t.canvas)}return A0}function y2(t,e,n,i){const r=aR(n,e,t);let s=zE(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||rs(l,r)){const u=zE(t,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function ZR(t,e,n,i){const r=mr(n);let s=y2(t,e,r,i);return(!isFinite(s)||s<=0)&&B_(n,function(o){return s=y2(t,e,o,i),isFinite(s)&&s>0}),s}function L9(t,e,n,i,r,s,o,a,l,u,c,h,f,g){const d=tt(Math.round(n*t),Math.round(n*e),da);if(h||(d.imageSmoothingEnabled=!1),l.length===0)return d.canvas;d.scale(n,n);function p(E){return Math.round(E*n)/n}d.globalCompositeOperation="lighter";const m=In();l.forEach(function(E,w,C){j_(m,E.extent)});let _;const y=n/i,v=(h?1:1+Math.pow(2,-24))/y;{if(_=tt(Math.round(ve(m)*y),Math.round(ut(m)*y),da),h||(_.imageSmoothingEnabled=!1),r&&g){const E=(r[0]-m[0])*y,w=-(r[3]-m[3])*y,C=ve(r)*y,S=ut(r)*y;_.rect(E,w,C,S),_.clip()}l.forEach(function(E,w,C){if(E.image.width>0&&E.image.height>0){if(E.clipExtent){_.save();const A=(E.clipExtent[0]-m[0])*y,U=-(E.clipExtent[3]-m[3])*y,B=ve(E.clipExtent)*y,G=ut(E.clipExtent)*y;_.rect(h?A:Math.round(A),h?U:Math.round(U),h?B:Math.round(A+B)-Math.round(A),h?G:Math.round(U+G)-Math.round(U)),_.clip()}const S=(E.extent[0]-m[0])*y,R=-(E.extent[3]-m[3])*y,M=ve(E.extent)*y,k=ut(E.extent)*y;_.drawImage(E.image,u,u,E.image.width-2*u,E.image.height-2*u,h?S:Math.round(S),h?R:Math.round(R),h?M:Math.round(S+M)-Math.round(S),h?k:Math.round(R+k)-Math.round(R)),E.clipExtent&&_.restore()}})}const x=pr(o);return a.getTriangles().forEach(function(E,w,C){const S=E.source,R=E.target;let M=S[0][0],k=S[0][1],A=S[1][0],U=S[1][1],B=S[2][0],G=S[2][1];const j=p((R[0][0]-x[0])/s),$=p(-(R[0][1]-x[1])/s),O=p((R[1][0]-x[0])/s),F=p(-(R[1][1]-x[1])/s),P=p((R[2][0]-x[0])/s),N=p(-(R[2][1]-x[1])/s),z=M,H=k;M=0,k=0,A-=z,U-=H,B-=z,G-=H;const L=[[A,U,0,0,O-j],[B,G,0,0,P-j],[0,0,A,U,F-$],[0,0,B,G,N-$]],q=p8(L);if(!q)return;if(d.save(),d.beginPath(),O9()||!h){d.moveTo(O,F);const te=4,xe=j-O,Be=$-F;for(let $e=0;$e<te;$e++)d.lineTo(O+p(($e+1)*xe/te),F+p($e*Be/(te-1))),$e!=te-1&&d.lineTo(O+p(($e+1)*xe/te),F+p(($e+1)*Be/(te-1)));d.lineTo(P,N)}else d.moveTo(O,F),d.lineTo(j,$),d.lineTo(P,N);d.clip(),d.transform(q[0],q[2],q[1],q[3],j,$),d.translate(m[0]-z,m[3]-H);let Z;if(_)Z=_.canvas,d.scale(v,-v);else{const te=l[0],xe=te.extent;Z=te.image,d.scale(ve(xe)/Z.width,-ut(xe)/Z.height)}d.drawImage(Z,0,0),d.restore()}),_&&(Jd(_),da.push(_.canvas)),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach(function(E,w,C){const S=E.target,R=(S[0][0]-x[0])/s,M=-(S[0][1]-x[1])/s,k=(S[1][0]-x[0])/s,A=-(S[1][1]-x[1])/s,U=(S[2][0]-x[0])/s,B=-(S[2][1]-x[1])/s;d.beginPath(),d.moveTo(k,A),d.lineTo(R,M),d.lineTo(U,B),d.closePath(),d.stroke()}),d.restore()),d.canvas}function al(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function JR(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function Lp(t,e,n,i,r,s,o){o=o??al();const a=1/(t-e),l=1/(n-i),u=1/(r-s);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*u,o[11]=0,o[12]=(t+e)*a,o[13]=(i+n)*l,o[14]=(s+r)*u,o[15]=1,o}function _2(t,e,n,i,r){return r=r??al(),r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*i,r[9]=t[9]*i,r[10]=t[10]*i,r[11]=t[11]*i,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function k9(t,e,n,i,r){r=r??al();let s,o,a,l,u,c,h,f,g,d,p,m;return t===r?(r[12]=t[0]*e+t[4]*n+t[8]*i+t[12],r[13]=t[1]*e+t[5]*n+t[9]*i+t[13],r[14]=t[2]*e+t[6]*n+t[10]*i+t[14],r[15]=t[3]*e+t[7]*n+t[11]*i+t[15]):(s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],f=t[7],g=t[8],d=t[9],p=t[10],m=t[11],r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=u,r[5]=c,r[6]=h,r[7]=f,r[8]=g,r[9]=d,r[10]=p,r[11]=m,r[12]=s*e+u*n+g*i+t[12],r[13]=o*e+c*n+d*i+t[13],r[14]=a*e+h*n+p*i+t[14],r[15]=l*e+f*n+m*i+t[15]),r}function D9(t,e,n,i){return i=i??al(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=t,i[13]=e,i[14]=n,i[15]=1,i}const F9=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,N9=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class G9{constructor(e){this.gl_=e,this.program_=kp(e,N9,F9),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,n,i,r,s,o,a,l,u,c,h,f,g){const d=this.gl_;l===void 0&&(l=r),u===void 0&&(u=s),o===void 0&&(o=n),a===void 0&&(a=i),c===void 0&&(c=o),h===void 0&&(h=a),f===void 0&&(f=d.canvas.width),g===void 0&&(g=d.canvas.height),d.bindTexture(d.TEXTURE_2D,e),d.useProgram(this.program_),d.bindBuffer(d.ARRAY_BUFFER,this.positionBuffer),d.enableVertexAttribArray(this.positionLocation),d.vertexAttribPointer(this.positionLocation,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,this.texcoordBuffer),d.enableVertexAttribArray(this.texcoordLocation),d.vertexAttribPointer(this.texcoordLocation,2,d.FLOAT,!1,0,0);let p=Lp(0,f,0,g,-1,1);p=k9(p,l,u,0),p=_2(p,c,h,1),d.uniformMatrix4fv(this.matrixLocation,!1,p);let m=D9(r/n,s/i,0);m=_2(m,o/n,a/i,1),d.uniformMatrix4fv(this.textureMatrixLocation,!1,m),d.uniform1i(this.textureLocation,0),d.drawArrays(d.TRIANGLES,0,this.positions.length/2)}}function v2(t,e,n){const i=t.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const r=t.getShaderInfoLog(i);throw r===null?new Error("Shader info log creation failed"):new Error(r)}return i}function kp(t,e,n){const i=t.createProgram(),r=v2(t,t.VERTEX_SHADER,n),s=v2(t,t.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(t.attachShader(i,r),t.attachShader(i,s),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}const U9=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,z9=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,j9=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,B9=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function $9(t,e,n,i){let r;return n&&n.length?r=n.shift():y1?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("webgl",i)}function V9(t){const e=t.canvas;e.width=1,e.height=1,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}const x2=[];function X9(t,e,n,i,r,s,o,a,l,u,c,h,f,g){const d=Math.round(i*e),p=Math.round(i*n);t.canvas.width=d,t.canvas.height=p;let m,_;if(_=t.createTexture(),t.bindTexture(t.TEXTURE_2D,_),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),f?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,d,p,0,t.RGBA,c,null),m=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,m),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,_,0),m===null)throw new Error("Could not create framebuffer");if(_===null)throw new Error("Could not create texture");if(l.length===0)return{width:d,height:p,framebuffer:m,texture:_};const y=In();l.forEach(function(M,k,A){j_(y,M.extent)});let v,x,E;const w=1/r;{if(v=t.createTexture(),_===null)throw new Error("Could not create texture");x=Math.round(ve(y)*w),E=Math.round(ut(y)*w);const M=t.getParameter(t.MAX_TEXTURE_SIZE),k=Math.max(x,E),A=k>M?M/k:1,U=Math.round(x*A),B=Math.round(E*A);t.bindTexture(t.TEXTURE_2D,v),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),f?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,U,B,0,t.RGBA,c,null);const G=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,G),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,v,0);const j=new G9(t);l.forEach(function($,O,F){const P=($.extent[0]-y[0])*w*A,N=-($.extent[3]-y[3])*w*A,z=ve($.extent)*w*A,H=ut($.extent)*w*A;if(t.bindFramebuffer(t.FRAMEBUFFER,G),t.viewport(0,0,U,B),$.clipExtent){const L=($.clipExtent[0]-y[0])*w*A,q=-($.clipExtent[3]-y[3])*w*A,Z=ve($.clipExtent)*w*A,te=ut($.clipExtent)*w*A;t.enable(t.SCISSOR_TEST),t.scissor(f?L:Math.round(L),f?q:Math.round(q),f?Z:Math.round(L+Z)-Math.round(L),f?te:Math.round(q+te)-Math.round(q))}j.drawImage($.texture,$.width,$.height,u,u,$.width-2*u,$.height-2*u,f?P:Math.round(P),f?N:Math.round(N),f?z:Math.round(P+z)-Math.round(P),f?H:Math.round(N+H)-Math.round(N),U,B),t.disable(t.SCISSOR_TEST)}),t.deleteFramebuffer(G)}const C=pr(o),S=pr(y),R=M=>{const k=(M[0][0]-C[0])/s*i,A=-(M[0][1]-C[1])/s*i,U=(M[1][0]-C[0])/s*i,B=-(M[1][1]-C[1])/s*i,G=(M[2][0]-C[0])/s*i,j=-(M[2][1]-C[1])/s*i;return{u1:U,v1:B,u0:k,v0:A,u2:G,v2:j}};t.bindFramebuffer(t.FRAMEBUFFER,m),t.viewport(0,0,d,p);{const M=[],k=[],A=kp(t,B9,j9);t.useProgram(A);const U=t.getUniformLocation(A,"u_texture");t.bindTexture(t.TEXTURE_2D,v),t.uniform1i(U,0),a.getTriangles().forEach(function(P,N,z){const H=P.source,L=P.target,{u1:q,v1:Z,u0:te,v0:xe,u2:Be,v2:$e}=R(L),Bt=(H[0][0]-S[0])/r/x,yn=-(H[0][1]-S[1])/r/E,mi=(H[1][0]-S[0])/r/x,pi=-(H[1][1]-S[1])/r/E,_n=(H[2][0]-S[0])/r/x,qn=-(H[2][1]-S[1])/r/E;M.push(q,Z,te,xe,Be,$e),k.push(mi,pi,Bt,yn,_n,qn)});const B=Lp(0,d,p,0,-1,1),G=t.getUniformLocation(A,"u_matrix");t.uniformMatrix4fv(G,!1,B);const j=t.getAttribLocation(A,"a_position"),$=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,$),t.bufferData(t.ARRAY_BUFFER,new Float32Array(M),t.STATIC_DRAW),t.vertexAttribPointer(j,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(j);const O=t.getAttribLocation(A,"a_texcoord"),F=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,F),t.bufferData(t.ARRAY_BUFFER,new Float32Array(k),t.STATIC_DRAW),t.vertexAttribPointer(O,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(O),t.drawArrays(t.TRIANGLES,0,M.length/2)}if(h){const M=kp(t,z9,U9);t.useProgram(M);const k=Lp(0,d,p,0,-1,1),A=t.getUniformLocation(M,"u_matrix");t.uniformMatrix4fv(A,!1,k);const U=Array.isArray(h)?h:[0,0,0,255],B=t.getUniformLocation(M,"u_val");t.uniform4fv(B,U);const G=t.getAttribLocation(M,"a_position"),j=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,j),t.vertexAttribPointer(G,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(G);const $=a.getTriangles().reduce(function(O,F){const P=F.target,{u1:N,v1:z,u0:H,v0:L,u2:q,v2:Z}=R(P);return O.concat([N,z,H,L,H,L,q,Z,q,Z,N,z])},[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array($),t.STATIC_DRAW),t.drawArrays(t.LINES,0,$.length/2)}return{width:d,height:p,framebuffer:m,texture:_}}class rg extends Yu{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const n=e.sourceProj,i=n.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=n.canWrapX()?r?Kt(i,r):i:r;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?Kt(s,o):s;if(Fu(l)===0){this.state=Y.EMPTY;return}i&&(a?a=Kt(a,i):a=i);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=ZR(n,c,l,u);if(!isFinite(h)||h<=0){this.state=Y.EMPTY;return}const f=e.errorThreshold!==void 0?e.errorThreshold:KR;if(this.triangulation_=new qR(n,c,l,a,h*f,u,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=Y.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let g=this.triangulation_.calculateSourceExtent();if(a&&(n.canWrapX()?(g[1]=Ne(g[1],a[1],a[3]),g[3]=Ne(g[3],a[1],a[3])):g=Kt(g,a)),!Fu(g))this.state=Y.EMPTY;else{let d=0,p=0;n.canWrapX()&&(d=ve(i),p=Math.floor((g[0]-i[0])/d)),$_(g.slice(),n,!0).forEach(_=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),v=e.getTileFunction;for(let x=y.minX;x<=y.maxX;x++)for(let E=y.minY;E<=y.maxY;E++){const w=v(this.sourceZ_,x,E,this.pixelRatio_);if(w){const C=p*d;this.sourceTiles_.push({tile:w,offset:C})}}++p}),this.sourceTiles_.length===0&&(this.state=Y.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let n=!1;if(this.sourceTiles_.forEach(x=>{var N;const E=x.tile;if(!E||E.getState()!==Y.LOADED)return;const w=E.getSize(),C=this.gutter_;let S;const R=Op(E.getData());R?S=R:(n=!0,S=I9(Fa(E.getData())));const M=[w[0]+2*C,w[1]+2*C],k=S instanceof Float32Array,A=M[0]*M[1],U=k?Float32Array:Uint8ClampedArray,B=new U(S.buffer),G=U.BYTES_PER_ELEMENT,j=G*B.length/A,$=B.byteLength/M[1],O=Math.floor($/G/M[0]),F=this.sourceTileGrid_.getTileCoordExtent(E.tileCoord);F[0]+=x.offset,F[2]+=x.offset;const P=(N=this.clipExtent_)==null?void 0:N.slice();P&&(P[0]+=x.offset,P[2]+=x.offset),e.push({extent:F,clipExtent:P,data:B,dataType:U,bytesPerPixel:j,pixelSize:M,bandCount:O})}),this.sourceTiles_.length=0,e.length===0){this.state=Y.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),s=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],a=s*this.pixelRatio_,l=o*this.pixelRatio_,u=this.targetTileGrid_.getResolution(i),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),f=e[0].bandCount,g=new e[0].dataType(f*a*l),d=$9(a,l,x2,{premultipliedAlpha:!1,antialias:!1});let p;const m=d.RGBA;let _;e[0].dataType==Float32Array?(_=d.FLOAT,d.getExtension("WEBGL_color_buffer_float"),d.getExtension("OES_texture_float"),d.getExtension("EXT_float_blend"),p=d.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(_=d.UNSIGNED_BYTE,p=this.interpolate);const y=4,v=Math.ceil(f/y);for(let x=v-1;x>=0;--x){const E=[];for(let U=0,B=e.length;U<B;++U){const G=e[U],j=G.pixelSize,$=j[0],O=j[1],F=new G.dataType(y*$*O),P=G.data;let N=x*y;for(let H=0,L=F.length;H<L;H+=y)F[H]=P[N],F[H+1]=P[N+1],F[H+2]=P[N+2],F[H+3]=P[N+3],N+=f;const z=d.createTexture();d.bindTexture(d.TEXTURE_2D,z),p?(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR)):(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST)),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texImage2D(d.TEXTURE_2D,0,m,$,O,0,m,_,F),E.push({extent:G.extent,clipExtent:G.clipExtent,texture:z,width:$,height:O})}const{framebuffer:w,width:C,height:S}=X9(d,s,o,this.pixelRatio_,c,u,h,this.triangulation_,E,this.gutter_,_,this.renderEdges_,p),R=C,M=S*y,k=new e[0].dataType(R*M);d.bindFramebuffer(d.FRAMEBUFFER,w),d.readPixels(0,0,C,S,d.RGBA,_,k);let A=x*y;for(let U=0,B=k.length;U<B;U+=y){const G=(R-1-(U/M|0))*M+U%M;g[A]=k[G],g[A+1]=k[G+1],g[A+2]=k[G+2],g[A+3]=k[G+3],A+=f}}if(V9(d),x2.push(d.canvas),n){const x=tt(s,o),E=new ImageData(g,s);x.putImageData(E,0,0),this.reprojData_=x.canvas}else this.reprojData_=g;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=Y.LOADED,this.changed()}load(){if(this.state!==Y.IDLE&&this.state!==Y.ERROR)return;this.state=Y.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i!==Y.IDLE&&i!==Y.LOADING)return;e++;const r=Ee(n,oe.CHANGE,()=>{const s=n.getState();(s==Y.LOADED||s==Y.ERROR||s==Y.EMPTY)&&(ke(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n}){n.getState()==Y.IDLE&&n.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(ke),this.sourcesListenerKeys_=null}}class Na extends P1{constructor(e,n,i,r,s,o,a,l,u,c,h,f){super(s,Y.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=d?Kt(g,d):g;if(Fu(m)===0){this.state=Y.EMPTY;return}const _=e.getExtent();_&&(p?p=Kt(p,_):p=_);const y=r.getResolution(this.wrappedTileCoord_[0]),v=ZR(e,i,m,y);if(!isFinite(v)||v<=0){this.state=Y.EMPTY;return}const x=c!==void 0?c:KR;if(this.triangulation_=new qR(e,i,m,p,v*x,y),this.triangulation_.getTriangles().length===0){this.state=Y.EMPTY;return}this.sourceZ_=n.getZForResolution(v);let E=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(E[1]=Ne(E[1],p[1],p[3]),E[3]=Ne(E[3],p[1],p[3])):E=Kt(E,p)),!Fu(E))this.state=Y.EMPTY;else{let w=0,C=0;e.canWrapX()&&(w=ve(_),C=Math.floor((E[0]-_[0])/w)),$_(E.slice(),e,!0).forEach(R=>{const M=n.getTileRangeForExtentAndZ(R,this.sourceZ_);for(let k=M.minX;k<=M.maxX;k++)for(let A=M.minY;A<=M.maxY;A++){const U=u(this.sourceZ_,k,A,a);if(U){const B=C*w;this.sourceTiles_.push({tile:U,offset:B})}}++C}),this.sourceTiles_.length===0&&(this.state=Y.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var r;const i=n.tile;if(i&&i.getState()==Y.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=n.offset,s[2]+=n.offset;const o=(r=this.clipExtent_)==null?void 0:r.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Y.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=L9(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Y.LOADED}this.changed()}load(){if(this.state==Y.IDLE){this.state=Y.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i==Y.IDLE||i==Y.LOADING){e++;const r=Ee(n,oe.CHANGE,s=>{const o=n.getState();(o==Y.LOADED||o==Y.ERROR||o==Y.EMPTY)&&(ke(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,r){n.getState()==Y.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ke),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Jd(this.canvas_.getContext("2d")),da.push(this.canvas_),this.canvas_=null),super.release()}}class sg extends P1{constructor(e,n,i,r,s,o){super(e,n,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Y.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Y.ERROR,this.unlistenImage_(),this.image_=W9(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Y.LOADED:this.state=Y.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Y.ERROR&&(this.state=Y.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Y.IDLE&&(this.state=Y.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=JG(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function W9(){const t=tt(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class H9 extends _c{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(oe.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Y.LOADED,this.loaded)this.uploadTile();else{if(e instanceof sg){const n=e.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}e.addEventListener(oe.CHANGE,this.handleTileChange_)}}uploadTile(){ae()}setReady(){this.ready=!0,this.dispatchEvent(oe.CHANGE)}handleTileChange_(){this.tile.getState()===Y.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(oe.CHANGE,this.handleTileChange_)}}const A1=34962,O1=34963,Y9=35040,L1=35044,K9=35048,q9=5121,Z9=5123,J9=5125,QR=5126,E2=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Q9(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!HG},e);const n=E2.length;for(let i=0;i<n;++i)try{const r=t.getContext(E2[i],e);if(r)return r}catch{}return null}const ez={STATIC_DRAW:L1,STREAM_DRAW:Y9,DYNAMIC_DRAW:K9};class eb{constructor(e,n){this.array_=null,this.type_=e,Se(e===A1||e===O1,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:ez.STATIC_DRAW}ofSize(e){return this.array_=new(ch(this.type_))(e),this}fromArray(e){return this.array_=ch(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(ch(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=ch(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function ch(t){switch(t){case A1:return Float32Array;case O1:return Uint32Array;default:return Float32Array}}function tb(t,e,n){const i=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i)}function tz(t,e,n,i){tb(t,e,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}function w2(t,e,n,i,r,s){const o=t.getGL();let a,l;n instanceof Float32Array?(a=o.FLOAT,t.getExtension("OES_texture_float"),l=t.getExtension("OES_texture_float_linear")!==null):(a=o.UNSIGNED_BYTE,l=!0),tb(o,e,s&&l);const u=n.byteLength/i[1];let c=1;u%8===0?c=8:u%4===0?c=4:u%2===0&&(c=2);let h;switch(r){case 1:{h=o.LUMINANCE;break}case 2:{h=o.LUMINANCE_ALPHA;break}case 3:{h=o.RGB;break}case 4:{h=o.RGBA;break}default:throw new Error(`Unsupported number of bands: ${r}`)}const f=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,c),o.texImage2D(o.TEXTURE_2D,0,h,i[0],i[1],0,h,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,f)}let Ro=null;function nz(){Ro=tt(1,1,void 0,{willReadFrequently:!0})}class iz extends H9{constructor(e){super(e),this.textures=[],this.renderSize_=et(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const n=new eb(A1,L1);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(e.tile)}setHelper(e){var i;const n=(i=this.helper)==null?void 0:i.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let r=0;r<this.textures.length;++r)n.deleteTexture(this.textures[r])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){const e=this.helper,n=e.getGL(),i=this.tile;this.textures.length=0;let r;i instanceof sg||i instanceof Na?r=i.getImage():r=i.getData();const s=Fa(r);if(s){const y=n.createTexture();this.textures.push(y),this.bandCount=4,tz(n,y,s,i.interpolate),this.setReady();return}r=Op(r);const o=i.getSize(),a=[o[0]+2*this.gutter,o[1]+2*this.gutter],l=r instanceof Float32Array,u=a[0]*a[1],c=l?Float32Array:Uint8Array,h=c.BYTES_PER_ELEMENT,f=r.byteLength/a[1];this.bandCount=Math.floor(f/h/a[0]);const g=Math.ceil(this.bandCount/4);if(g===1){const y=n.createTexture();this.textures.push(y),w2(e,y,r,a,this.bandCount,i.interpolate),this.setReady();return}const d=new Array(g);for(let y=0;y<g;++y){const v=n.createTexture();this.textures.push(v);const x=y<g-1?4:(this.bandCount-1)%4+1;d[y]=new c(u*x)}let p=0,m=0;const _=a[0]*this.bandCount;for(let y=0;y<a[1];++y){for(let v=0;v<_;++v){const x=r[m+v],E=Math.floor(p/this.bandCount),w=v%this.bandCount,C=Math.floor(w/4),S=d[C],R=S.length/u,M=w%4;S[E*R+M]=x,++p}m+=f/h}for(let y=0;y<g;++y){const v=this.textures[y],x=d[y],E=x.length/u;w2(e,v,x,a,E,i.interpolate)}this.setReady()}getImagePixelData_(e,n,i){const r=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1];Ro||nz(),Ro.clearRect(0,0,1,1);const a=e.width,l=e.height,u=a-2*r,c=l-2*r,h=r+Math.floor(u*(n/s)),f=r+Math.floor(c*(i/o));let g;try{Ro.drawImage(e,h,f,1,1,0,0,1,1),g=Ro.getImageData(0,0,1,1).data}catch{return Ro=null,null}return g}getArrayPixelData_(e,n,i,r){const s=this.gutter,o=this.renderSize_[0],a=this.renderSize_[1],l=n[0],u=n[1],c=l+2*s,h=u+2*s,f=s+Math.floor(l*(i/o)),g=s+Math.floor(u*(r/a));if(e instanceof DataView){const p=e.byteLength/(c*h),m=p*(g*c+f),_=e.buffer.slice(m,m+p);return new DataView(_)}const d=this.bandCount*(g*c+f);return e.slice(d,d+this.bandCount)}getPixelData(e,n){if(!this.loaded)return null;if(this.tile instanceof Yu){const i=this.tile.getData(),r=Op(i);if(r){const s=this.tile.getSize();return this.getArrayPixelData_(r,s,e,n)}return this.getImagePixelData_(Fa(i),e,n)}return this.getImagePixelData_(this.tile.getImage(),e,n)}}class nb{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof yc&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return Se(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return Se(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){Se(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}class og{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function _o(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new og(t,e,n,i)}const rz=5;class ib extends vc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=rz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ae()}getData(e){return null}prepareFrame(e){return ae()}renderFrame(e,n){return ae()}forEachFeatureAtCoordinate(e,n,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===pe.LOADED||n.getState()===pe.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=pe.LOADED&&n!=pe.ERROR&&e.addEventListener(oe.CHANGE,this.boundHandleImageChange_),n==pe.IDLE&&(e.load(),n=e.getState()),n==pe.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const hh={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},sz=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,oz=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class S2{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,e.vertexShader||sz),n.compileShader(i);const r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,e.fragmentShader||oz),n.compileShader(r),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,i),n.attachShader(this.renderTargetProgram_,r),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),i=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const r=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,u=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,r,s,i[0],i[1],o,a,l,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,i[0],i[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,i,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=le(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),i&&i(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let i,r=1;this.uniforms_.forEach(function(s){if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${r}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,i.width,i.height,0,n.UNSIGNED_BYTE,new Uint8Array(i.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i),n.uniform1i(s.location,r++);else if(Array.isArray(i))switch(i.length){case 2:n.uniform2f(s.location,i[0],i[1]);return;case 3:n.uniform3f(s.location,i[0],i[1],i[2]);return;case 4:n.uniform4f(s.location,i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&n.uniform1f(s.location,i)})}}const Mr={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},zl={UNSIGNED_BYTE:q9,UNSIGNED_SHORT:Z9,UNSIGNED_INT:J9,FLOAT:QR},ed={};function C2(t){return"shared/"+t}let T2=0;function az(){const t="unique/"+T2;return T2+=1,t}function lz(t){let e=ed[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:Q9(n)},ed[t]=e}return e.users+=1,e.context}function uz(t){const e=ed[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,i=n.getExtension("WEBGL_lose_context");i&&i.loseContext();const r=n.canvas;r.width=1,r.height=1,delete ed[t]}class cz extends yc{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?C2(e.canvasCacheKey):az(),this.gl_=lz(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(hh.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(hh.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ut(),this.offsetScaleMatrix_=Ut(),this.tmpMat4_=al(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(i=>new S2({webGlContext:this.gl_,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})):[new S2({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===C2(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}bindBuffer(e){const n=this.gl_,i=le(e);let r=this.bufferCache_[i];if(!r){const s=n.createBuffer();r={buffer:e,webGlBuffer:s},this.bufferCache_[i]=r}n.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=le(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(hh.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(hh.RESTORED,this.boundHandleWebGLContextRestored_),uz(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,i){const r=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindFrameBuffer(e,n){const i=this.getGL();i.bindFramebuffer(i.FRAMEBUFFER,e),n&&i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const i=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0)}bindTexture(e,n,i){const r=this.gl_;r.activeTexture(r.TEXTURE0+n),r.bindTexture(r.TEXTURE_2D,e),r.uniform1i(this.getUniformLocation(i),n)}bindAttribute(e,n,i){const r=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);r.enableVertexAttribArray(s),r.vertexAttribPointer(s,i,r.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,i,r){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,i?s.ZERO:s.ONE_MINUS_SRC_ALPHA),r?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const i=this.gl_;this.getExtension("OES_element_index_uint");const r=i.UNSIGNED_INT,s=4,o=n-e,a=e*s;i.drawElements(i.TRIANGLES,o,r,a)}finalizeDraw(e,n,i){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,n,i):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,i=e.viewState.rotation,r=e.pixelRatio;this.setUniformFloatValue(Mr.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Mr.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Mr.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Mr.PIXEL_RATIO,r),this.setUniformFloatVec2(Mr.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(Mr.ROTATION,i)}applyHitDetectionUniform(e){const n=this.getUniformLocation(Mr.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(Mr.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let i,r=0;this.uniforms_.forEach(s=>{if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData||i instanceof WebGLTexture){i instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=i):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,r,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(i instanceof HTMLImageElement)||i.complete;!(i instanceof WebGLTexture)&&o&&s.prevValue!==i&&(s.prevValue=i,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i)),r++}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(s.name,JR(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:n.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&n.uniform1f(this.getUniformLocation(s.name),i)})}useProgram(e,n){this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const i=this.gl_,r=i.createShader(n);return i.shaderSource(r,e),i.compileShader(r),r}getProgram(e,n){const i=this.gl_,r=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(n,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(a)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){const a=`GL program linking failed: ${i.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=le(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=le(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const i=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return ci(n,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}enableAttributeArray_(e,n,i,r,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,n,i,!1,r,s))}enableAttributes(e){const n=hz(e);let i=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||QR,n,i),i+=s.size*rb(s.type)}}handleWebGLContextLost(e){ro(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,i,r){const s=this.gl_;i=i||s.createTexture();const o=r?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,i),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,u=0,c=s.RGBA,h=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],u,c,h,n):n?s.texImage2D(s.TEXTURE_2D,a,l,c,h,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],u,c,h,null),i}}function hz(t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];e+=i.size*rb(i.type)}return e}function rb(t){switch(t){case zl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case zl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case zl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case zl.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class k1 extends ib{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Ut(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(Te.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const i=this.getLayer();if(i.hasListener(pt.PRECOMPOSE)){const r=new su(pt.PRECOMPOSE,void 0,n,e);i.dispatchEvent(r)}}dispatchPostComposeEvent(e,n){const i=this.getLayer();if(i.hasListener(pt.POSTCOMPOSE)){const r=new su(pt.POSTCOMPOSE,void 0,n,e);i.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,i=-1,r;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof k1)){n=!0;continue}const c=l.getClassName();if((n||c!==r)&&(i+=1,n=!1),r=c,u===this)break}const s="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new cz({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){var e;this.clearCache(),this.removeHelper(),(e=this.getLayer())==null||e.removeChangeListener(Te.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){ci(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new su(e,this.inversePixelTransform_,i,n);r.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(pt.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(pt.POSTRENDER,e,n)}}function Ga(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function sb(t,e,n){return t+"/"+e+"/"+n}function bo(t){return sb(t[0],t[1],t[2])}function fz(t){return dz(t[0],t[1],t[2])}function dz(t,e,n){return(e<<t)+n}function gz(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(i,r):!0}const mz={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function M2(t){return 1/(t+2)}function pz(){return{tileIds:new Set,representationsByZ:{}}}function R2(t,e){return t.tileIds.has(le(e))}function b2(t,e,n){const i=t.representationsByZ;n in i||(i[n]=new Set),i[n].add(e),t.tileIds.add(le(e.tile))}function L0(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Kt(e,Ai(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(t.viewState.projection).getExtent();r&&(e=Kt(e,r))}return e}function Dp(t,e){return`${t.getKey()},${t.getRevision()},${bo(e)}`}class yz extends k1{constructor(e,n){super(e,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=Ut(),this.tempMat4=al(),this.tempTileRange_=new og(0,0,0,0),this.tempTileCoord_=Ga(0,0,0),this.tempSize_=[0,0];const i=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new nb(i),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const i=this.getLayer().getRenderSource();return!i||tl(L0(e,e.extent))?!1:i.getState()==="ready"}createTileRepresentation(e){return ae()}enqueueTiles(e,n,i,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=l.getGutterForProjection(o.projection),h=le(l);h in e.wantedTiles||(e.wantedTiles[h]={});const f=e.wantedTiles[h],g=this.tileRepresentationCache,d=a.getMapInternal(),p=Math.max(i-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let m=i;m>=p;--m){const _=u.getTileRangeForExtentAndZ(n,m,this.tempTileRange_),y=u.getResolution(m);for(let v=_.minX;v<=_.maxX;++v)for(let x=_.minY;x<=_.maxY;++x){const E=Ga(m,v,x,this.tempTileCoord_),w=Dp(l,E);let C,S;if(g.containsKey(w)&&(C=g.get(w),S=C.tile),(!C||C.tile.key!==l.getKey())&&(S=l.getTile(m,v,x,e.pixelRatio,o.projection),!S)||R2(r,S))continue;C?C.setTile(S):(C=this.createTileRepresentation({tile:S,grid:u,helper:this.helper,gutter:c}),g.set(w,C)),b2(r,C,m);const R=S.getKey();f[R]=!0,S.getState()===Y.IDLE&&(e.tileQueue.isKeyQueued(R)||e.tileQueue.enqueue([S,h,u.getTileCoordCenter(E),y]))}}}beforeTilesRender(e,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,n,i,r,s,o,a,l,u,c,h){}renderTileMask(e,n,i,r){}drawTile_(e,n,i,r,s,o,a){if(!n.ready)return;const u=n.tile.tileCoord,c=bo(u),h=c in o?o[c]:1,f=a.getResolution(i),g=et(a.getTileSize(i),this.tempSize_),d=a.getOrigin(i),p=a.getTileCoordExtent(u),m=h<1?-1:M2(i);h<1&&(e.animate=!0);const _=e.viewState,y=_.center[0],v=_.center[1],x=g[0]+2*r,E=g[1]+2*r,w=x/E,C=(y-d[0])/(g[0]*f),S=(d[1]-v)/(g[1]*f),R=_.resolution/f,M=u[1],k=u[2];uG(this.tileTransform_),XE(this.tileTransform_,2/(e.size[0]*R/x),-2/(e.size[1]*R/x)),hG(this.tileTransform_,_.rotation),XE(this.tileTransform_,1,1/w),fG(this.tileTransform_,(g[0]*(M-C)-r)/x,(g[1]*(k-S)-r)/E),this.renderTile(n,this.tileTransform_,e,s,f,g,d,p,m,r,h)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,e);const i=e.viewState,r=this.getLayer(),s=r.getRenderSource(),o=s.getTileGridForProjection(i.projection),a=s.getGutterForProjection(i.projection),l=L0(e,e.extent),u=o.getZForResolution(i.resolution,s.zDirection),c=pz(),h=r.getPreload();if(e.nextExtent){const E=o.getZForResolution(i.nextResolution,s.zDirection),w=L0(e,e.nextExtent);this.enqueueTiles(e,w,E,c,h)}this.enqueueTiles(e,l,u,c,0),h>0&&setTimeout(()=>{this.enqueueTiles(e,l,u-1,c,h-1)},0);const f={},g=le(this),d=e.time;let p=!1;const m=c.representationsByZ;if(u in m)for(const E of m[u]){const w=E.tile;if((w instanceof Na||w instanceof rg)&&w.getState()===Y.EMPTY)continue;const C=w.tileCoord;if(E.ready){const M=w.getAlpha(g,d);if(M===1){w.endTransition(g);continue}p=!0;const k=bo(C);f[k]=M}if(this.renderComplete=!1,this.findAltTiles_(o,C,u+1,c))continue;const R=o.getMinZoom();for(let M=u-1;M>=R&&!this.findAltTiles_(o,C,M,c);--M);}const _=Object.keys(m).map(Number).sort(c8);if(this.beforeTilesMaskRender(e))for(let E=0,w=_.length;E<w;++E){const C=_[E];for(const S of m[C]){const R=S.tile.tileCoord;if(bo(R)in f)continue;const k=o.getTileCoordExtent(R);this.renderTileMask(S,C,k,M2(C))}}this.beforeTilesRender(e,p);for(let E=0,w=_.length;E<w;++E){const C=_[E];for(const S of m[C]){const R=S.tile.tileCoord;bo(R)in f||this.drawTile_(e,S,C,a,l,f,o)}}if(u in m)for(const E of m[u]){const w=E.tile.tileCoord;bo(w)in f&&this.drawTile_(e,E,u,a,l,f,o)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const v=this.helper.getCanvas(),x=this.tileRepresentationCache;for(;x.canExpireCache();)x.pop().dispose();return this.postRender(n,e),v}beforeFinalize(e){}findAltTiles_(e,n,i,r){const s=e.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let u=s.minX;u<=s.maxX;++u)for(let c=s.minY;c<=s.maxY;++c){const h=Dp(l,[i,u,c]);let f=!1;if(a.containsKey(h)){const g=a.get(h);g.ready&&!R2(r,g.tile)&&(b2(r,g,i),f=!0)}f||(o=!1)}return o}clearCache(){super.clearCache();const e=this.tileRepresentationCache;e.forEach(n=>n.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const he={...mz,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Yh={TEXTURE_COORD:"a_textureCoord"},_z=[{name:Yh.TEXTURE_COORD,size:2,type:zl.FLOAT}];class vz extends yz{constructor(e,n){super(e,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new eb(O1,L1),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const n=this.helper.getGL();for(const i of this.paletteTextures_)i.delete(n)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const i of this.paletteTextures_)i.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const e=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(e)}super.removeHelper()}createTileRepresentation(e){return new iz(e)}beforeTilesRender(e,n){super.beforeTilesRender(e,n),this.helper.useProgram(this.program_,e)}renderTile(e,n,i,r,s,o,a,l,u,c,h){const f=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(_z);let g=0;for(;g<e.textures.length;){const w=`${he.TILE_TEXTURE_ARRAY}[${g}]`;this.helper.bindTexture(e.textures[g],g,w),++g}for(let w=0;w<this.paletteTextures_.length;++w){const C=this.paletteTextures_[w],S=C.getTexture(f);this.helper.bindTexture(S,g,C.name),++g}const d=i.viewState,p=o[0]+2*c,m=o[1]+2*c,y=e.tile.tileCoord,v=y[1],x=y[2];this.helper.setUniformMatrixValue(he.TILE_TRANSFORM,JR(this.tempMat4,n)),this.helper.setUniformFloatValue(he.TRANSITION_ALPHA,h),this.helper.setUniformFloatValue(he.DEPTH,u);let E=r;c>0&&(E=l,Kt(E,r,E)),this.helper.setUniformFloatVec4(he.RENDER_EXTENT,E),this.helper.setUniformFloatValue(he.RESOLUTION,d.resolution),this.helper.setUniformFloatValue(he.ZOOM,d.zoom),this.helper.setUniformFloatValue(he.TEXTURE_PIXEL_WIDTH,p),this.helper.setUniformFloatValue(he.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(he.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(he.TEXTURE_ORIGIN_X,a[0]+v*o[0]*s-c*s),this.helper.setUniformFloatValue(he.TEXTURE_ORIGIN_Y,a[1]-x*o[1]*s+c*s),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const i=this.frameState;if(!i)return null;const r=this.getLayer(),s=it(i.pixelToCoordinateTransform,e.slice()),o=i.viewState,a=r.getExtent();if(a&&!rs(Ai(a,o.projection),s))return null;const l=r.getSources(Uf([s]),o.resolution);let u,c,h;for(u=l.length-1;u>=0;--u)if(c=l[u],c.getState()==="ready"){if(h=c.getTileGridForProjection(o.projection),c.getWrapX())break;const g=h.getExtent();if(!g||rs(g,s))break}if(u<0)return null;const f=this.tileRepresentationCache;for(let g=h.getZForResolution(o.resolution);g>=h.getMinZoom();--g){const d=h.getTileCoordForCoordAndZ(s,g),p=Dp(c,d);if(!f.containsKey(p))continue;const m=f.get(p),_=m.tile;if((_ instanceof Na||_ instanceof rg)&&_.getState()===Y.EMPTY)return null;if(!m.loaded)continue;const y=h.getOrigin(g),v=et(h.getTileSize(g)),x=h.getResolution(g),E=(s[0]-y[0])/x-d[1]*v[0],w=(y[1]-s[1])/x-d[2]*v[1];return m.getPixelData(E,w)}return null}disposeInternal(){const e=this.helper;if(e){const n=e.getGL();for(const i of this.paletteTextures_)i.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class xz{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function Ez(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function ag(t){const e=t.toString();return e.includes(".")?e:e+".0"}function D1(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(ag).join(", ")})`}function wz(t){const e=ss(t),n=e.length>3?e[3]:1;return D1([e[0]/255,e[1]/255,e[2]/255,n])}function Sz(t){const e=et(t);return D1(e)}const k0={};let Cz=0;function ob(t){return t in k0||(k0[t]=Cz++),k0[t]}function Tz(t){return ag(ob(t))}function ab(t){return"u_var_"+t}function Mz(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const D0="getBandValue",lb="u_paletteTextures",Rz="featureId",bz="geometryType";function Iz(t,e,n,i){const r=yt(t,e,n);return F1(r,e,i)}function Ce(t){return(e,n,i)=>{const r=n.args.length,s=new Array(r);for(let o=0;o<r;++o)s[o]=F1(n.args[o],i,e);return t(s,e)}}const Pz={[b.Get]:(t,e)=>{const i=e.args[0].value;return i in t.properties||(t.properties[i]={name:i,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+i},[b.Id]:t=>(t.featureId=!0,(t.inFragmentShader?"v_":"a_")+Rz),[b.GeometryType]:t=>(t.geometryType=!0,(t.inFragmentShader?"v_":"a_")+bz),[b.LineMetric]:()=>"currentLineMetric",[b.Var]:(t,e)=>{const i=e.args[0].value;return i in t.variables||(t.variables[i]={name:i,type:e.type}),ab(i)},[b.Resolution]:()=>"u_resolution",[b.Zoom]:()=>"u_zoom",[b.Time]:()=>"u_time",[b.Any]:Ce(t=>`(${t.join(" || ")})`),[b.All]:Ce(t=>`(${t.join(" && ")})`),[b.Not]:Ce(([t])=>`(!${t})`),[b.Equal]:Ce(([t,e])=>`(${t} == ${e})`),[b.NotEqual]:Ce(([t,e])=>`(${t} != ${e})`),[b.GreaterThan]:Ce(([t,e])=>`(${t} > ${e})`),[b.GreaterThanOrEqualTo]:Ce(([t,e])=>`(${t} >= ${e})`),[b.LessThan]:Ce(([t,e])=>`(${t} < ${e})`),[b.LessThanOrEqualTo]:Ce(([t,e])=>`(${t} <= ${e})`),[b.Multiply]:Ce(t=>`(${t.join(" * ")})`),[b.Divide]:Ce(([t,e])=>`(${t} / ${e})`),[b.Add]:Ce(t=>`(${t.join(" + ")})`),[b.Subtract]:Ce(([t,e])=>`(${t} - ${e})`),[b.Clamp]:Ce(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[b.Mod]:Ce(([t,e])=>`mod(${t}, ${e})`),[b.Pow]:Ce(([t,e])=>`pow(${t}, ${e})`),[b.Abs]:Ce(([t])=>`abs(${t})`),[b.Floor]:Ce(([t])=>`floor(${t})`),[b.Ceil]:Ce(([t])=>`ceil(${t})`),[b.Round]:Ce(([t])=>`floor(${t} + 0.5)`),[b.Sin]:Ce(([t])=>`sin(${t})`),[b.Cos]:Ce(([t])=>`cos(${t})`),[b.Atan]:Ce(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[b.Sqrt]:Ce(([t])=>`sqrt(${t})`),[b.Match]:Ce(t=>{const e=t[0],n=t[t.length-1];let i=null;for(let r=t.length-3;r>=1;r-=2){const s=t[r],o=t[r+1];i=`(${e} == ${s} ? ${o} : ${i||n})`}return i}),[b.Between]:Ce(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[b.Interpolate]:Ce(([t,e,...n])=>{let i="";for(let r=0;r<n.length-2;r+=2){const s=n[r],o=i||n[r+1],a=n[r+2],l=n[r+3];let u;t===ag(1)?u=`(${e} - ${s}) / (${a} - ${s})`:u=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,i=`mix(${o}, ${l}, clamp(${u}, 0.0, 1.0))`}return i}),[b.Case]:Ce(t=>{const e=t[t.length-1];let n=null;for(let i=t.length-3;i>=0;i-=2){const r=t[i],s=t[i+1];n=`(${r} ? ${s} : ${n||e})`}return n}),[b.In]:Ce(([t,...e],n)=>{const i=Ez("in",n),r=[];for(let s=0;s<e.length;s+=1)r.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[i]=`bool ${i}(float inputValue) {
${r.join(`
`)}
  return false;
}`,`${i}(${t})`}),[b.Array]:Ce(t=>`vec${t.length}(${t.join(", ")})`),[b.Color]:Ce(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(i=>`${i} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[b.Band]:Ce(([t,e,n],i)=>{if(!(D0 in i.functions)){let r="";const s=i.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const u=`${he.TILE_TEXTURE_ARRAY}[${a}]`;r+=`  if (band == ${o+1}.0) {
    return texture2D(${u}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}i.functions[D0]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${he.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${he.TEXTURE_PIXEL_HEIGHT};
${r}
}`}return`${D0}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[b.Palette]:(t,e)=>{const[n,...i]=e.args,r=i.length,s=new Uint8Array(r*4);for(let u=0;u<i.length;u++){const c=i[u].value,h=ss(c),f=u*4;s[f]=h[0],s[f+1]=h[1],s[f+2]=h[2],s[f+3]=h[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${lb}[${t.paletteTextures.length}]`,a=new xz(o,s);t.paletteTextures.push(a);const l=F1(n,fe,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${r}.0, 0.5))`}};function F1(t,e,n){if(t instanceof DR){const i=Pz[t.operator];if(i===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return i(n,t,e)}if((t.type&fe)>0)return ag(t.value);if((t.type&Nt)>0)return t.value.toString();if((t.type&Wt)>0)return Tz(t.value.toString());if((t.type&Sn)>0)return wz(t.value);if((t.type&as)>0)return D1(t.value);if((t.type&Ho)>0)return Sz(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Yo(e)})`)}function vo(t,e,n){const i=w1();return Iz(e,n,i,t)}function I2(t,e){const n=`
    attribute vec2 ${Yh.TEXTURE_COORD};
    uniform mat4 ${he.TILE_TRANSFORM};
    uniform float ${he.TEXTURE_PIXEL_WIDTH};
    uniform float ${he.TEXTURE_PIXEL_HEIGHT};
    uniform float ${he.TEXTURE_RESOLUTION};
    uniform float ${he.TEXTURE_ORIGIN_X};
    uniform float ${he.TEXTURE_ORIGIN_Y};
    uniform float ${he.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Yh.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${he.TEXTURE_ORIGIN_X} + ${he.TEXTURE_RESOLUTION} * ${he.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${he.TEXTURE_ORIGIN_Y} - ${he.TEXTURE_RESOLUTION} * ${he.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${he.TILE_TRANSFORM} * vec4(${Yh.TEXTURE_COORD}, ${he.DEPTH}, 1.0);
    }
  `,i={...Mz(),inFragmentShader:!0,bandCount:e},r=[];if(t.color!==void 0){const h=vo(i,t.color,Sn);r.push(`color = ${h};`)}if(t.contrast!==void 0){const h=vo(i,t.contrast,fe);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb - (${h} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.exposure!==void 0){const h=vo(i,t.exposure,fe);r.push(`color.rgb = clamp((${h} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(t.saturation!==void 0){const h=vo(i,t.saturation,fe);r.push(`
      float saturation = ${h} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(t.gamma!==void 0){const h=vo(i,t.gamma,fe);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${h}));`)}if(t.brightness!==void 0){const h=vo(i,t.brightness,fe);r.push(`color.rgb = clamp(color.rgb + ${h}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(i.variables).length;if(o>1&&!t.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let h=0;h<o;++h){const f=i.variables[Object.keys(i.variables)[h]];if(!(f.name in t.variables))throw new Error(`Missing '${f.name}' in style variables`);const g=ab(f.name);s[g]=function(){let d=t.variables[f.name];return typeof d=="string"&&(d=ob(d)),d!==void 0?d:-9999999}}const a=Object.keys(s).map(function(h){return`uniform float ${h};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${he.TILE_TEXTURE_ARRAY}[${l}];`),i.paletteTextures&&a.push(`uniform sampler2D ${lb}[${i.paletteTextures.length}];`);const u=Object.keys(i.functions).map(function(h){return i.functions[h]}),c=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${he.RENDER_EXTENT};
    uniform float ${he.TRANSITION_ALPHA};
    uniform float ${he.TEXTURE_PIXEL_WIDTH};
    uniform float ${he.TEXTURE_PIXEL_HEIGHT};
    uniform float ${he.RESOLUTION};
    uniform float ${he.ZOOM};

    ${a.join(`
`)}

    ${u.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${he.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${he.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${he.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${he.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${he.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${r.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${he.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:c,uniforms:s,paletteTextures:i.paletteTextures}}class ub extends YR{constructor(e){e=e?Object.assign({},e):{};const n=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Te.SOURCE,this.handleSourceUpdate_)}getSources(e,n){const i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,n):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if(e.getState()==="loading"){const n=()=>{e.getState()==="ready"&&(e.removeEventListener("change",n),this.setStyle(this.style_))};e.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,n=this.getSources([-e,-e,e,e],e);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const e=I2(this.style_,this.getSourceBandCount_());return new vz(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,n){const i=this.getRenderer();let r;for(let s=0,o=n.length;s<o;++s)this.renderedSource_=n[s],i.prepareFrame(e)&&(r=i.renderFrame(e));return r}render(e,n){this.rendered=!0;const i=e.viewState,r=this.getSources(e.extent,i.resolution);let s=!0;for(let a=0,l=r.length;a<l;++a){const u=r[a],c=u.getState();if(c=="loading"){const h=()=>{u.getState()=="ready"&&(u.removeEventListener("change",h),this.changed())};u.addEventListener("change",h)}s=s&&c=="ready"}const o=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=i.resolution,o;if(this.renderedResolution_>.5*i.resolution){const a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!r.includes(l));if(a.length>0)return this.renderSources(e,a)}return o}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const n=I2(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}ub.prototype.dispose;const ie={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fh=[ie.FILL],jr=[ie.STROKE],Ns=[ie.BEGIN_PATH],P2=[ie.CLOSE_PATH];class cb{drawCustom(e,n,i,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,i){}drawFeature(e,n,i){}drawGeometryCollection(e,n,i){}drawLineString(e,n,i){}drawMultiLineString(e,n,i){}drawMultiPoint(e,n,i){}drawMultiPolygon(e,n,i){}drawPoint(e,n,i){}drawPolygon(e,n,i){}drawText(e,n,i){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}class Cc extends cb{constructor(e,n,i,r){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)r[0]=e[a],r[1]=e[a+1],rs(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,n,i,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(n+=r);let c=e[n],h=e[n+1];const f=this.tmpCoordinate_;let g=!0,d,p,m;for(d=n+r;d<i;d+=r)f[0]=e[d],f[1]=e[d+1],m=yp(u,f),m!==p?(g&&(a[l++]=c,a[l++]=h,g=!1),a[l++]=f[0],a[l++]=f[1]):m===ft.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],g=!1):g=!0,c=f[0],h=f[1],p=m;return(s&&g||d===n+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,n,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],u=this.appendFlatLineCoordinates(e,n,l,r,!1,!1);s.push(u),n=l}return n}drawCustom(e,n,i,r,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,f,g;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),f=[];const d=e.getEndss();g=0;for(let p=0,m=d.length;p<m;++p){const _=[];g=this.drawCustomCoordinates_(u,g,d[p],a,_),f.push(_)}this.instructions.push([ie.CUSTOM,l,f,e,i,Ep,s]),this.hitDetectionInstructions.push([ie.CUSTOM,l,f,e,r||i,Ep,s]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([ie.CUSTOM,l,h,e,i,Uu,s]),this.hitDetectionInstructions.push([ie.CUSTOM,l,h,e,r||i,Uu,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([ie.CUSTOM,l,c,e,i,zr,s]),this.hitDetectionInstructions.push([ie.CUSTOM,l,c,e,r||i,zr,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([ie.CUSTOM,l,c,e,i,zr,s]),this.hitDetectionInstructions.push([ie.CUSTOM,l,c,e,r||i,zr,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([ie.CUSTOM,l,c,e,i,void 0,s]),this.hitDetectionInstructions.push([ie.CUSTOM,l,c,e,r||i,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,i){this.beginGeometryInstruction1_=[ie.BEGIN_GEOMETRY,n,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ie.BEGIN_GEOMETRY,n,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let r,s,o=-1;for(n=0;n<i;++n)r=e[n],s=r[0],s==ie.END_GEOMETRY?o=n:s==ie.BEGIN_GEOMETRY&&(r[2]=n,h8(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(e,n){const i=this.state;if(e){const r=e.getColor();i.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,i.fillStyle=Oi(r||on)}else i.fillStyle=void 0;if(n){const r=n.getColor();i.strokeStyle=Oi(r||$u);const s=n.getLineCap();i.lineCap=s!==void 0?s:ka;const o=n.getLineDash();i.lineDash=o?o.slice():lr;const a=n.getLineDashOffset();i.lineDashOffset=a||ur;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Da;const u=n.getWidth();i.lineWidth=u!==void 0?u:Xu;const c=n.getMiterLimit();i.miterLimit=c!==void 0?c:Bu,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const n=e.fillStyle,i=[ie.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ie.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!vs(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[ie.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=XM(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;G_(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Az extends Cc{constructor(e,n,i,r){super(e,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,i){if(!this.image_||this.maxExtent&&!rs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([ie.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ie.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,i){if(!this.image_)return;this.beginGeometry(e,n,i);const r=e.getFlatCoordinates(),s=[];for(let l=0,u=r.length;l<u;l+=e.getStride())(!this.maxExtent||rs(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([ie.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ie.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class Oz extends Cc{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinates_(e,n,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,r,!1,!1),a=[ie.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([ie.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,lr,ur],Ns);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(jr),this.endGeometry(n)}drawMultiLineString(e,n,i){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([ie.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,lr,ur],Ns);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,f=a.length;h<f;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(jr),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(jr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(jr),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ns)}}class A2 extends Cc{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinatess_(e,n,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Ns),this.hitDetectionInstructions.push(Ns);for(let u=0;u<l;++u){const c=i[u],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,c,r,!0,!a),g=[ie.MOVE_TO_LINE_TO,h,f];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(P2),this.hitDetectionInstructions.push(P2)),n=c}return o&&(this.instructions.push(fh),this.hitDetectionInstructions.push(fh)),a&&(this.instructions.push(jr),this.hitDetectionInstructions.push(jr)),n}drawCircle(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_FILL_STYLE,on]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,lr,ur]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[ie.CIRCLE,u];this.instructions.push(Ns,c),this.hitDetectionInstructions.push(Ns,c),r.fillStyle!==void 0&&(this.instructions.push(fh),this.hitDetectionInstructions.push(fh)),r.strokeStyle!==void 0&&(this.instructions.push(jr),this.hitDetectionInstructions.push(jr)),this.endGeometry(n)}drawPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_FILL_STYLE,on]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,lr,ur]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(n)}drawMultiPolygon(e,n,i){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_FILL_STYLE,on]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ie.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,lr,ur]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,f=a.length;h<f;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=bs(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function Lz(t,e,n,i,r){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+r<i;){const[u,c]=l.slice(-2),h=e[o+r],f=e[o+r+1],g=Math.sqrt((h-u)*(h-u)+(f-c)*(f-c));if(a+=g,a>=t){const d=(t-a+g)/g,p=En(u,h,d),m=En(c,f,d);l.push(p,m),s.push(l),l=[p,m],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const d=g-a,p=En(u,h,d/g),m=En(c,f,d/g);l.push(p,m),s.push(l),l=[p,m],a=0,o+=r}}return a>0&&s.push(l),s}function kz(t,e,n,i,r){let s=n,o=n,a=0,l=0,u=n,c,h,f,g,d,p,m,_,y,v;for(h=n;h<i;h+=r){const x=e[h],E=e[h+1];d!==void 0&&(y=x-d,v=E-p,g=Math.sqrt(y*y+v*v),m!==void 0&&(l+=f,c=Math.acos((m*y+_*v)/(f*g)),c>t&&(l>a&&(a=l,s=u,o=h),l=0,u=h-r)),f=g,m=y,_=v),d=x,p=E}return l+=g,l>a?[u,h]:[s,o]}const td={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Dz extends Cc{constructor(e,n,i,r){super(e,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[on]={fillStyle:on},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,i){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Ht(this.maxExtent,e.getExtent()))return;let f;if(c=e.getFlatCoordinates(),u=="LineString")f=[c.length];else if(u=="MultiLineString")f=e.getEnds();else if(u=="Polygon")f=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const m=e.getEndss();f=[];for(let _=0,y=m.length;_<y;++_)f.push(m[_][0])}this.beginGeometry(e,n,i);const g=o.repeat,d=g?void 0:o.textAlign;let p=0;for(let m=0,_=f.length;m<_;++m){let y;g?y=Lz(g*this.resolution,c,p,f[m],h):y=[c.slice(p,f[m])];for(let v=0,x=y.length;v<x;++v){const E=y[v];let w=0,C=E.length;if(d==null){const R=kz(o.maxAngle,E,0,E.length,2);w=R[0],C=R[1]}for(let R=w;R<C;R+=h)a.push(E[R],E[R+1]);const S=a.length;p=f[m],this.drawChars_(l,S),l=S}}this.endGeometry(n)}else{let f=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||f.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const y=e.getFlatInteriorPoints();c=[];for(let v=0,x=y.length;v<x;v+=3)o.overflow||f.push(y[v+2]/this.resolution),c.push(y[v],y[v+1]);if(c.length===0)return;h=2;break}const g=this.appendFlatPointCoordinates(c,h);if(g===l)return;if(f&&(g-l)/2!==c.length/h){let y=l/2;f=f.filter((v,x)=>{const E=a[(y+x)*2]===c[x*h]&&a[(y+x)*2+1]===c[x*h+1];return E||--y,E})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,i);let d=o.padding;if(d!=Fs&&(o.scale[0]<0||o.scale[1]<0)){let y=o.padding[0],v=o.padding[1],x=o.padding[2],E=o.padding[3];o.scale[0]<0&&(v=-v,E=-E),o.scale[1]<0&&(y=-y,x=-x),d=[y,v,x,E]}const p=this.pixelRatio;this.instructions.push([ie.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,d==Fs?Fs:d.map(function(y){return y*p}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const m=1/p,_=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=on,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ie.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterMode_,this.declutterImageWithText_,d,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?on:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),o.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||Vu,justify:n.justify,textBaseline:n.textBaseline||Kf,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=td[r.textBaseline],c=this.textOffsetY_*l,h=this.text_,f=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([ie.DRAW_CHARS,e,n,u,r.overflow,a,r.maxAngle,l,c,s,f*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ie.DRAW_CHARS,e,n,u,r.overflow,a&&on,r.maxAngle,l,c,s,f*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Oi(o.getColor()||on)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const p=a.getLineDash(),m=a.getLineDashOffset(),_=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||ka,s.lineDash=p?p.slice():lr,s.lineDashOffset=m===void 0?ur:m,s.lineJoin=a.getLineJoin()||Da,s.lineWidth=_===void 0?Xu:_,s.miterLimit=y===void 0?Bu:y,s.strokeStyle=Oi(a.getColor()||$u)}i=this.textState_;const l=e.getFont()||AR;oU(l);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||Kf,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Fs,i.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),g=e.getKeepUpright(),d=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=d===void 0?0:d,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:le(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+le(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const Fz={Circle:A2,Default:Cc,Image:Az,LineString:Oz,Polygon:A2,Text:Dz};class Nz{constructor(e,n,i,r){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const r in i){const s=i[r].finish();e[n][r]=s}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[n];if(s===void 0){const o=Fz[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=s}return s}}class hb{constructor(){Cv(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Yf(),{get:(e,n)=>{if(typeof Yf()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,r=n.length;i<r;++i){const s=n[i];if(typeof s=="function"){s(e);continue}const o=n[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const O2=[];let Io=null;function Gz(){Io=tt(1,1,void 0,{willReadFrequently:!0})}class fb extends ib{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ut(),this.pixelTransform=Ut(),this.inversePixelTransform=Ut(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,i){Io||Gz(),Io.clearRect(0,0,1,1);let r;try{Io.drawImage(e,n,i,1,1,0,0,1,1),r=Io.getImageData(0,0,1,1).data}catch{return Io=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&vs(ss(e.style.backgroundColor),ss(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=tt();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const r=pr(i),s=Vd(i),o=$d(i),a=Bd(i);it(n.coordinateToPixelTransform,r),it(n.coordinateToPixelTransform,s),it(n.coordinateToPixelTransform,o),it(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;it(l,r),it(l,s),it(l,o),it(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(ve(i)/r*o),l=Math.round(ut(i)/r*o);ci(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),t1(this.inversePixelTransform,this.pixelTransform);const u=gG(this.pixelTransform);if(this.useContainer(n,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,n,i){const r=this.getLayer();if(r.hasListener(e)){const s=new su(e,this.inversePixelTransform,i,n);r.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(pt.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(pt.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new hb),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(pt.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(pt.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,r,s,o,a){const l=s/2,u=o/2,c=r/n,h=-c,f=-e[0]+a,g=-e[1];return ci(this.tempTransform,l,u,c,h,-i,f,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Uz(t,e,n,i,r,s,o,a,l,u,c,h,f=!0){let g=t[e],d=t[e+1],p=0,m=0,_=0,y=0;function v(){p=g,m=d,e+=i,g=t[e],d=t[e+1],y+=_,_=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m))}do v();while(e<n-i&&y+_<s);let x=_===0?0:(s-y)/_;const E=En(p,g,x),w=En(m,d,x),C=e-i,S=y,R=s+a*l(u,r,c);for(;e<n-i&&y+_<R;)v();x=_===0?0:(R-y)/_;const M=En(p,g,x),k=En(m,d,x);let A=!1;if(f)if(h){const $=[E,w,M,k];n1($,0,4,2,h,$,$),A=$[0]>$[2]}else A=E>M;const U=Math.PI,B=[],G=C+i===e;e=C,_=0,y=S,g=t[e],d=t[e+1];let j;if(G){v(),j=Math.atan2(d-m,g-p),A&&(j+=j>0?-U:U);const $=(M+E)/2,O=(k+w)/2;return B[0]=[$,O,(R-s)/2,j,r],B}r=r.replace(/\n/g," ");for(let $=0,O=r.length;$<O;){v();let F=Math.atan2(d-m,g-p);if(A&&(F+=F>0?-U:U),j!==void 0){let q=F-j;if(q+=q>U?-2*U:q<-U?2*U:0,Math.abs(q)>o)return null}j=F;const P=$;let N=0;for(;$<O;++$){const q=A?O-$-1:$,Z=a*l(u,r[q],c);if(e+i<n&&y+_<s+N+Z/2)break;N+=Z}if($===P)continue;const z=A?r.substring(O-P,O-$):r.substring(P,$);x=_===0?0:(s+N/2-y)/_;const H=En(p,g,x),L=En(m,d,x);B.push([H,L,N/2,F,z]),s+=N}return B}function db(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const l=t[a],u=t[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}const xo=In(),Rr=[],Ki=[],qi=[],br=[];function L2(t){return t[3].declutterBox}const k2=new RegExp("[-----]");function F0(t,e){return e==="start"?e=k2.test(t)?"right":"left":e==="end"&&(e=k2.test(t)?"left":"right"),td[e]}function zz(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class jz{constructor(e,n,i,r,s){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ut(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new hb:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,i,r){const s=e+n+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=l.justify?td[l.justify]:F0(Array.isArray(e)?e[0]:e,l.textAlign||Vu),f=r&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(zz,[]),{width:d,height:p,widths:m,heights:_,lineWidths:y}=lU(l,g),v=d+f,x=[],E=(v+2)*c[0],w=(p+f)*c[1],C={width:E<0?Math.floor(E):Math.ceil(E),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:x};(c[0]!=1||c[1]!=1)&&x.push("scale",c),r&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",a.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const S=.5-h;let R=h*v+S*f;const M=[],k=[];let A=0,U=0,B=0,G=0,j;for(let $=0,O=g.length;$<O;$+=2){const F=g[$];if(F===`
`){U+=A,A=0,R=h*v+S*f,++G;continue}const P=g[$+1]||l.font;P!==j&&(r&&M.push("font",P),i&&k.push("font",P),j=P),A=Math.max(A,_[B]);const N=[F,R+S*m[B]+h*(m[B]-y[G]),.5*(f+A)+U];R+=m[B],r&&M.push("strokeText",N),i&&k.push("fillText",N),++B}return Array.prototype.push.apply(x,M),Array.prototype.push.apply(x,k),this.labels_[s]=C,C}replayTextBackground_(e,n,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,r,s,o,a,l,u,c,h,f,g,d,p,m){a*=f[0],l*=f[1];let _=i-a,y=r-l;const v=s+u>e?e-u:s,x=o+c>n?n-c:o,E=d[3]+v*f[0]+d[1],w=d[0]+x*f[1]+d[2],C=_-d[3],S=y-d[0];(p||h!==0)&&(Rr[0]=C,br[0]=C,Rr[1]=S,Ki[1]=S,Ki[0]=C+E,qi[0]=Ki[0],qi[1]=S+w,br[1]=qi[1]);let R;return h!==0?(R=ci(Ut(),i,r,1,1,h,-i,-r),it(R,Rr),it(R,Ki),it(R,qi),it(R,br),Bi(Math.min(Rr[0],Ki[0],qi[0],br[0]),Math.min(Rr[1],Ki[1],qi[1],br[1]),Math.max(Rr[0],Ki[0],qi[0],br[0]),Math.max(Rr[1],Ki[1],qi[1],br[1]),xo)):Bi(Math.min(C,C+E),Math.min(S,S+w),Math.max(C,C+E),Math.max(S,S+w),xo),g&&(_=Math.round(_),y=Math.round(y)),{drawImageX:_,drawImageY:y,drawImageW:v,drawImageH:x,originX:u,originY:c,declutterBox:{minX:xo[0],minY:xo[1],maxX:xo[2],maxY:xo[3],value:m},canvasTransform:R,scale:f}}replayImageOrLabel_(e,n,i,r,s,o,a){const l=!!(o||a),u=r.declutterBox,c=a?a[2]*r.scale[0]/2:0;return u.minX-c<=n[0]&&u.maxX+c>=0&&u.minY-c<=n[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Rr,Ki,qi,br,o,a),uU(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const i=it(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,r){const s=this.textStates[n],o=this.createLabel(e,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,u=F0(Array.isArray(e)?e[0]:e,s.textAlign||Vu),c=td[s.textBaseline||Kf],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],g=u*f+2*(.5-u)*h,d=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:g,anchorY:d}}execute_(e,n,i,r,s,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&vs(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Jr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),cG(this.renderedTransform_,i));let h=0;const f=r.length;let g=0,d,p,m,_,y,v,x,E,w,C,S,R,M,k=0,A=0,U=null,B=null;const G=this.coordinateCache_,j=this.viewRotation_,$=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,O={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},F=this.instructions!=r||this.overlaps?0:200;let P,N,z,H;for(;h<f;){const L=r[h];switch(L[0]){case ie.BEGIN_GEOMETRY:P=L[1],H=L[3],P.getGeometry()?a!==void 0&&!Ht(a,H.getExtent())?h=L[2]+1:++h:h=L[2],u&&(u.zIndex=L[4]);break;case ie.BEGIN_PATH:k>F&&(this.fill_(e),k=0),A>F&&(e.stroke(),A=0),!k&&!A&&(e.beginPath(),y=NaN,v=NaN),++h;break;case ie.CIRCLE:g=L[1];const Z=c[g],te=c[g+1],xe=c[g+2],Be=c[g+3],$e=xe-Z,Bt=Be-te,yn=Math.sqrt($e*$e+Bt*Bt);e.moveTo(Z+yn,te),e.arc(Z,te,yn,0,2*Math.PI,!0),++h;break;case ie.CLOSE_PATH:e.closePath(),++h;break;case ie.CUSTOM:g=L[1],d=L[2];const mi=L[3],pi=L[4],_n=L[5];O.geometry=mi,O.feature=P,h in G||(G[h]=[]);const qn=G[h];_n?_n(c,g,d,2,qn):(qn[0]=c[g],qn[1]=c[g+1],qn.length=2),u&&(u.zIndex=L[6]),pi(qn,O),++h;break;case ie.DRAW_IMAGE:g=L[1],d=L[2],w=L[3],p=L[4],m=L[5];let tn=L[6];const bt=L[7],vn=L[8],nt=L[9],Es=L[10];let Zn=L[11];const lo=L[12];let uo=L[13];_=L[14]||"declutter";const ht=L[15];if(!w&&L.length>=20){C=L[19],S=L[20],R=L[21],M=L[22];const kn=this.drawLabelWithPointPlacement_(C,S,R,M);w=kn.label,L[3]=w;const ws=L[23];p=(kn.anchorX-ws)*this.pixelRatio,L[4]=p;const Dn=L[24];m=(kn.anchorY-Dn)*this.pixelRatio,L[5]=m,tn=w.height,L[6]=tn,uo=w.width,L[13]=uo}let Pg;L.length>25&&(Pg=L[25]);let Ag,Pc,Ac;L.length>17?(Ag=L[16],Pc=L[17],Ac=L[18]):(Ag=Fs,Pc=!1,Ac=!1),Es&&$?Zn+=j:!Es&&!$&&(Zn-=j);let lP=0;for(;g<d;g+=2){if(Pg&&Pg[lP++]<uo/this.pixelRatio)continue;const kn=this.calculateImageOrLabelDimensions_(w.width,w.height,c[g],c[g+1],uo,tn,p,m,vn,nt,Zn,lo,s,Ag,Pc||Ac,P),ws=[e,n,w,kn,bt,Pc?U:null,Ac?B:null];if(l){let Dn,yi,Fn;if(ht){const Ye=d-g;if(!ht[Ye]){ht[Ye]={args:ws,declutterMode:_};continue}const $t=ht[Ye];Dn=$t.args,yi=$t.declutterMode,delete ht[Ye],Fn=L2(Dn)}let Wi,Hi;if(Dn&&(yi!=="declutter"||!l.collides(Fn))&&(Wi=!0),(_!=="declutter"||!l.collides(kn.declutterBox))&&(Hi=!0),yi==="declutter"&&_==="declutter"){const Ye=Wi&&Hi;Wi=Ye,Hi=Ye}Wi&&(yi!=="none"&&l.insert(Fn),this.replayImageOrLabel_.apply(this,Dn)),Hi&&(_!=="none"&&l.insert(kn.declutterBox),this.replayImageOrLabel_.apply(this,ws))}else this.replayImageOrLabel_.apply(this,ws)}++h;break;case ie.DRAW_CHARS:const yv=L[1],_v=L[2],Og=L[3],uP=L[4];M=L[5];const cP=L[6],vv=L[7],xv=L[8];R=L[9];const Lg=L[10];C=L[11],S=L[12];const Ev=[L[13],L[13]];_=L[14]||"declutter";const hP=L[15],kg=this.textStates[S],cl=kg.font,hl=[kg.scale[0]*vv,kg.scale[1]*vv];let fl;cl in this.widths_?fl=this.widths_[cl]:(fl={},this.widths_[cl]=fl);const wv=db(c,yv,_v,2),Sv=Math.abs(hl[0])*r2(cl,C,fl);if(uP||Sv<=wv){const kn=this.textStates[S].textAlign,ws=(wv-Sv)*F0(C,kn),Dn=Uz(c,yv,_v,2,C,ws,cP,Math.abs(hl[0]),r2,cl,fl,$?0:this.viewRotation_,hP);e:if(Dn){const yi=[];let Fn,Wi,Hi,Ye,$t;if(R)for(Fn=0,Wi=Dn.length;Fn<Wi;++Fn){$t=Dn[Fn],Hi=$t[4],Ye=this.createLabel(Hi,S,"",R),p=$t[2]+(hl[0]<0?-Lg:Lg),m=Og*Ye.height+(.5-Og)*2*Lg*hl[1]/hl[0]-xv;const Yi=this.calculateImageOrLabelDimensions_(Ye.width,Ye.height,$t[0],$t[1],Ye.width,Ye.height,p,m,0,0,$t[3],Ev,!1,Fs,!1,P);if(l&&_==="declutter"&&l.collides(Yi.declutterBox))break e;yi.push([e,n,Ye,Yi,1,null,null])}if(M)for(Fn=0,Wi=Dn.length;Fn<Wi;++Fn){$t=Dn[Fn],Hi=$t[4],Ye=this.createLabel(Hi,S,M,""),p=$t[2],m=Og*Ye.height-xv;const Yi=this.calculateImageOrLabelDimensions_(Ye.width,Ye.height,$t[0],$t[1],Ye.width,Ye.height,p,m,0,0,$t[3],Ev,!1,Fs,!1,P);if(l&&_==="declutter"&&l.collides(Yi.declutterBox))break e;yi.push([e,n,Ye,Yi,1,null,null])}l&&_!=="none"&&l.load(yi.map(L2));for(let Yi=0,fP=yi.length;Yi<fP;++Yi)this.replayImageOrLabel_.apply(this,yi[Yi])}}++h;break;case ie.END_GEOMETRY:if(o!==void 0){P=L[1];const kn=o(P,H,_);if(kn)return kn}++h;break;case ie.FILL:F?k++:this.fill_(e),++h;break;case ie.MOVE_TO_LINE_TO:for(g=L[1],d=L[2],N=c[g],z=c[g+1],e.moveTo(N,z),y=N+.5|0,v=z+.5|0,g+=2;g<d;g+=2)N=c[g],z=c[g+1],x=N+.5|0,E=z+.5|0,(g==d-2||x!==y||E!==v)&&(e.lineTo(N,z),y=x,v=E);++h;break;case ie.SET_FILL_STYLE:U=L,this.alignAndScaleFill_=L[2],k&&(this.fill_(e),k=0,A&&(e.stroke(),A=0)),e.fillStyle=L[1],++h;break;case ie.SET_STROKE_STYLE:B=L,A&&(e.stroke(),A=0),this.setStrokeStyle_(e,L),++h;break;case ie.STROKE:F?A++:e.stroke(),++h;break;default:++h;break}}k&&this.fill_(e),A&&e.stroke()}execute(e,n,i,r,s,o){this.viewRotation_=r,this.execute_(e,n,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,i,r,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,r,s)}}const Ko=["Polygon","Circle","LineString","Image","Text","Default"],gb=["Image","Text"],Bz=Ko.filter(t=>!gb.includes(t));class $z{constructor(e,n,i,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ut(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,n){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=e[i];for(const o in s){const a=s[o];r[o]=new jz(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,r,s,o){r=Math.round(r);const a=r*2+1,l=ci(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=tt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=In(),ru(h,e),G_(h,n*(this.renderBuffer_+r),h));const f=Vz(r);let g;function d(E,w,C){const S=c.getImageData(0,0,a,a).data;for(let R=0,M=f.length;R<M;R++)if(S[f[R]]>0){if(!o||C==="none"||g!=="Image"&&g!=="Text"||o.includes(E)){const k=(f[R]-3)/4,A=r-k%a,U=r-(k/a|0),B=s(E,w,A*A+U*U);if(B)return B}c.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(or);let m,_,y,v,x;for(m=p.length-1;m>=0;--m){const E=p[m].toString();for(y=this.executorsByZIndex_[E],_=Ko.length-1;_>=0;--_)if(g=Ko[_],v=y[g],v!==void 0&&(x=v.executeHitDetection(c,l,i,d,h),x))return x}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],r=n[1],s=n[2],o=n[3],a=[i,r,i,o,s,o,s,r];return Jr(a,0,8,2,e,a),a}isEmpty(){return Zs(this.executorsByZIndex_)}execute(e,n,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(or),o=o||Ko;const u=Ko.length;let c,h,f,g,d;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const p=l[c].toString();for(d=this.executorsByZIndex_[p],f=0,g=o.length;f<g;++f){const m=o[f],_=d[m];if(_!==void 0){const y=a===null?void 0:_.getZIndexContext(),v=y?y.getContext():e,x=this.maxExtent_&&m!=="Image"&&m!=="Text";if(x&&(v.save(),this.clip(v,i)),!y||m==="Text"||m==="Image"?_.execute(v,n,i,r,s,a):y.pushFunction(E=>_.execute(E,n,i,r,s,a)),x&&v.restore(),y){y.offset();const E=l[c]*u+f;this.deferredZIndexContexts_[E]||(this.deferredZIndexContexts_[E]=[]),this.deferredZIndexContexts_[E].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(or);for(let i=0,r=n.length;i<r;++i)e[n[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[i]].length=0}}const N0={};function Vz(t){if(N0[t]!==void 0)return N0[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return N0[t]=r,r}class Xz extends cb{constructor(e,n,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?jd(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ut()}drawImages_(e,n,i,r){if(!this.image_)return;const s=Jr(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const f=s[c]-this.imageAnchorX_,g=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const d=f+this.imageAnchorX_,p=g+this.imageAnchorY_;ci(a,d,p,1,1,u,-d,-p),o.save(),o.transform.apply(o,a),o.translate(d,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Jr(e,n,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){const l=s[n]+this.textOffsetX_,u=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,n,i,r,s){const o=this.context_,a=Jr(e,n,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),i}drawRings_(e,n,i,r){for(let s=0,o=i.length;s<o;++s)n=this.moveToLineTo_(e,n,i[s],r,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=yG(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(Ht(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(i,r,u,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),vs(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:Vu;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=r,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Oi(i||on)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),r=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit(),c=s||lr;this.strokeState_={lineCap:r!==void 0?r:ka,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||ur)*this.pixelRatio_,lineJoin:a!==void 0?a:Da,lineWidth:(l!==void 0?l:Xu)*this.pixelRatio_,miterLimit:u!==void 0?u:Bu,strokeStyle:Oi(i||$u)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:Oi(g||on)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const g=i.getColor(),d=i.getLineCap(),p=i.getLineDash(),m=i.getLineDashOffset(),_=i.getLineJoin(),y=i.getWidth(),v=i.getMiterLimit();this.textStrokeState_={lineCap:d!==void 0?d:ka,lineDash:p||lr,lineDashOffset:m||ur,lineJoin:_!==void 0?_:Da,lineWidth:y!==void 0?y:Xu,miterLimit:v!==void 0?v:Bu,strokeStyle:Oi(g||$u)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:r!==void 0?r:AR,textAlign:h!==void 0?h:Vu,textBaseline:f!==void 0?f:Kf},this.text_=c!==void 0?Array.isArray(c)?c.reduce((g,d,p)=>g+=p%2?" ":d,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Ii=.5;function Wz(t,e,n,i,r,s,o,a,l){const u=r,c=t[0]*Ii,h=t[1]*Ii,f=tt(c,h);f.imageSmoothingEnabled=!1;const g=f.canvas,d=new Xz(f,Ii,r,null,o,a,null),p=n.length,m=Math.floor((256*256*256-1)/p),_={};for(let v=1;v<=p;++v){const x=n[v-1],E=x.getStyleFunction()||i;if(!E)continue;let w=E(x,s);if(!w)continue;Array.isArray(w)||(w=[w]);const S=(v*m).toString(16).padStart(7,"#00000");for(let R=0,M=w.length;R<M;++R){const k=w[R],A=k.getGeometryFunction()(x);if(!A||!Ht(u,A.getExtent()))continue;const U=k.clone(),B=U.getFill();B&&B.setColor(S);const G=U.getStroke();G&&(G.setColor(S),G.setLineDash(null)),U.setText(void 0);const j=k.getImage();if(j){const P=j.getImageSize();if(!P)continue;const N=tt(P[0],P[1],void 0,{alpha:!1}),z=N.canvas;N.fillStyle=S,N.fillRect(0,0,z.width,z.height),U.setImage(new wc({img:z,anchor:j.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:j.getOrigin(),opacity:1,size:j.getSize(),scale:j.getScale(),rotation:j.getRotation(),rotateWithView:j.getRotateWithView()}))}const $=U.getZIndex()||0;let O=_[$];O||(O={},_[$]=O,O.Polygon=[],O.Circle=[],O.LineString=[],O.Point=[]);const F=A.getType();if(F==="GeometryCollection"){const P=A.getGeometriesArrayRecursive();for(let N=0,z=P.length;N<z;++N){const H=P[N];O[H.getType().replace("Multi","")].push(H,U)}}else O[F.replace("Multi","")].push(A,U)}}const y=Object.keys(_).map(Number).sort(or);for(let v=0,x=y.length;v<x;++v){const E=_[y[v]];for(const w in E){const C=E[w];for(let S=0,R=C.length;S<R;S+=2){d.setStyle(C[S+1]);for(let M=0,k=e.length;M<k;++M)d.setTransform(e[M]),d.drawGeometry(C[S])}}}return f.getImageData(0,0,g.width,g.height)}function Hz(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*Ii),s=Math.floor(Math.round(t[1])*Ii),o=(Ne(r,0,n.width-1)+Ne(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],c=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&i.push(e[c/h-1])}return i}const Yz=.5,mb={Point:nj,LineString:Qz,Polygon:rj,MultiPoint:ij,MultiLineString:ej,MultiPolygon:tj,GeometryCollection:Jz,Circle:qz};function Kz(t,e){return parseInt(le(t),10)-parseInt(le(e),10)}function D2(t,e){const n=pb(t,e);return n*n}function pb(t,e){return Yz*t/e}function qz(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function F2(t,e,n,i,r,s,o,a){const l=[],u=n.getImage();if(u){let f=!0;const g=u.getImageState();g==pe.LOADED||g==pe.ERROR?f=!1:g==pe.IDLE&&u.load(),f&&l.push(u.ready())}const c=n.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),Zz(t,e,n,i,s,o,a),h}function Zz(t,e,n,i,r,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r);if(n.getRenderer())yb(t,l,n,e,o);else{const c=mb[l.getType()];c(t,l,n,e,o,s)}}function yb(t,e,n,i,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)yb(t,o[a],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}function Jz(t,e,n,i,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=mb[o[a].getType()];u(t,o[a],n,i,r,s)}}function Qz(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function ej(t,e,n,i,r){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,r)}}function tj(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}function nj(t,e,n,i,r,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),u=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=pe.LOADED)return;const c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,i,r)}if(l){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,i,r)}}function ij(t,e,n,i,r,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),u=l&&l.getText(),c=s&&a&&u?{}:void 0;if(a){if(o.getImageState()!=pe.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,i,r)}if(u){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,i,r)}}function rj(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}class sj extends fb{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=In(),this.wrappedRenderedExtent_=In(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,i){const r=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),g=n.pixelRatio,d=n.viewHints,p=!(d[Dt.ANIMATING]||d[Dt.INTERACTING]),m=this.context,_=Math.round(ve(r)/a*g),y=Math.round(ut(r)/a*g),v=h.getWrapX()&&l.canWrapX(),x=v?ve(c):null,E=v?Math.ceil((r[2]-c[2])/x)+1:1;let w=v?Math.floor((r[0]-c[0])/x):0;do{let C=this.getRenderTransform(o,a,0,g,_,y,w*x);n.declutter&&(C=C.slice(0)),e.execute(m,[m.canvas.width,m.canvas.height],C,u,p,i===void 0?Ko:i?gb:Bz,i?f&&n.declutter[f]:void 0)}while(++w<E)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=tt(this.context.canvas.width,this.context.canvas.height,O2))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Jd(this.context),O2.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(pt.PRERENDER)||this.getLayer().hasListener(pt.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=Ai(i.extent);a=Ht(l,e.extent),this.clipped_=a&&!Ls(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*Ii,f=i[1]*Ii;c.push(this.getRenderTransform(r,s,o,Ii,h,f,0).slice());const g=u.getSource(),d=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Ls(d,l)){let p=l[0];const m=ve(d);let _=0,y;for(;p<d[0];)--_,y=m*_,c.push(this.getRenderTransform(r,s,o,Ii,h,f,y).slice()),p+=m;for(_=0,p=l[2];p>d[2];)++_,y=m*_,c.push(this.getRenderTransform(r,s,o,Ii,h,f,y).slice()),p-=m}this.hitDetectionImageData_=Wz(i,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o,D2(s,this.renderedPixelRatio_))}n(Hz(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,r,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),u={},c=function(d,p,m){const _=le(d),y=u[_];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return u[_]=!0,s.splice(s.lastIndexOf(y),1),r(d,l,p);y.geometry=p,y.distanceSq=m}}else{if(m===0)return u[_]=!0,r(d,l,p);s.push(u[_]={feature:d,layer:l,geometry:p,distanceSq:m,callback:r})}};let h;const f=[this.replayGroup_],g=this.getLayer().getDeclutter();return f.some(d=>h=d.forEachFeatureAtCoordinate(e,o,a,i,c,g&&n.declutter[g]?n.declutter[g].all().map(p=>p.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const r=e.viewHints[Dt.ANIMATING],s=e.viewHints[Dt.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,f=e.pixelRatio,g=n.getRevision(),d=n.getRenderBuffer();let p=n.getRenderOrder();p===void 0&&(p=Kz);const m=u.center.slice(),_=G_(l,d*h),y=_.slice(),v=[_.slice()],x=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!Ls(x,e.extent)){const B=ve(x),G=Math.max(ve(_)/2,B);_[0]=x[0]-G,_[2]=x[2]+G,ZM(m,c);const j=YM(v[0],c);j[0]<x[0]&&j[2]<x[2]?v.push([j[0]+B,j[1],j[2]+B,j[3]]):j[0]>x[0]&&j[2]>x[2]&&v.push([j[0]-B,j[1],j[2]-B,j[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!e.declutter&&Ls(this.wrappedRenderedExtent_,_))return vs(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new Nz(pb(h,f),_,h,f);let w;for(let B=0,G=v.length;B<G;++B)i.loadFeatures(v[B],h,c);const C=D2(h,f);let S=!0;const R=(B,G)=>{let j;const $=B.getStyleFunction()||n.getStyleFunction();if($&&(j=$(B,h)),j){const O=this.renderFeature(B,C,j,E,w,this.getLayer().getDeclutter(),G);S=S&&!O}},M=q_(_),k=i.getFeaturesInExtent(M);p&&k.sort(p);for(let B=0,G=k.length;B<G;++B)R(k[B],B);this.renderedFeatures_=k,this.ready=S;const A=E.finish(),U=new $z(_,h,f,i.getOverlaps(),A,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=c,this.renderedPixelRatio_=f,this.replayGroup_=U,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,r,s,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,c=i.length;u<c;++u)l=F2(r,e,i[u],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=F2(r,e,i,n,this.boundHandleStyleImageChange_,s,o,a);return l}}class Tc extends BR{constructor(e){super(e)}createRenderer(){return new sj(this)}}class N2{constructor(e){this.rbush_=new ER(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[le(n)]=i}load(e,n){const i=new Array(n.length);for(let r=0,s=n.length;r<s;r++){const o=e[r],a=n[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[le(a)]=l}this.rbush_.load(i)}remove(e){const n=le(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[le(n)],r=[i.minX,i.minY,i.maxX,i.maxY];Du(r,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let r=0,s=e.length;r<s;r++)if(i=n(e[r]),i)return i;return i}isEmpty(){return Zs(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return Bi(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class Bn extends gi{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Bn(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ke(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Ee(e,oe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?oj(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function oj(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(Se(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}class lg extends xs{constructor(e,n,i){super(),i!==void 0&&n===void 0?this.setFlatCoordinates(i,e):(n=n||0,this.setCenterAndRadius(e,n,i))}clone(){const e=new lg(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){const s=this.flatCoordinates,o=e-s[0],a=n-s[1],l=o*o+a*a;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)i[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);i[0]=s[0]+u*o,i[1]=s[1]+u*a;for(let c=2;c<this.stride;++c)i[c]=s[c]}return i.length=this.stride,l}return r}containsXY(e,n){const i=this.flatCoordinates,r=e-i[0],s=n-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,i=n[this.stride]-n[0];return Bi(n[0]-i,n[1]-i,n[0]+i,n[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(Ht(e,n)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:B_(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],r=e.slice();r[n]=r[0]+i;for(let s=1;s<n;++s)r[n+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,n,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=cR(r,0,e,this.stride);r[s++]=r[0]+n;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const i=this.getCenter(),r=this.getStride();this.setCenter(n1(i,0,i.length,r,e,n,i)),this.changed()}}lg.prototype.transform;class Ku extends uR{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ke),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)this.changeEventsKeys_.push(Ee(e[n],oe.CHANGE,this.changed,this))}clone(){const e=new Ku(G0(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<so(this.getExtent(),e,n))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,n,i,r);return r}containsXY(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,n))return!0;return!1}computeExtent(e){el(e);const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)j_(e,n[i].getExtent());return e}getGeometries(){return G0(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].getType()===this.getType()?e=e.concat(n[i].getGeometriesArrayRecursive()):e.push(n[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(r=!0)}return r?new Ku(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,n);this.changed()}scale(e,n,i){i||(i=mr(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,n,i);this.changed()}setGeometries(e){this.setGeometriesArray(G0(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].applyTransform(e);this.changed()}translate(e,n){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function G0(t){return t.map(e=>e.clone())}function nd(t,e,n,i,r,s,o){let a,l;const u=(n-e)/i;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=t[e],h=t[e+1],f=0;const g=[0];for(let m=e+i;m<n;m+=i){const _=t[m],y=t[m+1];f+=Math.sqrt((_-c)*(_-c)+(y-h)*(y-h)),g.push(f),c=_,h=y}const d=r*f,p=u8(g,d);p<0?(l=(d-g[-p-2])/(g[-p-1]-g[-p-2]),a=e+(-p-2)*i):a=e+p*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?t[a+c]:En(t[a+c],t[a+i+c],l);return s}function Fp(t,e,n,i,r,s){if(n==e)return null;let o;if(r<t[e+i-1])return s?(o=t.slice(e,e+i),o[i-1]=r,o):null;if(t[n-1]<r)return s?(o=t.slice(n-i,n),o[i-1]=r,o):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const f=a+l>>1;r<t[(f+1)*i-1]?l=f:a=f+1}const u=t[a*i-1];if(r==u)return t.slice((a-1)*i,(a-1)*i+i);const c=t[(a+1)*i-1],h=(r-u)/(c-u);o=[];for(let f=0;f<i-1;++f)o.push(En(t[(a-1)*i+f],t[a*i+f],h));return o.push(r),o}function aj(t,e,n,i,r,s,o){if(o)return Fp(t,e,n[n.length-1],i,r,s);let a;if(r<t[i-1])return s?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return s?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,u=n.length;l<u;++l){const c=n[l];if(e!=c){if(r<t[e+i-1])return null;if(r<=t[c-1])return Fp(t,e,c,i,r,!1);e=c}}return null}class Ui extends xs{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){Wn(this.flatCoordinates,e),this.changed()}clone(){const e=new Ui(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<so(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(i1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),s1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,r))}forEachSegment(e){return pR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Fp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return nd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return db(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=Kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Ui(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return qd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yd(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ua extends xs{constructor(e,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,e),this.ends_=i;else{const r=e,s=[],o=[];for(let l=0,u=r.length;l<u;++l){const c=r[l];Wn(s,c.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Wn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ua(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<so(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,i,r))}getCoordinateAtM(e,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,aj(this.flatCoordinates,0,this.ends_,this.stride,e,n,i))}getCoordinates(){return Uu(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ui(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new Ui(e.slice(s,l),i);r.push(u),s=l}return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=nd(n,i,l,s,.5);Wn(e,u),i=l}return e}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=fR(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,i),new Ua(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return TG(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ec(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class Mc extends xs{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){Wn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Mc(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){if(r<so(this.getExtent(),e,n))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=ar(e,n,s[a],s[a+1]);if(u<r){r=u;for(let c=0;c<o;++c)i[c]=s[a+c];i.length=o}}return r}getCoordinates(){return zr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new Gi(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new Gi(e.slice(s,s+i),n);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,i=this.stride;for(let r=0,s=n.length;r<s;r+=i){const o=n[r],a=n[r+1];if(U_(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yd(this.flatCoordinates,0,e,this.stride),this.changed()}}function _b(t,e,n,i){const r=[];let s=In();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=z_(t,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class za extends xs{constructor(e,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=s.length,h=u.getEnds();for(let f=0,g=h.length;f<g;++f)h[f]+=c;Wn(s,u.getFlatCoordinates()),o.push(h)}n=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}n!==void 0&&i?(this.setFlatCoordinates(n,e),this.endss_=i):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Wn(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let r=0,s=n.length;r<s;++r)n[r]+=i}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let r=0;r<e;++r)n[r]=this.endss_[r].slice();const i=new za(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(e,n,i,r){return r<so(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_G(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return CG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return wG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),wp(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,Ep(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=_b(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=mR(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Mc(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;vR(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=wp(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=EG(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,i),new za(n,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(n!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=n;return new $i(this.flatCoordinates.slice(n,r),this.layout,i)}getPolygons(){const e=this.layout,n=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const c=new $i(n.slice(s,u),e,l);r.push(c),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return MG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=hR(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const G2=Ut();class wn{constructor(e,n,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?WM(this.flatCoordinates_):z_(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=mr(this.getExtent());this.flatInteriorPoints_=u1(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=bG(this.flatCoordinates_,this.ends_),n=_b(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=mR(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=nd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=nd(e,n,o,2,.5);Wn(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=De(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const r=ut(i)/ut(n);ci(G2,i[0],i[3],r,-r,0,0,0),Jr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,G2,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new wn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=BM((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=Kd(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=fR(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=a1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new wn(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}wn.prototype.getFlatCoordinates=wn.prototype.getOrientedFlatCoordinates;class vb extends gi{constructor(e){super(),this.projection=De(e.projection),this.attributions_=U2(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=U2(e),this.changed()}setState(e){this.state_=e,this.changed()}}function U2(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Nn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function lj(t,e){return[[-1/0,-1/0,1/0,1/0]]}let uj=!1;function cj(t,e,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,r):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=uj,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:n,featureProjection:r}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function z2(t,e){return function(n,i,r,s,o){const a=this;cj(t,e,n,i,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||Aa)}}class Ir extends di{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class ga extends vb{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Aa,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Se(this.format_,"`format` must be set when `url` is set"),this.loader_=z2(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:lj;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new N2:null,this.loadedExtentsRtree_=new N2,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!n&&i===void 0&&(i=new ri(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=le(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Ir(Nn.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof wn||(this.featureChangeKeys_[e]=[Ee(n,oe.CHANGE,this.handleFeatureChange_,this),Ee(n,Pa.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof wn){const s=this.idIndex_[r];s instanceof wn?Array.isArray(s)?s.push(n):this.idIndex_[r]=[s,n]:i=!1}else i=!1}return i&&(Se(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=le(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=le(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();n.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(Nn.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Ir(Nn.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(Nn.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(Nn.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(mt.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(mt.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ke);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Ir(Nn.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof wn||s.intersectsCoordinate(e))return n(r)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof wn||r.intersectsExtent(e)){const s=n(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Zs(this.nullGeometryFeatures_)||Wn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=$_(e,n);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||is,this.featuresRtree_.forEachInExtent(l,function(u){if(n(u)){const c=u.getGeometry(),h=a;if(a=c instanceof wn?0:c.closestPointXY(i,r,o,a),a<h){s=u;const f=Math.sqrt(a);l[0]=i-f,l[1]=r-f,l[2]=i+f,l[3]=r+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=le(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Ir(Nn.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:le(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Zs(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,n,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(c){return Ls(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ir(Nn.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ir(Nn.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ir(Nn.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,i=n.forEachInExtent(e,function(r){if(Du(r.extent,e))return r});i&&n.remove(i)}removeFeatures(e){let n=!1;for(let i=0,r=e.length;i<r;++i)n=this.removeFeatureInternal(e[i])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=le(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[n];i==null||i.forEach(ke),delete this.featureChangeKeys_[n];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(Nn.REMOVEFEATURE)&&this.dispatchEvent(new Ir(Nn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){Se(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(z2(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ma={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Eo=[0,0,0],Pr=5;class N1{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Se(f8(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Se(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=pr(i)),Se(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Se(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:F_,Se(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new og(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const r=this.getTileRangeForExtentAndZ(e,n);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,s,a])}forEachTileCoordParentTileRange(e,n,i,r){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=_o(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,u,i),n(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return _o(s,s+1,o,o+1,n)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(n===r)return _o(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-r),u=Math.floor(s*l),c=Math.floor(o*l);if(n<r)return _o(u,u,c,c,i);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return _o(u,h,c,f,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,Eo);const r=Eo[1],s=Eo[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,Eo);const o=Eo[1],a=Eo[2];return _o(r,o,s,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=et(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=et(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return Bi(o,a,l,u,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),u=et(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/i/u[0],h=a*(l[1]-n)/i/u[1];return r?(c=th(c,Pr)-1,h=th(h,Pr)-1):(c=eh(c,Pr),h=eh(h,Pr)),Ga(o,c,h,s)}getTileCoordForXYAndZ_(e,n,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=et(this.getTileSize(i),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-n)/a/l[1];return r?(u=th(u,Pr)-1,c=th(c,Pr)-1):(u=eh(u,Pr),c=eh(c,Pr)),Ga(i,u,c,s)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=D_(this.resolutions_,e,n||0);return Ne(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return yR(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function G1(t){let e=t.getDefaultTileGrid();return e||(e=dj(t),t.setDefaultTileGrid(e)),e}function hj(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=ug(n);if(!rs(s,r)){const o=ve(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,t.getTileCoordForCoordAndZ(r,i)}return e}function fj(t,e,n,i){i=i!==void 0?i:"top-left";const r=Eb(t,e,n);return new N1({extent:t,origin:b8(t,i),resolutions:r,tileSize:n})}function xb(t){const e=t||{},n=e.extent||De("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Eb(n,e.maxZoom,e.tileSize,e.maxResolution)};return new N1(i)}function Eb(t,e,n,i){e=e!==void 0?e:y8,n=et(n!==void 0?n:F_);const r=ut(t),s=ve(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function dj(t,e,n,i){const r=ug(t);return fj(r,e,n,i)}function ug(t){t=De(t);let e=t.getExtent();if(!e){const n=180*N_.degrees/t.getMetersPerUnit();e=Bi(-n,-n,n,n)}return e}class wb extends vb{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&et(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||le(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,s){return ae()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:G1(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(n),o=et(r.getTileSize(e),this.tmpSize);return s==1?o:nU(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const i=n!==void 0?n:this.getProjection(),r=n!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=hj(r,e,i)),gz(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Sb extends di{constructor(e,n){super(e),this.tile=n}}class gj extends wb{constructor(e){const n=e.projection===void 0?"EPSG:3857":e.projection;let i=e.tileGrid;i===void 0&&n&&(i=xb({extent:ug(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:n,tileGrid:i,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?et(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?et(n.getTileSize(e)):[256,256]}getGutterForProjection(e){const n=this.getProjection();return(!n||Bs(n,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,n,i,r,s){const o=this.tileGrid||this.getTileGridForProjection(s||r),a=Math.max.apply(null,o.getResolutions().map((g,d)=>{const p=et(o.getTileSize(d)),m=this.getTileSize(d);return Math.max(m[0]/p[0],m[1]/p[1])})),l=this.getTileGridForProjection(r),u=[e,n,i],c=this.getTileCoordForTileUrlFunction(u,r),h=Object.assign({sourceProj:s||r,sourceTileGrid:o,targetProj:r,targetTileGrid:l,tileCoord:u,wrappedTileCoord:c,pixelRatio:a,gutter:this.gutter_,getTileFunction:(g,d,p,m)=>this.getTile(g,d,p,m),transformMatrix:this.transformMatrix},this.tileOptions),f=new rg(h);return f.key=this.getKey(),f}getTile(e,n,i,r,s){var v;const o=this.getProjection();if(s&&(o&&!Bs(o,s)||this.transformMatrix))return this.getReprojTile_(e,n,i,s,o);const a=this.getTileSize(e),l=this.loader_,u=new AbortController,c={signal:u.signal,crossOrigin:this.crossOrigin_},h=this.getTileCoordForTileUrlFunction([e,n,i]);if(!h)return null;const f=h[0],g=h[1],d=h[2],p=(v=this.getTileGrid())==null?void 0:v.getFullTileRange(f);p&&(c.maxY=p.getHeight()-1);function m(){return $M(function(){return l(f,g,d,c)})}const _=Object.assign({tileCoord:[e,n,i],loader:m,size:a,controller:u},this.tileOptions),y=new Yu(_);return y.key=this.getKey(),y.addEventListener(oe.CHANGE,this.handleTileChange_),y}handleTileChange_(e){const n=e.target,i=le(n),r=n.getState();let s;r==Y.LOADING?(this.tileLoadingKeys_[i]=!0,s=ma.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==Y.ERROR?ma.TILELOADERROR:r==Y.LOADED?ma.TILELOADEND:void 0),s&&this.dispatchEvent(new Sb(s,n))}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Bs(n,e))&&!this.transformMatrix)return this.tileGrid;const i=le(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=G1(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,n){const i=De(e);if(i){const r=le(i);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=n)}}}function mj(t){return((t.fileDirectory.NewSubfileType||0)&4)===4}function pj(t,e){if(!t)return!1;if(t===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const n=e.fileDirectory.PhotometricInterpretation,i=nn;return n===i.CMYK||n===i.YCbCr||n===i.CIELab||n===i.ICCLab}const j2="STATISTICS_MAXIMUM",B2="STATISTICS_MINIMUM",U0=256;let z0;function yj(){return z0||(z0=new Q3),z0}function _j(t){try{return t.getBoundingBox(!0)}catch{return[0,0,t.getWidth(),t.getHeight()]}}function vj(t){try{return t.getOrigin().slice(0,2)}catch{return[0,t.getHeight()]}}function xj(t,e){try{return t.getResolution(e)}catch{return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function Ej(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+e.ProjectedCSTypeGeoKey;let i=De(n);if(!i){const r=PE(e.ProjLinearUnitsGeoKey);r&&(i=new Oa({code:n,units:r}))}return i}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const n="EPSG:"+e.GeographicTypeGeoKey;let i=De(n);if(!i){const r=PE(e.GeogAngularUnitsGeoKey);r&&(i=new Oa({code:n,units:r}))}return i}return null}function wj(t){return t.getImageCount().then(function(e){const n=new Array(e);for(let i=0;i<e;++i)n[i]=t.getImage(i);return Promise.all(n)})}function Sj(t,e){let n;return t.blob?n=Tk(t.blob):t.overviews?n=Mk(t.url,t.overviews,e):n=Ck(t.url,e),n.then(wj)}function jl(t,e,n,i,r){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const o=new Error(i);throw r(o),o}for(let o=0;o<s;++o)jl(t[o],e[o],n,i,r);return}if(e=e,Math.abs(t-e)>n*t)throw new Error(i)}function Cj(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function Tj(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class Mj extends gj{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const n=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(s=>s.url).join(","));const i=this,r=new Array(n);for(let s=0;s<n;++s)r[s]=Sj(this.sourceInfo_[s],this.sourceOptions_);Promise.all(r).then(function(s){i.configure_(s)}).catch(function(s){UE(s),i.error_=s,i.setState("error")})}getError(){return this.error_}determineProjection(e){const n=e[0];for(let i=n.length-1;i>=0;--i){const r=n[i],s=Ej(r);if(s){this.projection=s;break}}}determineTransformMatrix(e){const n=e[0];for(let i=n.length-1;i>=0;--i){const s=n[i].fileDirectory.ModelTransformation;if(s){const[o,a,l,u,c,h,f,g]=s,d=Gu(Gu([1/Math.sqrt(o*o+c*c),0,0,-1/Math.sqrt(a*a+h*h),u,g],[o,c,a,h,0,0]),[1,0,0,1,-u,-g]);this.transformMatrix=d,this.addAlpha_=!0;break}}}configure_(e){let n,i,r,s,o;const a=new Array(e.length),l=new Array(e.length),u=new Array(e.length);let c=0;const h=e.length;for(let m=0;m<h;++m){const _=[],y=[];e[m].forEach(R=>{mj(R)?y.push(R):_.push(R)});const v=_.length;if(y.length>0&&y.length!==v)throw new Error(`Expected one mask per image found ${y.length} masks and ${v} images`);let x,E;const w=new Array(v),C=new Array(v),S=new Array(v);l[m]=new Array(v),u[m]=new Array(v);for(let R=0;R<v;++R){const M=_[R],k=M.getGDALNoData();u[m][R]=M.getGDALMetadata(0),l[m][R]=k;const A=this.sourceInfo_[m].bands;a[m]=A?A.length:M.getSamplesPerPixel();const U=v-(R+1);x||(x=_j(M)),E||(E=vj(M));const B=xj(M,_[0]);S[U]=B[0];const G=[M.getTileWidth(),M.getTileHeight()];G[0]!==G[1]&&G[1]<U0&&(G[0]=U0,G[1]=U0),w[U]=G;const j=B[0]/Math.abs(B[1]);C[U]=[G[0],G[1]/j]}if(n?Kt(n,x,n):n=x,!i)i=E;else{const R=`Origin mismatch for source ${m}, got [${E}] but expected [${i}]`;jl(i,E,0,R,this.viewRejector)}if(!o)o=S,this.resolutionFactors_[m]=1;else{o.length-c>S.length&&(c=o.length-S.length);const R=o[o.length-1]/S[S.length-1];this.resolutionFactors_[m]=R;const M=S.map(A=>A*=R),k=`Resolution mismatch for source ${m}, got [${M}] but expected [${o}]`;jl(o.slice(c,o.length),M,.02,k,this.viewRejector)}r?jl(r.slice(c,r.length),C,.01,`Tile size mismatch for source ${m}`,this.viewRejector):r=C,s?jl(s.slice(c,s.length),w,0,`Tile size mismatch for source ${m}`,this.viewRejector):s=w,this.sourceImagery_[m]=_.reverse(),this.sourceMasks_[m]=y.reverse()}for(let m=0,_=this.sourceImagery_.length;m<_;++m){const y=this.sourceImagery_[m];for(;y.length<o.length;)y.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u;e:for(let m=0;m<h;++m){if(this.sourceInfo_[m].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[m].length){this.addAlpha_=!0;break}const _=l[m],y=this.sourceInfo_[m].bands;if(y){for(let v=0;v<y.length;++v)if(_[y[v]-1]!==null){this.addAlpha_=!0;break e}continue}for(let v=0;v<_.length;++v)if(_[v]!==null){this.addAlpha_=!0;break e}}let f=this.addAlpha_?1:0;for(let m=0;m<h;++m)f+=a[m];this.bandCount=f;const g=new N1({extent:n,minZoom:c,origin:i,resolutions:o,tileSizes:r});this.tileGrid=g,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const d=1;o.length===2?o=[o[0],o[1],o[1]/2]:o.length===1&&(o=[o[0]*2,o[0],o[0]/2]);let p=n;if(this.transformMatrix){const m=t1(Ut(),this.transformMatrix.slice()),_=Vf(y=>it(m,y));p=O8(n,_)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:Xf(mr(p),this.projection),extent:q_(p,this.projection),zoom:d})}loadTile_(e,n,i,r){const s=this.getTileSize(e),o=this.sourceImagery_.length,a=new Array(o*2),l=this.nodataValues_,u=this.sourceInfo_,c=yj();for(let h=0;h<o;++h){const f=u[h],g=this.resolutionFactors_[h],d=[Math.round(n*(s[0]*g)),Math.round(i*(s[1]*g)),Math.round((n+1)*(s[0]*g)),Math.round((i+1)*(s[1]*g))],p=this.sourceImagery_[h][e];let m;f.bands&&(m=f.bands.map(function(E){return E-1}));let _;"nodata"in f&&f.nodata!==null?_=f.nodata:m?_=m.map(function(E){return l[h][E]}):_=l[h];const y={window:d,width:s[0],height:s[1],samples:m,fillValue:_,pool:c,interleave:!1,signal:r.signal};pj(this.convertToRGB_,p)?a[h]=p.readRGB(y):a[h]=p.readRasters(y);const v=o+h,x=this.sourceMasks_[h][e];if(!x){a[v]=Promise.resolve(null);continue}a[v]=x.readRasters({window:d,width:s[0],height:s[1],samples:[0],pool:c,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,s)).catch(function(h){throw UE(h),h})}composeTile_(e,n){const i=this.metadata_,r=this.sourceInfo_,s=this.sourceImagery_.length,o=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,c=this.addAlpha_,h=e[0]*e[1],f=h*o;let g;u?g=new Uint8Array(f):g=new Float32Array(f);let d=0;for(let p=0;p<h;++p){let m=c;for(let _=0;_<s;++_){const y=r[_];let v=y.min,x=y.max,E,w;if(u){const C=i[_][0];v===void 0&&(C&&B2 in C?v=parseFloat(C[B2]):v=Cj(n[_][0])),x===void 0&&(C&&j2 in C?x=parseFloat(C[j2]):x=Tj(n[_][0])),E=255/(x-v),w=-v*E}for(let C=0;C<a[_];++C){const S=n[_][C][p];let R;if(u?R=Ne(E*S+w,0,255):R=S,!c)g[d]=R;else{let M=y.nodata;if(M===void 0){let A;y.bands?A=y.bands[C]-1:A=C,M=l[_][A]}const k=isNaN(M);(!k&&S!==M||k&&!isNaN(S))&&(m=!1,g[d]=R)}d++}if(!m){const C=s+_,S=n[C];S&&!S[0][p]&&(m=!0)}}c&&(m||(g[d]=255),d++)}return g}}function Rj(t){const e=Object.keys(t.defs),n=e.length;let i,r;for(i=0;i<n;++i){const s=e[i];if(!Wh(s)){const o=t.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),$f(new Oa({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(i=0;i<n;++i){const s=e[i],o=Wh(s);for(r=0;r<n;++r){const a=e[r],l=Wh(a);if(!Hh(s,a))if(t.defs[s]===t.defs[a])xp([o,l]);else{const u=t(s,a);eG(o,l,jE(o,l,u.forward),jE(l,o,u.inverse))}}}}Mt.defs("EPSG:25832","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs");Rj(Mt);const Cb=({url:t,center:e})=>{const n=T.useRef(null),i=T.useRef(null),r=T.useRef(null),s=()=>{var o;if(i.current){i.current.getLayers().getArray().forEach(u=>{var c,h,f;u.getSource()&&((h=(c=u.getSource()).dispose)==null||h.call(c)),(f=u.dispose)==null||f.call(u)});const l=(o=n.current)==null?void 0:o.querySelector("canvas");if(l){const u=l.getContext("webgl");if(u){const c=u.getExtension("WEBGL_lose_context");c&&c.loseContext()}}i.current.setTarget(null),i.current.dispose(),i.current=null}};return T.useEffect(()=>{if(t){if(!i.current){const o=new Mj({sources:[{url:t,bands:[1,2,3]}],convertToRGB:!0,transition:0}),a=new ga,l=new Tc({source:a}),u=new I1({target:n.current,layers:[new ub({source:o}),l],view:new jn({zoom:18,minZoom:13,maxZoom:18,projection:"EPSG:25832"})});if(i.current=u,r.current=u.getView(),e){const c=new Bn({geometry:new Gi(e)});c.setStyle(new cn({image:new wc({src:"src/assets/marker.svg",scale:.05,opacity:.75})})),a.addFeature(c)}}return()=>{s()}}},[t,e]),T.useEffect(()=>{r.current&&e&&r.current.setCenter(e)},[e]),T.useEffect(()=>{const o=n.current;let a=!1,l=!1;const u=()=>{a=!0,setTimeout(()=>{!l&&a&&(o.style.cursor="grabbing")},250)},c=()=>{a=!1,o.style.cursor="crosshair"},h=()=>{l=!0,setTimeout(()=>{l=!1},400)};return o&&(o.style.cursor="crosshair",o.addEventListener("mousedown",u),o.addEventListener("mouseup",c),o.addEventListener("dblclick",h)),()=>{o&&(o.removeEventListener("mousedown",u),o.removeEventListener("mouseup",c),o.removeEventListener("dblclick",h))}},[]),I.jsx("div",{className:"map-container",ref:n,style:{width:"100%",height:"100%"}})},At={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Tb extends gi{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+rU,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(At.ELEMENT,this.handleElementChanged),this.addChangeListener(At.MAP,this.handleMapChanged),this.addChangeListener(At.OFFSET,this.handleOffsetChanged),this.addChangeListener(At.POSITION,this.handlePositionChanged),this.addChangeListener(At.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(At.ELEMENT)}getId(){return this.id}getMap(){return this.get(At.MAP)||null}getOffset(){return this.get(At.OFFSET)}getPosition(){return this.get(At.POSITION)}getPositioning(){return this.get(At.POSITIONING)}handleElementChanged(){bR(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var n;this.mapPostrenderListenerKey&&((n=this.element)==null||n.remove(),ke(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Ee(e,er.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(At.ELEMENT,e)}setMap(e){this.set(At.MAP,e)}setOffset(e){this.set(At.OFFSET,e)}setPosition(e){this.set(At.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(At.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),r=this.getElement(),s=this.getRect(r,[KG(r),qG(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Ls(i,s)){const a=s[0]-i[0],l=i[2]-s[2],u=s[1]-i[1],c=i[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const f=n.getView().getCenterInternal(),g=n.getPixelFromCoordinateInternal(f);if(!g)return;const d=[g[0]+h[0],g[1]+h[1]],p=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(d),duration:p.duration,easing:p.easing})}}}getRect(e,n){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+n[0],s+n[1]]}setPositioning(e){this.set(At.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(n),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,n){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let l="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}}function j0(t,e,n,i){return`${t},${sb(e,n,i)}`}function B0(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const i=t[n],r=i.has(e);return r||i.add(e),!r}function bj(t,e,n){const i=t[n];return i?i.delete(e):!1}function $2(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Kt(e,Ai(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(t.viewState.projection).getExtent();r&&(e=Kt(e,r))}return e}class Ij extends fb{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=In(),this.tempTileRange_=new og(0,0,0,0),this.tempTileCoord_=Ga(0,0,0);const i=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new nb(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,n,i,r){const s=this.tileCache_,a=this.getLayer().getSource(),l=j0(a.getKey(),e,n,i);let u;if(s.containsKey(l))u=s.get(l);else{if(u=a.getTile(e,n,i,r.pixelRatio,r.viewState.projection),!u)return null;s.set(l,u)}return u}getTile(e,n,i,r){const s=this.getOrCreateTile(e,n,i,r);return s||null}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=it(n.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!rs(s,r))return null;const o=n.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),u=a.getTilePixelRatio(n.pixelRatio);for(let c=l.getZForResolution(o.resolution);c>=l.getMinZoom();--c){const h=l.getTileCoordForCoordAndZ(r,c),f=this.getTile(c,h[1],h[2],n);if(!f||f.getState()!==Y.LOADED)continue;const g=l.getOrigin(c),d=et(l.getTileSize(c)),p=l.getResolution(c);let m;if(f instanceof sg||f instanceof Na)m=f.getImage();else if(f instanceof Yu){if(m=Fa(f.getData()),!m)continue}else continue;const _=Math.floor(u*((r[0]-g[0])/p-h[1]*d[0])),y=Math.floor(u*((g[1]-r[1])/p-h[2]*d[1])),v=Math.round(u*a.getGutterForProjection(o.projection));return this.getImageData(m,_+v,y+v)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const i=n.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===n.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,n,i,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=le(l);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],f=a.getMapInternal(),g=Math.max(i-s,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let d=i;d>=g;--d){const p=u.getTileRangeForExtentAndZ(n,d,this.tempTileRange_),m=u.getResolution(d);for(let _=p.minX;_<=p.maxX;++_)for(let y=p.minY;y<=p.maxY;++y){const v=this.getTile(d,_,y,e);if(!v||!B0(r,v,d))continue;const E=v.getKey();if(h[E]=!0,v.getState()===Y.IDLE&&!e.tileQueue.isKeyQueued(E)){const w=Ga(d,_,y,this.tempTileCoord_);e.tileQueue.enqueue([v,c,u.getTileCoordCenter(w),m])}}}}findStaleTile_(e,n){const i=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const u=j0(a[l],r,s,o);if(i.containsKey(u)){const c=i.get(u);if(c.getState()===Y.LOADED)return c.endTransition(le(this)),B0(n,c,r),!0}}return!1}findAltTiles_(e,n,i,r){const s=e.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,u=this.getLayer().getRenderSource().getKey();for(let c=s.minX;c<=s.maxX;++c)for(let h=s.minY;h<=s.maxY;++h){const f=j0(u,i,c,h);let g=!1;if(a.containsKey(f)){const d=a.get(f);d.getState()===Y.LOADED&&(B0(r,d,i),g=!0)}g||(o=!1)}return o}renderFrame(e,n){let i=!0;this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],s=e.viewState,o=s.projection,a=s.resolution,l=s.center,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),f=h.getRevision(),g=h.getTileGridForProjection(o),d=g.getZForResolution(a,h.zDirection),p=g.getResolution(d),m=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==m&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=m):this.renderedSourceKey_=m;let _=e.extent;const y=h.getTilePixelRatio(u);this.prepareContainer(e,n);const v=this.context.canvas.width,x=this.context.canvas.height,E=r.extent&&Ai(r.extent);E&&(_=Kt(_,Ai(r.extent)));const w=p*v/2/y,C=p*x/2/y,S=[l[0]-w,l[1]-C,l[0]+w,l[1]+C],R={};this.renderedTiles.length=0;const M=c.getPreload();if(e.nextExtent){const P=g.getZForResolution(s.nextResolution,h.zDirection),N=$2(e,e.nextExtent);this.enqueueTiles(e,N,P,R,M)}const k=$2(e,_);if(this.enqueueTiles(e,k,d,R,0),M>0&&setTimeout(()=>{this.enqueueTiles(e,k,d-1,R,M-1)},0),!(d in R))return this.container;const A=le(this),U=e.time;for(const P of R[d]){const N=P.getState();if((P instanceof Na||P instanceof rg)&&N===Y.EMPTY)continue;const z=P.tileCoord;if(N===Y.LOADED&&P.getAlpha(A,U)===1){P.endTransition(A);continue}if(N!==Y.IDLE&&(i=!1),N!==Y.ERROR&&(this.renderComplete=!1),this.findStaleTile_(z,R)){bj(R,P,d),e.animate=!0;continue}if(this.findAltTiles_(g,z,d+1,R))continue;const q=g.getMinZoom();for(let Z=d-1;Z>=q&&!this.findAltTiles_(g,z,Z,R);--Z);}const B=p/a*u/y,G=this.getRenderContext(e);ci(this.tempTransform,v/2,x/2,B,B,0,-v/2,-x/2),r.extent&&this.clipUnrotated(G,e,E),h.getInterpolate()||(G.imageSmoothingEnabled=!1),this.preRender(G,e);const j=Object.keys(R).map(Number);j.sort(or);let $;const O=[],F=[];for(let P=j.length-1;P>=0;--P){const N=j[P],z=h.getTilePixelSize(N,u,o),L=g.getResolution(N)/p,q=z[0]*L*B,Z=z[1]*L*B,te=g.getTileCoordForCoordAndZ(pr(S),N),xe=g.getTileCoordExtent(te),Be=it(this.tempTransform,[y*(xe[0]-S[0])/p,y*(S[3]-xe[3])/p]),$e=y*h.getGutterForProjection(o);for(const Bt of R[N]){if(Bt.getState()!==Y.LOADED)continue;const yn=Bt.tileCoord,mi=te[1]-yn[1],pi=Math.round(Be[0]-(mi-1)*q),_n=te[2]-yn[2],qn=Math.round(Be[1]-(_n-1)*Z),tn=Math.round(Be[0]-mi*q),bt=Math.round(Be[1]-_n*Z),vn=pi-tn,nt=qn-bt,Es=j.length===1;let Zn=!1;$=[tn,bt,tn+vn,bt,tn+vn,bt+nt,tn,bt+nt];for(let lo=0,uo=O.length;lo<uo;++lo)if(!Es&&N<F[lo]){const ht=O[lo];Ht([tn,bt,tn+vn,bt+nt],[ht[0],ht[3],ht[4],ht[7]])&&(Zn||(G.save(),Zn=!0),G.beginPath(),G.moveTo($[0],$[1]),G.lineTo($[2],$[3]),G.lineTo($[4],$[5]),G.lineTo($[6],$[7]),G.moveTo(ht[6],ht[7]),G.lineTo(ht[4],ht[5]),G.lineTo(ht[2],ht[3]),G.lineTo(ht[0],ht[1]),G.clip())}O.push($),F.push(N),this.drawTile(Bt,e,tn,bt,vn,nt,$e,Es),Zn&&G.restore(),this.renderedTiles.unshift(Bt),this.updateUsedTiles(e.usedTiles,h,Bt)}}if(this.renderedRevision=f,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Du(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.postRender(this.context,e),r.extent&&G.restore(),G.imageSmoothingEnabled=!0,this.renderComplete){const P=(N,z)=>{const H=le(h),L=z.wantedTiles[H],q=L?Object.keys(L).length:0;this.updateCacheSize(q),this.tileCache_.expireCache()};e.postRenderFunctions.push(P)}return!this.renderComplete&&!i&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,i,r,s,o,a,l){let u;if(e instanceof Yu){if(u=Fa(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(n),h=le(this),f=n.layerStatesArray[n.layerIndex],g=f.opacity*(l?e.getAlpha(h,n.time):1),d=g!==c.globalAlpha;d&&(c.save(),c.globalAlpha=g),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,r,s,o),d&&c.restore(),g!==f.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,i){const r=le(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}}class Mb extends YR{constructor(e){super(e)}createRenderer(){return new Ij(this,{cacheSize:this.getCacheSize()})}}const Pj=/\{z\}/g,Aj=/\{x\}/g,Oj=/\{y\}/g,Lj=/\{-y\}/g;function kj(t,e,n,i,r){return t.replace(Pj,e.toString()).replace(Aj,n.toString()).replace(Oj,i.toString()).replace(Lj,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function Dj(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}function Fj(t,e){return function(n,i,r){if(!n)return;let s;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return kj(t,o,n[1],n[2],s)}}function Nj(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Fj(t[r],e);return Gj(i)}function Gj(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const r=fz(e),s=ca(r,t.length);return t[s](e,n,i)}}class U1 extends wb{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===U1.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=le(n),r=n.getState();let s;r==Y.LOADING?(this.tileLoadingKeys_[i]=!0,s=ma.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==Y.ERROR?ma.TILELOADERROR:r==Y.LOADED?ma.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Sb(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=Dj(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Nj(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}}class Uj extends U1{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:zj,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:sg,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Bs(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Bs(n,e)))return this.tileGrid;const i=le(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=G1(e)),this.tileGridForProjection[i]}createTile_(e,n,i,r,s,o){const a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,u!==void 0?Y.IDLE:Y.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(oe.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,n,i,r,s){const o=this.getProjection();if(!o||!s||Bs(o,s))return this.getTileInternal(e,n,i,r,o||s);const a=[e,n,i],l=this.getKey(),u=this.getTileGridForProjection(o),c=this.getTileGridForProjection(s),h=this.getTileCoordForTileUrlFunction(a,s),f=new Na(o,u,s,c,a,h,this.getTilePixelRatio(r),this.getGutter(),(g,d,p,m)=>this.getTileInternal(g,d,p,m,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=l,f}getTileInternal(e,n,i,r,s){const o=this.getKey();return this.createTile_(e,n,i,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const i=De(e);if(i){const r=le(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}}function zj(t,e){t.getImage().src=e}class jj extends Uj{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:xb({extent:ug(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Bj='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Rb extends jj{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[Bj];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const dh={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class gh extends di{constructor(e,n){super(e),this.feature=n}}function $j(t,e){const n=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();bb(t,s,n)}return n}function mh(t,e){return ar(t[0],t[1],e[0],e[1])}function qo(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function ph(t,e,n){let i,r;e<n?(i=e,r=n):(i=n,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o){const l=Zo(t,i),u=Zo(t,r);return mh(l,u)}let a=0;if(i<s){const l=Zo(t,i),u=qo(t,s);a+=mh(l,u)}if(o<r){const l=qo(t,o),u=Zo(t,r);a+=mh(l,u)}for(let l=s;l<o-1;++l){const u=qo(t,l),c=qo(t,l+1);a+=mh(u,c)}return a}function bb(t,e,n){if(e instanceof Ui){yh(t,e.getCoordinates(),!1,n);return}if(e instanceof Ua){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)yh(t,i[r],!1,n);return}if(e instanceof $i){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)yh(t,i[r],!0,n);return}if(e instanceof za){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length;a<l;++a)yh(t,o[a],!0,n)}return}if(e instanceof Ku){const i=e.getGeometries();for(let r=0;r<i.length;++r)bb(t,i[r],n);return}}const $0={index:-1,endIndex:NaN};function Vj(t,e,n,i){const r=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let d=1/0,p;for(let m=0;m<g.length-1;++m){const _=g[m],y=g[m+1],v=Ib(r,s,_,y);v.squaredDistance<d&&(d=v.squaredDistance,p=m+v.along)}d<o&&(o=d,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?p<f.startIndex&&(p+=g.length):f.endIndex<f.startIndex&&p>f.startIndex&&(p-=g.length)),l=p,a=h)}const u=e.targets[a];let c=u.ring;if(e.targetIndex===a&&c){const h=Zo(u.coordinates,l),f=n.getPixelFromCoordinate(h);qM(f,e.startPx)>i&&(c=!1)}if(c){const h=u.coordinates,f=h.length,g=u.startIndex,d=l;if(g<d){const p=ph(h,g,d);ph(h,g,d-f)<p&&(l-=f)}else{const p=ph(h,g,d);ph(h,g,d+f)<p&&(l+=f)}}return $0.index=a,$0.endIndex=l,$0}function yh(t,e,n,i){const r=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],u=e[o+1],c=Ib(r,s,l,u);if(c.squaredDistance===0){const h=o+c.along;i.push({coordinates:e,ring:n,startIndex:h,endIndex:h});return}}}const V0={along:0,squaredDistance:0};function Ib(t,e,n,i){const r=n[0],s=n[1],o=i[0],a=i[1],l=o-r,u=a-s;let c=0,h=r,f=s;return(l!==0||u!==0)&&(c=Ne(((t-r)*l+(e-s)*u)/(l*l+u*u),0,1),h+=l*c,f+=u*c),V0.along=c,V0.squaredDistance=jd(ar(t,e,h,f),10),V0}function Zo(t,e){const n=t.length;let i=Math.floor(e);const r=e-i;i>=n?i-=n:i<0&&(i+=n);let s=i+1;s>=n&&(s-=n);const o=t[i],a=o[0],l=o[1],u=t[s],c=u[0]-a,h=u[1]-l;return[a+c*r,l+h*r]}class Xj extends ol{constructor(e){const n=e;n.stopDown||(n.stopDown=Qa),super(n),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Hj(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:is,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if(r==="Circle")i=(s,o,a)=>{const l=o||new lg([NaN,NaN]),u=ti(s[0]),c=KM(u,ti(s[s.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let s;r==="Point"?s=Gi:r==="LineString"?s=Ui:r==="Polygon"&&(s=$i),i=(o,a,l)=>(a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Tc({source:new ga({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Wj(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:R1,this.freehandCondition_,e.freehand?this.freehandCondition_=Pp:this.freehandCondition_=e.freehandCondition?e.freehandCondition:b1,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(bp.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=Pp:n=e:n=Ap,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===oe.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===Ie.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ie.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ie.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Ie.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=e.type===Ie.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Ie.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Ie.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Qi(Ie.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),i=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Uf([i,r]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=$j(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const i=e.startIndex<=e.endIndex,r=e.startIndex<=n;i===r?i&&n>e.endIndex||!i&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(i&&n<e.endIndex||!i&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let i=0;if(e<n){const r=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,n,i){if(n===i)return;const r=[];if(n<i){const s=Math.ceil(n);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(qo(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(qo(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const n=this.traceState_;if(!n.active||n.targetIndex===-1&&qM(n.startPx,e.pixel)<this.snapTolerance_)return;const i=Vj(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==i.index){if(n.targetIndex!==-1){const l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=n.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}n.targetIndex=i.index;const r=n.targets[n.targetIndex];r.endIndex=i.endIndex;const s=Zo(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,i=e.pixel,r=n[0]-i[0],s=n[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")r=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],n?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let l=0,u=s.length;l<u;l++){const c=s[l],h=a.getPixelFromCoordinate(c),f=e[0]-h[0],g=e[1]-h[1],d=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(f*f+g*g)<=d,i){this.finishCoordinate_=c;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Bn(new Gi(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Bn);const n=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new Ui(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const n=this.getMap().getView().getProjection(),i=Wf(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Bn(new Ui(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Bn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new gh(dh.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),i=this.sketchFeature_.getGeometry(),r=n.getView().getProjection(),s=Wf(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,n,i)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,i),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,i,r)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,i,r),n=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Mc([n])):this.type_==="MultiLineString"?e.setGeometry(new Ua([n])):this.type_==="MultiPolygon"&&e.setGeometry(new za([n])),this.dispatchEvent(new gh(dh.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new gh(dh.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let r;if(n==="LineString"||n==="Circle")r=this.sketchCoords_;else if(n==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Bn(new Gi(r)),this.updateSketchFeatures_(),this.dispatchEvent(new gh(dh.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function Wj(){const t=kR();return function(e,n){return t[e.getGeometry().getType()]}}function Hj(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const Yj=["north","south","east","west","nadir"],Kj=5,V2=5e5;function qj(){const t=T.useRef(null),e=T.useRef(null),[n,i]=T.useState({}),[r,s]=T.useState([728368.05,617430456e-2]),[o,a]=T.useState("north"),[l,u]=T.useState(null),[c,h]=T.useState(null),[f,g]=T.useState(null),d=T.useRef(null),p=T.useRef(null),[m,_]=T.useState(!1),[y,v]=T.useState(null),[x,E]=T.useState("skraafotos2023"),[w,C]=T.useState(!1),[S,R]=T.useState(null),[M,k]=T.useState(""),[A,U]=T.useState({message:null,statusCode:null});T.useEffect(()=>{const F=new ga,P=new Tc({source:F,style:new cn({fill:new Vi({color:"rgba(255, 255, 255, 0.5)"}),stroke:new cr({color:"#545C5D",width:3}),image:new il({radius:7,fill:new Vi({color:"#545C5D"})})})}),N=new I1({target:t.current,layers:[new Mb({source:new Rb}),P],view:new jn({center:[714841.046854,6194210065399e-6],zoom:10,projection:"EPSG:25832"})});if(h(N),v(P),d.current&&p.current){const z=new Tb({element:d.current,autoPan:{animation:{duration:250}}});g(z),N.addOverlay(z),p.current.onclick=function(){return z.setPosition(void 0),p.current.blur(),!1}}return()=>{N&&N.setTarget(null)}},[]),T.useEffect(()=>{if(!c)return;const F=z=>{Array.isArray(z)?document.getElementById("popup-content").innerHTML=`<p>Polygon:</p><code> Antal adresser i polygon: ${z.length}</code>`:document.getElementById("popup-content").innerHTML="<p>Loading data...</p>"},P=z=>{if(m)return;const H=z.coordinate;s(H);const L=c.getPixelFromCoordinate(H),q=c.getFeaturesAtPixel(L);if(q.length>0){const Z=q[0],te=Z.getProperties();document.getElementById("popup-content").innerHTML="<p>Loading data...</p>";const xe=te.polygonData;Array.isArray(xe)?F(xe):setTimeout(()=>{N(Z)},1e3),f.setPosition(H)}else document.getElementById("popup-content").innerHTML=`<p>You clicked here:</p><code>${H}</code>`,f.setPosition(H)},N=z=>{const L=z.getProperties().polygonData;Array.isArray(L)?F(L):setTimeout(()=>{N(z)},1e3)};return c.on("singleclick",P),c.once("postrender",()=>{const H=c.getLayers().getArray().find(L=>L.get("name")==="PolygonLayer");if(H){const L=H.getSource();L.on("addfeature",q=>{N(q.feature)}),L.on("changefeature",q=>{N(q.feature)}),L.on("clear",()=>{document.getElementById("popup-content").innerHTML="<p>No polygon data available</p>"})}}),()=>{c&&c.un("singleclick",P);const H=c.getLayers().getArray().find(L=>L.get("name")==="PolygonLayer");if(H){const L=H.getSource();L.un("addfeature",N),L.un("changefeature",N)}}},[c,w,m,f]),T.useEffect(()=>{if(!c||!y)return;const F=y.getSource(),P=new Xj({source:F,type:"Polygon"}),N=async z=>{C(!1);const H=z.feature,L=H.getGeometry();if(H.getId()||H.setId(`polygon-${Date.now()}`),eR(L)>V2){setTimeout(()=>{alert(`Polygon size exceeds the maximum limit of ${V2} square meters and has been removed.`);const te=H.getId(),xe=F.getFeatureById(te);xe?(F.removeFeature(xe),y.getSource().changed(),c.updateSize(),c.render()):console.warn("Feature to remove not found.")},100);return}const Z=L.getCoordinates();try{const te=await a8(Z);H.set("coordinates",Z),H.set("polygonData",te)}catch(te){console.error("Error setting polygon data:",te)}};return P.on("drawend",N),m?(C(!0),c.addInteraction(P)):(C(!1),c.removeInteraction(P)),()=>{c&&c.removeInteraction(P)}},[c,m,y]),T.useEffect(()=>{if(!r)return;(async()=>{var H,L;const P={},N={};let z=null;try{for(const q of Yj)try{const Z=await k_(r,q,x,Kj);if(Z.features&&Z.features.length>0){const te=Z.features[0],xe=((L=(H=te.assets)==null?void 0:H.data)==null?void 0:L.href)||null,Be=te;P[q]=xe,N[q]=Be,q===o&&(z=te)}else U({message:"Invalid authorization credentials",statusCode:401}),P[q]=null,N[q]=null}catch(Z){console.error(`Error fetching STAC items for ${q}:`,Z),U({message:"The API server seems to be down for the moment",statusCode:503}),P[q]=null,N[q]=null}if(R(z),i(P),z){const q=await zM(Zt.API_DHM_TOKENA,Zt.API_DHM_TOKENB,r),Z=await jM(r,z,q);Z&&Z.imageCoord&&u(Z.imageCoord)}}catch(q){console.error("Error fetching images or related data:",q),U({message:"The API server seems to be down for the moment",statusCode:503})}})()},[r,o,x,U]);const B=()=>{_(F=>!F)},G=()=>{if(!e.current)return;const F=e.current.querySelector("canvas");if(!F)return;const P=F.toDataURL("image/png"),N=document.createElement("a");N.href=P,N.download="geotiff_image.png",document.body.appendChild(N),N.click(),document.body.removeChild(N)},j=()=>{y&&y.getSource().clear()},$=async()=>{if(!y)return;const F=y.getSource().getFeatures().flatMap(P=>P.getGeometry().getCoordinates());try{const P=await fetch(`http://localhost:5000/add_polygon_collection/${M}`,{...Zt,method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(P.ok)alert(`Polygon data saved successfully for collection: ${M}!`);else if(P.status===409)alert(`Polygon data not saved for collection: ${M}! That collection name is already in use.`);else{const N=await P.text();console.error(`Failed to save polygon data. Status: ${P.status}, Message: ${N}`)}}catch(P){console.error(`Something went wrong with the PostGIS connector: 
	 ${P.message}`)}},O=F=>{k(F.target.value)};return I.jsxs("div",{className:"mapcenterpage",children:[I.jsx("div",{className:"map-header col-9",children:I.jsxs("div",{className:"toolbar",children:[I.jsx("div",{className:"select-container",children:I.jsxs("select",{className:"tool-btn",value:x,onChange:F=>E(F.target.value),children:[I.jsx("option",{value:"",disabled:!0,children:"Select Collection"}),I.jsx("option",{value:"skraafotos2023",children:"2023"}),I.jsx("option",{value:"skraafotos2021",children:"2021"}),I.jsx("option",{value:"skraafotos2019",children:"2019"}),I.jsx("option",{value:"skraafotos2017",children:"2017"})]})}),I.jsxs("button",{className:"tool-btn",onClick:B,children:[m?"Stop Drawing":"Draw Polygon",I.jsx("img",{src:"src/assets/polygon.svg",className:"btnSvg btnP",alt:"Polygon Icon"})]}),m&&I.jsx("button",{className:"tool-btn",onClick:j,children:"Clear"}),!m&&I.jsxs(I.Fragment,{children:[I.jsx("input",{onChange:O,placeholder:"Collection name"}),I.jsx("button",{className:"tool-btn",onClick:$,children:"Postgis polygon"})]}),I.jsxs("button",{className:"tool-btn",onClick:G,children:["Download ",I.jsx("img",{src:"src/assets/download.svg",className:"btnSvg btnD",alt:"Download Icon"})]})]})}),I.jsxs("div",{className:"mappage col-9",children:[I.jsx("div",{id:"map",className:"geomap",ref:t}),I.jsxs("div",{id:"popup",className:"ol-popup",ref:d,children:[I.jsx("a",{href:"#",id:"popup-closer",className:"ol-popup-closer",ref:p}),I.jsx("div",{id:"popup-content"})]}),A.message?I.jsxs("div",{className:"error-page",children:[I.jsxs("h1",{children:[" ",A.statusCode," "]}),I.jsxs("h2",{children:[" ",A.message," "]}),I.jsx("p",{children:" Please try again later"})]}):I.jsx("div",{className:"map-viewer",children:n[o]&&I.jsxs("div",{className:"high-quality-viewer",ref:e,children:[I.jsx(Cb,{url:n[o],center:l}),I.jsxs("div",{className:"compass",children:[I.jsx("div",{className:`direction north ${o==="north"?"active":""}`,onClick:()=>a("north"),children:"N"}),I.jsx("div",{className:`direction east ${o==="east"?"active":""}`,onClick:()=>a("east"),children:"E"}),I.jsx("div",{className:`direction south ${o==="south"?"active":""}`,onClick:()=>a("south"),children:"S"}),I.jsx("div",{className:`direction west ${o==="west"?"active":""}`,onClick:()=>a("west"),children:"W"}),I.jsx("div",{className:`direction nadir ${o==="nadir"?"active":""}`,onClick:()=>a("nadir"),children:"T"})]})]})})]})]})}var Pb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Pb);var Zj=Pb.exports;const Jj=tc(Zj);function se(){return se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},se.apply(null,arguments)}function Qj(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}function Np(t,e){return Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Np(t,e)}const e7=["xxl","xl","lg","md","sm","xs"],t7="xs",n7=T.createContext({prefixes:{},breakpoints:e7,minBreakpoint:t7});function i7(t,e){const{prefixes:n}=T.useContext(n7);return t||n[e]||e}var Ab={exports:{}},r7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s7=r7,o7=s7;function Ob(){}function Lb(){}Lb.resetWarningCache=Ob;var a7=function(){function t(i,r,s,o,a,l){if(l!==o7){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Lb,resetWarningCache:Ob};return n.PropTypes=n,n};Ab.exports=a7();var l7=Ab.exports;const ye=tc(l7),z1=T.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:i,...r},s)=>{const o=i7(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return I.jsx(n,{ref:s,...r,className:Jj(i,e?`${o}${a}`:o)})});z1.displayName="Container";/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function u7(t,e,n){return(e=h7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X2(Object(n),!0).forEach(function(i){u7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function c7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h7(t){var e=c7(t,"string");return typeof e=="symbol"?e:e+""}const W2=()=>{};let j1={},kb={},Db=null,Fb={mark:W2,measure:W2};try{typeof window<"u"&&(j1=window),typeof document<"u"&&(kb=document),typeof MutationObserver<"u"&&(Db=MutationObserver),typeof performance<"u"&&(Fb=performance)}catch{}const{userAgent:H2=""}=j1.navigator||{},ls=j1,ze=kb,Y2=Db,_h=Fb;ls.document;const Sr=!!ze.documentElement&&!!ze.head&&typeof ze.addEventListener=="function"&&typeof ze.createElement=="function",Nb=~H2.indexOf("MSIE")||~H2.indexOf("Trident/");var f7=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,d7=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Gb={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},g7={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ub=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],jt="classic",cg="duotone",m7="sharp",p7="sharp-duotone",zb=[jt,cg,m7,p7],y7={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},_7={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},v7=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),x7={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},E7=["fak","fa-kit","fakd","fa-kit-duotone"],K2={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},w7=["kit"],S7={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},C7=["fak","fakd"],T7={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},q2={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},vh={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},M7=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],R7=["fak","fa-kit","fakd","fa-kit-duotone"],b7={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},I7={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},P7={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},Gp={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},A7=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Up=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...M7,...A7],O7=["solid","regular","light","thin","duotone","brands"],jb=[1,2,3,4,5,6,7,8,9,10],L7=jb.concat([11,12,13,14,15,16,17,18,19,20]),k7=[...Object.keys(P7),...O7,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",vh.GROUP,vh.SWAP_OPACITY,vh.PRIMARY,vh.SECONDARY].concat(jb.map(t=>"".concat(t,"x"))).concat(L7.map(t=>"w-".concat(t))),D7={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const yr="___FONT_AWESOME___",zp=16,Bb="fa",$b="svg-inline--fa",Qs="data-fa-i2svg",jp="data-fa-pseudo-element",F7="data-fa-pseudo-element-pending",B1="data-prefix",$1="data-icon",Z2="fontawesome-i2svg",N7="async",G7=["HTML","HEAD","STYLE","SCRIPT"],Vb=(()=>{try{return!0}catch{return!1}})();function Rc(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[jt]}})}const Xb=X({},Gb);Xb[jt]=X(X(X(X({},{"fa-duotone":"duotone"}),Gb[jt]),K2.kit),K2["kit-duotone"]);const U7=Rc(Xb),Bp=X({},x7);Bp[jt]=X(X(X(X({},{duotone:"fad"}),Bp[jt]),q2.kit),q2["kit-duotone"]);const J2=Rc(Bp),$p=X({},Gp);$p[jt]=X(X({},$p[jt]),T7.kit);const V1=Rc($p),Vp=X({},I7);Vp[jt]=X(X({},Vp[jt]),S7.kit);Rc(Vp);const z7=f7,Wb="fa-layers-text",j7=d7,B7=X({},y7);Rc(B7);const $7=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],X0=g7,V7=[...w7,...k7],ou=ls.FontAwesomeConfig||{};function X7(t){var e=ze.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function W7(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}ze&&typeof ze.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=W7(X7(n));r!=null&&(ou[i]=r)});const Hb={styleDefault:"solid",familyDefault:jt,cssPrefix:Bb,replacementClass:$b,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ou.familyPrefix&&(ou.cssPrefix=ou.familyPrefix);const ja=X(X({},Hb),ou);ja.autoReplaceSvg||(ja.observeMutations=!1);const ee={};Object.keys(Hb).forEach(t=>{Object.defineProperty(ee,t,{enumerable:!0,set:function(e){ja[t]=e,au.forEach(n=>n(ee))},get:function(){return ja[t]}})});Object.defineProperty(ee,"familyPrefix",{enumerable:!0,set:function(t){ja.cssPrefix=t,au.forEach(e=>e(ee))},get:function(){return ja.cssPrefix}});ls.FontAwesomeConfig=ee;const au=[];function H7(t){return au.push(t),()=>{au.splice(au.indexOf(t),1)}}const Ar=zp,Li={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Y7(t){if(!t||!Sr)return;const e=ze.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=ze.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return ze.head.insertBefore(e,i),t}const K7="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function qu(){let t=12,e="";for(;t-- >0;)e+=K7[Math.random()*62|0];return e}function ll(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function X1(t){return t.classList?ll(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function Yb(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function q7(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(Yb(t[n]),'" '),"").trim()}function hg(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function W1(t){return t.size!==Li.size||t.x!==Li.x||t.y!==Li.y||t.rotate!==Li.rotate||t.flipX||t.flipY}function Z7(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},u={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:u}}function J7(t){let{transform:e,width:n=zp,height:i=zp,startCentered:r=!1}=t,s="";return r&&Nb?s+="translate(".concat(e.x/Ar-n/2,"em, ").concat(e.y/Ar-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/Ar,"em), calc(-50% + ").concat(e.y/Ar,"em)) "):s+="translate(".concat(e.x/Ar,"em, ").concat(e.y/Ar,"em) "),s+="scale(".concat(e.size/Ar*(e.flipX?-1:1),", ").concat(e.size/Ar*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Q7=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function Kb(){const t=Bb,e=$b,n=ee.cssPrefix,i=ee.replacementClass;let r=Q7;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let Q2=!1;function W0(){ee.autoAddCss&&!Q2&&(Y7(Kb()),Q2=!0)}var eB={mixout(){return{dom:{css:Kb,insertCss:W0}}},hooks(){return{beforeDOMElementCreation(){W0()},beforeI2svg(){W0()}}}};const _r=ls||{};_r[yr]||(_r[yr]={});_r[yr].styles||(_r[yr].styles={});_r[yr].hooks||(_r[yr].hooks={});_r[yr].shims||(_r[yr].shims=[]);var ki=_r[yr];const qb=[],Zb=function(){ze.removeEventListener("DOMContentLoaded",Zb),id=1,qb.map(t=>t())};let id=!1;Sr&&(id=(ze.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ze.readyState),id||ze.addEventListener("DOMContentLoaded",Zb));function tB(t){Sr&&(id?setTimeout(t,0):qb.push(t))}function bc(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?Yb(t):"<".concat(e," ").concat(q7(n),">").concat(i.map(bc).join(""),"</").concat(e,">")}function ew(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var H0=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,u,c;for(i===void 0?(l=1,c=e[s[0]]):(l=0,c=i);l<o;l++)u=s[l],c=a(c,e[u],u,e);return c};function nB(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function Xp(t){const e=nB(t);return e.length===1?e[0].toString(16):null}function iB(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function tw(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function Wp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=tw(e);typeof ki.hooks.addPack=="function"&&!i?ki.hooks.addPack(t,tw(e)):ki.styles[t]=X(X({},ki.styles[t]||{}),r),t==="fas"&&Wp("fa",e)}const{styles:Zu,shims:rB}=ki,Jb=Object.keys(V1),sB=Jb.reduce((t,e)=>(t[e]=Object.keys(V1[e]),t),{});let H1=null,Qb={},eI={},tI={},nI={},iI={};function oB(t){return~V7.indexOf(t)}function aB(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!oB(r)?r:null}const rI=()=>{const t=i=>H0(Zu,(r,s,o)=>(r[o]=H0(s,i,{}),r),{});Qb=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),eI=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),iI=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Zu||ee.autoFetchSvg,n=H0(rB,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});tI=n.names,nI=n.unicodes,H1=fg(ee.styleDefault,{family:ee.familyDefault})};H7(t=>{H1=fg(t.styleDefault,{family:ee.familyDefault})});rI();function Y1(t,e){return(Qb[t]||{})[e]}function lB(t,e){return(eI[t]||{})[e]}function Gs(t,e){return(iI[t]||{})[e]}function sI(t){return tI[t]||{prefix:null,iconName:null}}function uB(t){const e=nI[t],n=Y1("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function us(){return H1}const oI=()=>({prefix:null,iconName:null,rest:[]});function cB(t){let e=jt;const n=Jb.reduce((i,r)=>(i[r]="".concat(ee.cssPrefix,"-").concat(r),i),{});return zb.forEach(i=>{(t.includes(n[i])||t.some(r=>sB[i].includes(r)))&&(e=i)}),e}function fg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=jt}=e,i=U7[n][t];if(n===cg&&!t)return"fad";const r=J2[n][t]||J2[n][i],s=t in ki.styles?t:null;return r||s||null}function hB(t){let e=[],n=null;return t.forEach(i=>{const r=aB(ee.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function nw(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function dg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=Up.concat(R7),s=nw(t.filter(h=>r.includes(h))),o=nw(t.filter(h=>!Up.includes(h))),a=s.filter(h=>(i=h,!Ub.includes(h))),[l=null]=a,u=cB(s),c=X(X({},hB(o)),{},{prefix:fg(l,{family:u})});return X(X(X({},c),mB({values:t,family:u,styles:Zu,config:ee,canonical:c,givenPrefix:i})),fB(n,i,c))}function fB(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?sI(r):{},o=Gs(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Zu.far&&Zu.fas&&!ee.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const dB=zb.filter(t=>t!==jt||t!==cg),gB=Object.keys(Gp).filter(t=>t!==jt).map(t=>Object.keys(Gp[t])).flat();function mB(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===cg,l=e.includes("fa-duotone")||e.includes("fad"),u=o.familyDefault==="duotone",c=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||u||c)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&dB.includes(n)&&(Object.keys(s).find(f=>gB.includes(f))||o.autoFetchSvg)){const f=v7.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=Gs(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=us()||"fas"),i}class pB{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=X(X({},this.definitions[s]||{}),r[s]),Wp(s,r[s]);const o=V1[jt][s];o&&Wp(o,r[s]),rI()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(u=>{typeof u=="string"&&(e[s][u]=a)}),e[s][o]=a}),e}}let iw=[],Jo={};const pa={},yB=Object.keys(pa);function _B(t,e){let{mixoutsTo:n}=e;return iw=t,Jo={},Object.keys(pa).forEach(i=>{yB.indexOf(i)===-1&&delete pa[i]}),iw.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Jo[o]||(Jo[o]=[]),Jo[o].push(s[o])})}i.provides&&i.provides(pa)}),n}function Hp(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Jo[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function eo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Jo[t]||[]).forEach(s=>{s.apply(null,n)})}function cs(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return pa[t]?pa[t].apply(null,e):void 0}function Yp(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||us();if(e)return e=Gs(n,e)||e,ew(aI.definitions,n,e)||ew(ki.styles,n,e)}const aI=new pB,vB=()=>{ee.autoReplaceSvg=!1,ee.observeMutations=!1,eo("noAuto")},xB={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Sr?(eo("beforeI2svg",t),cs("pseudoElements2svg",t),cs("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;ee.autoReplaceSvg===!1&&(ee.autoReplaceSvg=!0),ee.observeMutations=!0,tB(()=>{wB({autoReplaceSvgRoot:e}),eo("watch",t)})}},EB={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Gs(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=fg(t[0]);return{prefix:n,iconName:Gs(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(ee.cssPrefix,"-"))>-1||t.match(z7))){const e=dg(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||us(),iconName:Gs(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=us();return{prefix:e,iconName:Gs(e,t)||t}}}},On={noAuto:vB,config:ee,dom:xB,parse:EB,library:aI,findIconDefinition:Yp,toHtml:bc},wB=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=ze}=t;(Object.keys(ki.styles).length>0||ee.autoFetchSvg)&&Sr&&ee.autoReplaceSvg&&On.dom.i2svg({node:e})};function gg(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>bc(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Sr)return;const n=ze.createElement("div");return n.innerHTML=t.html,n.children}}),t}function SB(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(W1(o)&&n.found&&!i.found){const{width:a,height:l}=n,u={x:a/l/2,y:.5};r.style=hg(X(X({},s),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function CB(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(ee.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:X(X({},r),{},{id:o}),children:i}]}]}function K1(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:u,extra:c,watchable:h=!1}=t,{width:f,height:g}=n.found?n:e,d=C7.includes(i),p=[ee.replacementClass,r?"".concat(ee.cssPrefix,"-").concat(r):""].filter(E=>c.classes.indexOf(E)===-1).filter(E=>E!==""||!!E).concat(c.classes).join(" ");let m={children:[],attributes:X(X({},c.attributes),{},{"data-prefix":i,"data-icon":r,class:p,role:c.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(g)})};const _=d&&!~c.classes.indexOf("fa-fw")?{width:"".concat(f/g*16*.0625,"em")}:{};h&&(m.attributes[Qs]=""),a&&(m.children.push({tag:"title",attributes:{id:m.attributes["aria-labelledby"]||"title-".concat(u||qu())},children:[a]}),delete m.attributes.title);const y=X(X({},m),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:X(X({},_),c.styles)}),{children:v,attributes:x}=n.found&&e.found?cs("generateAbstractMask",y)||{children:[],attributes:{}}:cs("generateAbstractIcon",y)||{children:[],attributes:{}};return y.children=v,y.attributes=x,o?CB(y):SB(y)}function rw(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=X(X(X({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Qs]="");const u=X({},o.styles);W1(r)&&(u.transform=J7({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);const c=hg(u);c.length>0&&(l.style=c);const h=[];return h.push({tag:"span",attributes:l,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}function TB(t){const{content:e,title:n,extra:i}=t,r=X(X(X({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=hg(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Y0}=ki;function Kp(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(ee.cssPrefix,"-").concat(X0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ee.cssPrefix,"-").concat(X0.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(ee.cssPrefix,"-").concat(X0.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const MB={found:!1,width:512,height:512};function RB(t,e){!Vb&&!ee.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function qp(t,e){let n=e;return e==="fa"&&ee.styleDefault!==null&&(e=us()),new Promise((i,r)=>{if(n==="fa"){const s=sI(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Y0[e]&&Y0[e][t]){const s=Y0[e][t];return i(Kp(s))}RB(t,e),i(X(X({},MB),{},{icon:ee.showMissingIcons&&t?cs("missingIconAbstract")||{}:{}}))})}const sw=()=>{},Zp=ee.measurePerformance&&_h&&_h.mark&&_h.measure?_h:{mark:sw,measure:sw},Bl='FA "6.7.1"',bB=t=>(Zp.mark("".concat(Bl," ").concat(t," begins")),()=>lI(t)),lI=t=>{Zp.mark("".concat(Bl," ").concat(t," ends")),Zp.measure("".concat(Bl," ").concat(t),"".concat(Bl," ").concat(t," begins"),"".concat(Bl," ").concat(t," ends"))};var q1={begin:bB,end:lI};const Kh=()=>{};function ow(t){return typeof(t.getAttribute?t.getAttribute(Qs):null)=="string"}function IB(t){const e=t.getAttribute?t.getAttribute(B1):null,n=t.getAttribute?t.getAttribute($1):null;return e&&n}function PB(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(ee.replacementClass)}function AB(){return ee.autoReplaceSvg===!0?qh.replace:qh[ee.autoReplaceSvg]||qh.replace}function OB(t){return ze.createElementNS("http://www.w3.org/2000/svg",t)}function LB(t){return ze.createElement(t)}function uI(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?OB:LB}=e;if(typeof t=="string")return ze.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(uI(s,{ceFn:n}))}),i}function kB(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const qh={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(uI(n),e)}),e.getAttribute(Qs)===null&&ee.keepOriginalSource){let n=ze.createComment(kB(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~X1(e).indexOf(ee.replacementClass))return qh.replace(t);const i=new RegExp("".concat(ee.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===ee.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>bc(s)).join(`
`);e.setAttribute(Qs,""),e.innerHTML=r}};function aw(t){t()}function cI(t,e){const n=typeof e=="function"?e:Kh;if(t.length===0)n();else{let i=aw;ee.mutateApproach===N7&&(i=ls.requestAnimationFrame||aw),i(()=>{const r=AB(),s=q1.begin("mutate");t.map(r),s(),n()})}}let Z1=!1;function hI(){Z1=!0}function Jp(){Z1=!1}let rd=null;function lw(t){if(!Y2||!ee.observeMutations)return;const{treeCallback:e=Kh,nodeCallback:n=Kh,pseudoElementsCallback:i=Kh,observeMutationsRoot:r=ze}=t;rd=new Y2(s=>{if(Z1)return;const o=us();ll(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!ow(a.addedNodes[0])&&(ee.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&ee.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&ow(a.target)&&~$7.indexOf(a.attributeName))if(a.attributeName==="class"&&IB(a.target)){const{prefix:l,iconName:u}=dg(X1(a.target));a.target.setAttribute(B1,l||o),u&&a.target.setAttribute($1,u)}else PB(a.target)&&n(a.target)})}),Sr&&rd.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function DB(){rd&&rd.disconnect()}function FB(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function NB(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=dg(X1(t));return r.prefix||(r.prefix=us()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=lB(r.prefix,t.innerText)||Y1(r.prefix,Xp(t.innerText))),!r.iconName&&ee.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function GB(t){const e=ll(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return ee.autoA11y&&(n?e["aria-labelledby"]="".concat(ee.replacementClass,"-title-").concat(i||qu()):(e["aria-hidden"]="true",e.focusable="false")),e}function UB(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Li,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function uw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=NB(t),s=GB(t),o=Hp("parseNodeAttributes",{},t);let a=e.styleParser?FB(t):[];return X({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Li,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:zB}=ki;function fI(t){const e=ee.autoReplaceSvg==="nest"?uw(t,{styleParser:!1}):uw(t);return~e.extra.classes.indexOf(Wb)?cs("generateLayersText",t,e):cs("generateSvgReplacementMutation",t,e)}function jB(){return[...E7,...Up]}function cw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Sr)return Promise.resolve();const n=ze.documentElement.classList,i=c=>n.add("".concat(Z2,"-").concat(c)),r=c=>n.remove("".concat(Z2,"-").concat(c)),s=ee.autoFetchSvg?jB():Ub.concat(Object.keys(zB));s.includes("fa")||s.push("fa");const o=[".".concat(Wb,":not([").concat(Qs,"])")].concat(s.map(c=>".".concat(c,":not([").concat(Qs,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=ll(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=q1.begin("onTree"),u=a.reduce((c,h)=>{try{const f=fI(h);f&&c.push(f)}catch(f){Vb||f.name==="MissingIcon"&&console.error(f)}return c},[]);return new Promise((c,h)=>{Promise.all(u).then(f=>{cI(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),c()})}).catch(f=>{l(),h(f)})})}function BB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;fI(t).then(n=>{n&&cI([n],e)})}function $B(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:Yp(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:Yp(r||{})),t(i,X(X({},n),{},{mask:r}))}}const VB=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Li,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:u={},styles:c={}}=e;if(!t)return;const{prefix:h,iconName:f,icon:g}=t;return gg(X({type:"icon"},t),()=>(eo("beforeDOMElementCreation",{iconDefinition:t,params:e}),ee.autoA11y&&(o?u["aria-labelledby"]="".concat(ee.replacementClass,"-title-").concat(a||qu()):(u["aria-hidden"]="true",u.focusable="false")),K1({icons:{main:Kp(g),mask:r?Kp(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:h,iconName:f,transform:X(X({},Li),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:u,styles:c,classes:l}})))};var XB={mixout(){return{icon:$B(VB)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=cw,t.nodeCallback=BB,t}}},provides(t){t.i2svg=function(e){const{node:n=ze,callback:i=()=>{}}=e;return cw(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:u,maskId:c,extra:h}=n;return new Promise((f,g)=>{Promise.all([qp(i,o),u.iconName?qp(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(d=>{let[p,m]=d;f([e,K1({icons:{main:p,mask:m},prefix:o,iconName:i,transform:a,symbol:l,maskId:c,title:r,titleId:s,extra:h,watchable:!0})])}).catch(g)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=hg(o);a.length>0&&(i.style=a);let l;return W1(s)&&(l=cs("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},WB={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return gg({type:"layer"},()=>{eo("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(ee.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},HB={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return gg({type:"counter",content:t},()=>(eo("beforeDOMElementCreation",{content:t,params:e}),TB({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(ee.cssPrefix,"-layers-counter"),...i]}})))}}}},YB={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Li,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return gg({type:"text",content:t},()=>(eo("beforeDOMElementCreation",{content:t,params:e}),rw({content:t,transform:X(X({},Li),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(ee.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(Nb){const l=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();o=u.width/l,a=u.height/l}return ee.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,rw({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const KB=new RegExp('"',"ug"),hw=[1105920,1112319],fw=X(X(X(X({},{FontAwesome:{normal:"fas",400:"fas"}}),_7),D7),b7),Qp=Object.keys(fw).reduce((t,e)=>(t[e.toLowerCase()]=fw[e],t),{}),qB=Object.keys(Qp).reduce((t,e)=>{const n=Qp[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function ZB(t){const e=t.replace(KB,""),n=iB(e,0),i=n>=hw[0]&&n<=hw[1],r=e.length===2?e[0]===e[1]:!1;return{value:Xp(r?e[0]:e),isSecondary:i||r}}function JB(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(Qp[n]||{})[r]||qB[n]}function dw(t,e){const n="".concat(F7).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=ll(t.children).filter(f=>f.getAttribute(jp)===e)[0],a=ls.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),u=l.match(j7),c=a.getPropertyValue("font-weight"),h=a.getPropertyValue("content");if(o&&!u)return t.removeChild(o),i();if(u&&h!=="none"&&h!==""){const f=a.getPropertyValue("content");let g=JB(l,c);const{value:d,isSecondary:p}=ZB(f),m=u[0].startsWith("FontAwesome");let _=Y1(g,d),y=_;if(m){const v=uB(d);v.iconName&&v.prefix&&(_=v.iconName,g=v.prefix)}if(_&&!p&&(!o||o.getAttribute(B1)!==g||o.getAttribute($1)!==y)){t.setAttribute(n,y),o&&t.removeChild(o);const v=UB(),{extra:x}=v;x.attributes[jp]=e,qp(_,g).then(E=>{const w=K1(X(X({},v),{},{icons:{main:E,mask:oI()},prefix:g,iconName:y,extra:x,watchable:!0})),C=ze.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=w.map(S=>bc(S)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function QB(t){return Promise.all([dw(t,"::before"),dw(t,"::after")])}function e$(t){return t.parentNode!==document.head&&!~G7.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(jp)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function gw(t){if(Sr)return new Promise((e,n)=>{const i=ll(t.querySelectorAll("*")).filter(e$).map(QB),r=q1.begin("searchPseudoElements");hI(),Promise.all(i).then(()=>{r(),Jp(),e()}).catch(()=>{r(),Jp(),n()})})}var t$={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=gw,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=ze}=e;ee.searchPseudoElements&&gw(n)}}};let mw=!1;var n$={mixout(){return{dom:{unwatch(){hI(),mw=!0}}}},hooks(){return{bootstrap(){lw(Hp("mutationObserverCallbacks",{}))},noAuto(){DB()},watch(t){const{observeMutationsRoot:e}=t;mw?Jp():lw(Hp("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const pw=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var i$={mixout(){return{parse:{transform:t=>pw(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=pw(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),c={transform:"".concat(a," ").concat(l," ").concat(u)},h={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:c,path:h};return{tag:"g",attributes:X({},f.outer),children:[{tag:"g",attributes:X({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:X(X({},n.icon.attributes),f.path)}]}]}}}};const K0={x:0,y:0,width:"100%",height:"100%"};function yw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function r$(t){return t.tag==="g"?t.children:[t]}var s$={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?dg(n.split(" ").map(r=>r.trim())):oI();return i.prefix||(i.prefix=us()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:u}=r,{width:c,icon:h}=s,f=Z7({transform:a,containerWidth:c,iconWidth:l}),g={tag:"rect",attributes:X(X({},K0),{},{fill:"white"})},d=u.children?{children:u.children.map(yw)}:{},p={tag:"g",attributes:X({},f.inner),children:[yw(X({tag:u.tag,attributes:X(X({},u.attributes),f.path)},d))]},m={tag:"g",attributes:X({},f.outer),children:[p]},_="mask-".concat(o||qu()),y="clip-".concat(o||qu()),v={tag:"mask",attributes:X(X({},K0),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,m]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:r$(h)},v]};return n.push(x,{tag:"rect",attributes:X({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(_,")")},K0)}),{children:n,attributes:i}}}},o$={provides(t){let e=!1;ls.matchMedia&&(e=ls.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:X(X({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=X(X({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:X(X({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:X(X({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:X(X({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:X(X({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:X(X({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:X(X({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:X(X({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},a$={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},l$=[eB,XB,WB,HB,YB,t$,n$,i$,s$,o$,a$];_B(l$,{mixoutsTo:On});On.noAuto;On.config;On.library;On.dom;const ey=On.parse;On.findIconDefinition;On.toHtml;const u$=On.icon;On.layer;On.text;On.counter;function _w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_w(Object(n),!0).forEach(function(i){Qo(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(t)}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c$(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function h$(t,e){if(t==null)return{};var n=c$(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function ty(t){return f$(t)||d$(t)||g$(t)||m$()}function f$(t){if(Array.isArray(t))return ny(t)}function d$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g$(t,e){if(t){if(typeof t=="string")return ny(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ny(t,e)}}function ny(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p$(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,u=t.spinPulse,c=t.spinReverse,h=t.pulse,f=t.fixedWidth,g=t.inverse,d=t.border,p=t.listItem,m=t.flip,_=t.size,y=t.rotation,v=t.pull,x=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":c,"fa-spin-pulse":u,"fa-pulse":h,"fa-fw":f,"fa-inverse":g,"fa-border":d,"fa-li":p,"fa-flip":m===!0,"fa-flip-horizontal":m==="horizontal"||m==="both","fa-flip-vertical":m==="vertical"||m==="both"},Qo(e,"fa-".concat(_),typeof _<"u"&&_!==null),Qo(e,"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),Qo(e,"fa-pull-".concat(v),typeof v<"u"&&v!==null),Qo(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(x).map(function(E){return x[E]?E:null}).filter(function(E){return E})}function y$(t){return t=t-0,t===t}function dI(t){return y$(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var _$=["style"];function v$(t){return t.charAt(0).toUpperCase()+t.slice(1)}function x$(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=dI(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[v$(r)]=s:e[r]=s,e},{})}function gI(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return gI(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,u){var c=e.attributes[u];switch(u){case"class":l.attrs.className=c,delete e.attributes.class;break;case"style":l.attrs.style=x$(c);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?l.attrs[u.toLowerCase()]=c:l.attrs[dI(u)]=c}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=h$(n,_$);return r.attrs.style=Ti(Ti({},r.attrs.style),o),t.apply(void 0,[e.tag,Ti(Ti({},r.attrs),a)].concat(ty(i)))}var mI=!1;try{mI=!0}catch{}function E$(){if(!mI&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function vw(t){if(t&&sd(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(ey.icon)return ey.icon(t);if(t===null)return null;if(t&&sd(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function q0(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Qo({},t,e):{}}var xw={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},lu=my.forwardRef(function(t,e){var n=Ti(Ti({},xw),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,u=n.maskId,c=vw(i),h=q0("classes",[].concat(ty(p$(n)),ty((o||"").split(" ")))),f=q0("transform",typeof n.transform=="string"?ey.transform(n.transform):n.transform),g=q0("mask",vw(r)),d=u$(c,Ti(Ti(Ti(Ti({},h),f),g),{},{symbol:s,title:a,titleId:l,maskId:u}));if(!d)return E$("Could not find icon",c),null;var p=d.abstract,m={ref:e};return Object.keys(n).forEach(function(_){xw.hasOwnProperty(_)||(m[_]=n[_])}),w$(p[0],m)});lu.displayName="FontAwesomeIcon";lu.propTypes={beat:ye.bool,border:ye.bool,beatFade:ye.bool,bounce:ye.bool,className:ye.string,fade:ye.bool,flash:ye.bool,mask:ye.oneOfType([ye.object,ye.array,ye.string]),maskId:ye.string,fixedWidth:ye.bool,inverse:ye.bool,flip:ye.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ye.oneOfType([ye.object,ye.array,ye.string]),listItem:ye.bool,pull:ye.oneOf(["right","left"]),pulse:ye.bool,rotation:ye.oneOf([0,90,180,270]),shake:ye.bool,size:ye.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ye.bool,spinPulse:ye.bool,spinReverse:ye.bool,symbol:ye.oneOfType([ye.bool,ye.string]),title:ye.string,titleId:ye.string,transform:ye.oneOfType([ye.string,ye.object]),swapOpacity:ye.bool};var w$=gI.bind(null,my.createElement);/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const S$={prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"]},C$=S$,T$={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},M$=T$,R$={prefix:"fas",iconName:"magnifying-glass-minus",icon:[512,512,["search-minus"],"f010","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"]},b$=R$,I$=({src:t,setDirection:e})=>{const[n,i]=T.useState(1),[r,s]=T.useState({x:0,y:0}),o=()=>i(u=>u*1.2),a=()=>i(u=>Math.max(.1,u/1.2)),l=()=>{i(1),s({x:0,y:0}),e("north")};return I.jsxs(z1,{className:"text-center mt-4",children:[I.jsxs("div",{className:"image-container",children:[I.jsx("div",{children:I.jsx("img",{src:t,alt:"Viewer",style:{transform:`scale(${n})`,transition:"transform 0.2s",maxWidth:"100%",height:"auto",userSelect:"none",WebkitUserDrag:"none"},className:"draggable-image"})}),I.jsxs("div",{className:"compass",children:[I.jsx("div",{className:"direction north",onClick:()=>e("north"),children:"N"}),I.jsx("div",{className:"direction east",onClick:()=>e("east"),children:"E"}),I.jsx("div",{className:"direction south",onClick:()=>e("south"),children:"S"}),I.jsx("div",{className:"direction west",onClick:()=>e("west"),children:"W"}),I.jsx("div",{className:"direction nadir",onClick:()=>e("nadir"),children:"T"})]})]}),I.jsxs("div",{className:"mt-3",children:[I.jsx(lu,{icon:M$,className:"icon mx-2",onClick:o,title:"Zoom In"}),I.jsx(lu,{icon:b$,className:"icon mx-2",onClick:a,title:"Zoom Out"}),I.jsx(lu,{icon:C$,className:"icon mx-2",onClick:l,title:"Reset"})]})]})};function to(t){"@babel/helpers - typeof";return to=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(t)}function P$(t,e){if(to(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(to(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pI(t){var e=P$(t,"string");return to(e)=="symbol"?e:e+""}function ea(t,e,n){return(e=pI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ew(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ew(Object(n),!0).forEach(function(i){ea(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function A$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ww(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,pI(i.key),i)}}function O$(t,e,n){return e&&ww(t.prototype,e),n&&ww(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function L$(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Np(t,e)}function od(t){return od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},od(t)}function yI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yI=function(){return!!t})()}function k$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D$(t,e){if(e&&(to(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k$(t)}function F$(t){var e=yI();return function(){var n,i=od(t);if(e){var r=od(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return D$(this,n)}}function iy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function N$(t){if(Array.isArray(t))return iy(t)}function G$(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _I(t,e){if(t){if(typeof t=="string")return iy(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iy(t,e):void 0}}function U$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J1(t){return N$(t)||G$(t)||_I(t)||U$()}var z$=!1;function j$(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function B$(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var $$=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!z$:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(B$(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=j$(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),Ot="-ms-",ad="-moz-",Re="-webkit-",vI="comm",Q1="rule",ev="decl",V$="@import",xI="@keyframes",X$="@layer",W$=Math.abs,mg=String.fromCharCode,H$=Object.assign;function Y$(t,e){return wt(t,0)^45?(((e<<2^wt(t,0))<<2^wt(t,1))<<2^wt(t,2))<<2^wt(t,3):0}function EI(t){return t.trim()}function K$(t,e){return(t=e.exec(t))?t[0]:t}function be(t,e,n){return t.replace(e,n)}function ry(t,e){return t.indexOf(e)}function wt(t,e){return t.charCodeAt(e)|0}function Ju(t,e,n){return t.slice(e,n)}function Mi(t){return t.length}function tv(t){return t.length}function xh(t,e){return e.push(t),t}function q$(t,e){return t.map(e).join("")}var pg=1,Ba=1,wI=0,mn=0,rt=0,ul="";function yg(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:pg,column:Ba,length:o,return:""}}function Rl(t,e){return H$(yg("",null,null,"",null,null,0),t,{length:-t.length},e)}function Z$(){return rt}function J$(){return rt=mn>0?wt(ul,--mn):0,Ba--,rt===10&&(Ba=1,pg--),rt}function Rn(){return rt=mn<wI?wt(ul,mn++):0,Ba++,rt===10&&(Ba=1,pg++),rt}function zi(){return wt(ul,mn)}function Zh(){return mn}function Ic(t,e){return Ju(ul,t,e)}function Qu(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function SI(t){return pg=Ba=1,wI=Mi(ul=t),mn=0,[]}function CI(t){return ul="",t}function Jh(t){return EI(Ic(mn-1,sy(t===91?t+2:t===40?t+1:t)))}function Q$(t){for(;(rt=zi())&&rt<33;)Rn();return Qu(t)>2||Qu(rt)>3?"":" "}function eV(t,e){for(;--e&&Rn()&&!(rt<48||rt>102||rt>57&&rt<65||rt>70&&rt<97););return Ic(t,Zh()+(e<6&&zi()==32&&Rn()==32))}function sy(t){for(;Rn();)switch(rt){case t:return mn;case 34:case 39:t!==34&&t!==39&&sy(rt);break;case 40:t===41&&sy(t);break;case 92:Rn();break}return mn}function tV(t,e){for(;Rn()&&t+rt!==57;)if(t+rt===84&&zi()===47)break;return"/*"+Ic(e,mn-1)+"*"+mg(t===47?t:Rn())}function nV(t){for(;!Qu(zi());)Rn();return Ic(t,mn)}function iV(t){return CI(Qh("",null,null,null,[""],t=SI(t),0,[0],t))}function Qh(t,e,n,i,r,s,o,a,l){for(var u=0,c=0,h=o,f=0,g=0,d=0,p=1,m=1,_=1,y=0,v="",x=r,E=s,w=i,C=v;m;)switch(d=y,y=Rn()){case 40:if(d!=108&&wt(C,h-1)==58){ry(C+=be(Jh(y),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:C+=Jh(y);break;case 9:case 10:case 13:case 32:C+=Q$(d);break;case 92:C+=eV(Zh()-1,7);continue;case 47:switch(zi()){case 42:case 47:xh(rV(tV(Rn(),Zh()),e,n),l);break;default:C+="/"}break;case 123*p:a[u++]=Mi(C)*_;case 125*p:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:_==-1&&(C=be(C,/\f/g,"")),g>0&&Mi(C)-h&&xh(g>32?Cw(C+";",i,n,h-1):Cw(be(C," ","")+";",i,n,h-2),l);break;case 59:C+=";";default:if(xh(w=Sw(C,e,n,u,c,r,a,v,x=[],E=[],h),s),y===123)if(c===0)Qh(C,e,w,w,x,s,h,a,E);else switch(f===99&&wt(C,3)===110?100:f){case 100:case 108:case 109:case 115:Qh(t,w,w,i&&xh(Sw(t,w,w,0,0,r,a,v,r,x=[],h),E),r,E,h,a,i?x:E);break;default:Qh(C,w,w,w,[""],E,0,a,E)}}u=c=g=0,p=_=1,v=C="",h=o;break;case 58:h=1+Mi(C),g=d;default:if(p<1){if(y==123)--p;else if(y==125&&p++==0&&J$()==125)continue}switch(C+=mg(y),y*p){case 38:_=c>0?1:(C+="\f",-1);break;case 44:a[u++]=(Mi(C)-1)*_,_=1;break;case 64:zi()===45&&(C+=Jh(Rn())),f=zi(),c=h=Mi(v=C+=nV(Zh())),y++;break;case 45:d===45&&Mi(C)==2&&(p=0)}}return s}function Sw(t,e,n,i,r,s,o,a,l,u,c){for(var h=r-1,f=r===0?s:[""],g=tv(f),d=0,p=0,m=0;d<i;++d)for(var _=0,y=Ju(t,h+1,h=W$(p=o[d])),v=t;_<g;++_)(v=EI(p>0?f[_]+" "+y:be(y,/&\f/g,f[_])))&&(l[m++]=v);return yg(t,e,n,r===0?Q1:a,l,u,c)}function rV(t,e,n){return yg(t,e,n,vI,mg(Z$()),Ju(t,2,-2),0)}function Cw(t,e,n,i){return yg(t,e,n,ev,Ju(t,0,i),Ju(t,i+1,-1),i)}function ya(t,e){for(var n="",i=tv(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function sV(t,e,n,i){switch(t.type){case X$:if(t.children.length)break;case V$:case ev:return t.return=t.return||t.value;case vI:return"";case xI:return t.return=t.value+"{"+ya(t.children,i)+"}";case Q1:t.value=t.props.join(",")}return Mi(n=ya(t.children,i))?t.return=t.value+"{"+n+"}":""}function oV(t){var e=tv(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function aV(t){return function(e){e.root||(e=e.return)&&t(e)}}function lV(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var uV=function(e,n,i){for(var r=0,s=0;r=s,s=zi(),r===38&&s===12&&(n[i]=1),!Qu(s);)Rn();return Ic(e,mn)},cV=function(e,n){var i=-1,r=44;do switch(Qu(r)){case 0:r===38&&zi()===12&&(n[i]=1),e[i]+=uV(mn-1,n,i);break;case 2:e[i]+=Jh(r);break;case 4:if(r===44){e[++i]=zi()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=mg(r)}while(r=Rn());return e},hV=function(e,n){return CI(cV(SI(e),n))},Tw=new WeakMap,fV=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!Tw.get(i))&&!r){Tw.set(e,!0);for(var s=[],o=hV(n,s),a=i.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},dV=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function TI(t,e){switch(Y$(t,e)){case 5103:return Re+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Re+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Re+t+ad+t+Ot+t+t;case 6828:case 4268:return Re+t+Ot+t+t;case 6165:return Re+t+Ot+"flex-"+t+t;case 5187:return Re+t+be(t,/(\w+).+(:[^]+)/,Re+"box-$1$2"+Ot+"flex-$1$2")+t;case 5443:return Re+t+Ot+"flex-item-"+be(t,/flex-|-self/,"")+t;case 4675:return Re+t+Ot+"flex-line-pack"+be(t,/align-content|flex-|-self/,"")+t;case 5548:return Re+t+Ot+be(t,"shrink","negative")+t;case 5292:return Re+t+Ot+be(t,"basis","preferred-size")+t;case 6060:return Re+"box-"+be(t,"-grow","")+Re+t+Ot+be(t,"grow","positive")+t;case 4554:return Re+be(t,/([^-])(transform)/g,"$1"+Re+"$2")+t;case 6187:return be(be(be(t,/(zoom-|grab)/,Re+"$1"),/(image-set)/,Re+"$1"),t,"")+t;case 5495:case 3959:return be(t,/(image-set\([^]*)/,Re+"$1$`$1");case 4968:return be(be(t,/(.+:)(flex-)?(.*)/,Re+"box-pack:$3"+Ot+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Re+t+t;case 4095:case 3583:case 4068:case 2532:return be(t,/(.+)-inline(.+)/,Re+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mi(t)-1-e>6)switch(wt(t,e+1)){case 109:if(wt(t,e+4)!==45)break;case 102:return be(t,/(.+:)(.+)-([^]+)/,"$1"+Re+"$2-$3$1"+ad+(wt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ry(t,"stretch")?TI(be(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(wt(t,e+1)!==115)break;case 6444:switch(wt(t,Mi(t)-3-(~ry(t,"!important")&&10))){case 107:return be(t,":",":"+Re)+t;case 101:return be(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Re+(wt(t,14)===45?"inline-":"")+"box$3$1"+Re+"$2$3$1"+Ot+"$2box$3")+t}break;case 5936:switch(wt(t,e+11)){case 114:return Re+t+Ot+be(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Re+t+Ot+be(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Re+t+Ot+be(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Re+t+Ot+t+t}return t}var gV=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case ev:e.return=TI(e.value,e.length);break;case xI:return ya([Rl(e,{value:be(e.value,"@","@"+Re)})],r);case Q1:if(e.length)return q$(e.props,function(s){switch(K$(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ya([Rl(e,{props:[be(s,/:(read-\w+)/,":"+ad+"$1")]})],r);case"::placeholder":return ya([Rl(e,{props:[be(s,/:(plac\w+)/,":"+Re+"input-$1")]}),Rl(e,{props:[be(s,/:(plac\w+)/,":"+ad+"$1")]}),Rl(e,{props:[be(s,/:(plac\w+)/,Ot+"input-$1")]})],r)}return""})}},mV=[gV],pV=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(p){var m=p.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var r=e.stylisPlugins||mV,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var m=p.getAttribute("data-emotion").split(" "),_=1;_<m.length;_++)s[m[_]]=!0;a.push(p)});var l,u=[fV,dV];{var c,h=[sV,aV(function(p){c.insert(p)})],f=oV(u.concat(r,h)),g=function(m){return ya(iV(m),f)};l=function(m,_,y,v){c=y,g(m?m+"{"+_.styles+"}":_.styles),v&&(d.inserted[_.name]=!0)}}var d={key:n,sheet:new $$({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return d.sheet.hydrate(a),d},MI={exports:{}},Le={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=typeof Symbol=="function"&&Symbol.for,nv=vt?Symbol.for("react.element"):60103,iv=vt?Symbol.for("react.portal"):60106,_g=vt?Symbol.for("react.fragment"):60107,vg=vt?Symbol.for("react.strict_mode"):60108,xg=vt?Symbol.for("react.profiler"):60114,Eg=vt?Symbol.for("react.provider"):60109,wg=vt?Symbol.for("react.context"):60110,rv=vt?Symbol.for("react.async_mode"):60111,Sg=vt?Symbol.for("react.concurrent_mode"):60111,Cg=vt?Symbol.for("react.forward_ref"):60112,Tg=vt?Symbol.for("react.suspense"):60113,yV=vt?Symbol.for("react.suspense_list"):60120,Mg=vt?Symbol.for("react.memo"):60115,Rg=vt?Symbol.for("react.lazy"):60116,_V=vt?Symbol.for("react.block"):60121,vV=vt?Symbol.for("react.fundamental"):60117,xV=vt?Symbol.for("react.responder"):60118,EV=vt?Symbol.for("react.scope"):60119;function Ln(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nv:switch(t=t.type,t){case rv:case Sg:case _g:case xg:case vg:case Tg:return t;default:switch(t=t&&t.$$typeof,t){case wg:case Cg:case Rg:case Mg:case Eg:return t;default:return e}}case iv:return e}}}function RI(t){return Ln(t)===Sg}Le.AsyncMode=rv;Le.ConcurrentMode=Sg;Le.ContextConsumer=wg;Le.ContextProvider=Eg;Le.Element=nv;Le.ForwardRef=Cg;Le.Fragment=_g;Le.Lazy=Rg;Le.Memo=Mg;Le.Portal=iv;Le.Profiler=xg;Le.StrictMode=vg;Le.Suspense=Tg;Le.isAsyncMode=function(t){return RI(t)||Ln(t)===rv};Le.isConcurrentMode=RI;Le.isContextConsumer=function(t){return Ln(t)===wg};Le.isContextProvider=function(t){return Ln(t)===Eg};Le.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nv};Le.isForwardRef=function(t){return Ln(t)===Cg};Le.isFragment=function(t){return Ln(t)===_g};Le.isLazy=function(t){return Ln(t)===Rg};Le.isMemo=function(t){return Ln(t)===Mg};Le.isPortal=function(t){return Ln(t)===iv};Le.isProfiler=function(t){return Ln(t)===xg};Le.isStrictMode=function(t){return Ln(t)===vg};Le.isSuspense=function(t){return Ln(t)===Tg};Le.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_g||t===Sg||t===xg||t===vg||t===Tg||t===yV||typeof t=="object"&&t!==null&&(t.$$typeof===Rg||t.$$typeof===Mg||t.$$typeof===Eg||t.$$typeof===wg||t.$$typeof===Cg||t.$$typeof===vV||t.$$typeof===xV||t.$$typeof===EV||t.$$typeof===_V)};Le.typeOf=Ln;MI.exports=Le;var wV=MI.exports,bI=wV,SV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},II={};II[bI.ForwardRef]=SV;II[bI.Memo]=CV;var TV=!0;function MV(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(i+=r+" ")}),i}var PI=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||TV===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},RV=function(e,n,i){PI(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function bV(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var IV={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},PV=!1,AV=/[A-Z]|^ms/g,OV=/_EMO_([^_]+?)_([^]*?)_EMO_/g,AI=function(e){return e.charCodeAt(1)===45},Mw=function(e){return e!=null&&typeof e!="boolean"},Z0=lV(function(t){return AI(t)?t:t.replace(AV,"-$&").toLowerCase()}),Rw=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(OV,function(i,r,s){return Ri={name:r,styles:s,next:Ri},r})}return IV[e]!==1&&!AI(e)&&typeof n=="number"&&n!==0?n+"px":n},LV="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function ec(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return Ri={name:r.name,styles:r.styles,next:Ri},r.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Ri={name:o.name,styles:o.styles,next:Ri},o=o.next;var a=s.styles+";";return a}return kV(t,e,n)}case"function":{if(t!==void 0){var l=Ri,u=n(t);return Ri=l,ec(t,e,u)}break}}var c=n;return c}function kV(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=ec(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;Mw(a)&&(i+=Z0(s)+":"+Rw(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&PV)throw new Error(LV);if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var l=0;l<o.length;l++)Mw(o[l])&&(i+=Z0(s)+":"+Rw(s,o[l])+";");else{var u=ec(t,e,o);switch(s){case"animation":case"animationName":{i+=Z0(s)+":"+u+";";break}default:i+=s+"{"+u+"}"}}}}return i}var bw=/label:\s*([^\s;{]+)\s*(;|$)/g,Ri;function OI(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";Ri=void 0;var s=t[0];if(s==null||s.raw===void 0)i=!1,r+=ec(n,e,s);else{var o=s;r+=o[0]}for(var a=1;a<t.length;a++)if(r+=ec(n,e,t[a]),i){var l=s;r+=l[a]}bw.lastIndex=0;for(var u="",c;(c=bw.exec(r))!==null;)u+="-"+c[1];var h=bV(r)+u;return{name:h,styles:r,next:Ri}}var DV=function(e){return e()},FV=sm.useInsertionEffect?sm.useInsertionEffect:!1,NV=FV||DV,GV=!1,LI=T.createContext(typeof HTMLElement<"u"?pV({key:"css"}):null);LI.Provider;var UV=function(e){return T.forwardRef(function(n,i){var r=T.useContext(LI);return e(n,r,i)})},zV=T.createContext({}),sv={}.hasOwnProperty,oy="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",jV=function(e,n){var i={};for(var r in n)sv.call(n,r)&&(i[r]=n[r]);return i[oy]=e,i},BV=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return PI(n,i,r),NV(function(){return RV(n,i,r)}),null},$V=UV(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[oy],s=[i],o="";typeof t.className=="string"?o=MV(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=OI(s,void 0,T.useContext(zV));o+=e.key+"-"+a.name;var l={};for(var u in t)sv.call(t,u)&&u!=="css"&&u!==oy&&!GV&&(l[u]=t[u]);return l.className=o,n&&(l.ref=n),T.createElement(T.Fragment,null,T.createElement(BV,{cache:e,serialized:a,isStringTag:typeof r=="string"}),T.createElement(r,l))}),VV=$V,re=function(e,n){var i=arguments;if(n==null||!sv.call(n,"css"))return T.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=VV,s[1]=jV(e,n);for(var o=2;o<r;o++)s[o]=i[o];return T.createElement.apply(null,s)};function ov(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return OI(e)}var XV=function(){var e=ov.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function WV(t){if(Array.isArray(t))return t}function HV(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function YV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dt(t,e){return WV(t)||HV(t,e)||_I(t,e)||YV()}function Xi(t,e){if(t==null)return{};var n,i,r=Qj(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function KV(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const qV=Math.min,ZV=Math.max,ld=Math.round,Eh=Math.floor,ud=t=>({x:t,y:t});function JV(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function bg(){return typeof window<"u"}function kI(t){return FI(t)?(t.nodeName||"").toLowerCase():"#document"}function vr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function DI(t){var e;return(e=(FI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FI(t){return bg()?t instanceof Node||t instanceof vr(t).Node:!1}function QV(t){return bg()?t instanceof Element||t instanceof vr(t).Element:!1}function av(t){return bg()?t instanceof HTMLElement||t instanceof vr(t).HTMLElement:!1}function Iw(t){return!bg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vr(t).ShadowRoot}function NI(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=lv(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function eX(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function tX(t){return["html","body","#document"].includes(kI(t))}function lv(t){return vr(t).getComputedStyle(t)}function nX(t){if(kI(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Iw(t)&&t.host||DI(t);return Iw(e)?e.host:e}function GI(t){const e=nX(t);return tX(e)?t.ownerDocument?t.ownerDocument.body:t.body:av(e)&&NI(e)?e:GI(e)}function cd(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=GI(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=vr(r);if(s){const a=ay(o);return e.concat(o,o.visualViewport||[],NI(r)?r:[],a&&n?cd(a):[])}return e.concat(r,cd(r,[],n))}function ay(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function iX(t){const e=lv(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=av(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=ld(n)!==s||ld(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function uv(t){return QV(t)?t:t.contextElement}function Pw(t){const e=uv(t);if(!av(e))return ud(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=iX(e);let o=(s?ld(n.width):n.width)/i,a=(s?ld(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rX=ud(0);function sX(t){const e=vr(t);return!eX()||!e.visualViewport?rX:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oX(t,e,n){return!1}function Aw(t,e,n,i){e===void 0&&(e=!1);const r=t.getBoundingClientRect(),s=uv(t);let o=ud(1);e&&(o=Pw(t));const a=oX()?sX(s):ud(0);let l=(r.left+a.x)/o.x,u=(r.top+a.y)/o.y,c=r.width/o.x,h=r.height/o.y;if(s){const f=vr(s),g=i;let d=f,p=ay(d);for(;p&&i&&g!==d;){const m=Pw(p),_=p.getBoundingClientRect(),y=lv(p),v=_.left+(p.clientLeft+parseFloat(y.paddingLeft))*m.x,x=_.top+(p.clientTop+parseFloat(y.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,h*=m.y,l+=v,u+=x,d=vr(p),p=ay(d)}}return JV({width:c,height:h,x:l,y:u})}function aX(t,e){let n=null,i;const r=DI(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:h,height:f}=t.getBoundingClientRect();if(a||e(),!h||!f)return;const g=Eh(c),d=Eh(r.clientWidth-(u+h)),p=Eh(r.clientHeight-(c+f)),m=Eh(u),y={rootMargin:-g+"px "+-d+"px "+-p+"px "+-m+"px",threshold:ZV(0,qV(1,l))||1};let v=!0;function x(E){const w=E[0].intersectionRatio;if(w!==l){if(!v)return o();w?o(!1,w):i=setTimeout(()=>{o(!1,1e-7)},1e3)}v=!1}try{n=new IntersectionObserver(x,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(x,y)}n.observe(t)}return o(!0),s}function lX(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=uv(t),c=r||s?[...u?cd(u):[],...cd(e)]:[];c.forEach(_=>{r&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const h=u&&a?aX(u,n):null;let f=-1,g=null;o&&(g=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(e)})),n()}),u&&!l&&g.observe(u),g.observe(e));let d,p=l?Aw(t):null;l&&m();function m(){const _=Aw(t);p&&(_.x!==p.x||_.y!==p.y||_.width!==p.width||_.height!==p.height)&&n(),p=_,d=requestAnimationFrame(m)}return n(),()=>{var _;c.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),h==null||h(),(_=g)==null||_.disconnect(),g=null,l&&cancelAnimationFrame(d)}}var ly=T.useLayoutEffect,uX=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],hd=function(){};function cX(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function hX(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s=[].concat(i);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(cX(t,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var Ow=function(e){return EX(e)?e.filter(Boolean):to(e)==="object"&&e!==null?[e]:[]},UI=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Xi(e,uX);return ne({},n)},Ze=function(e,n,i){var r=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(n,e),className:r(i??{},o(n,e),a)}};function fX(t,e,n){if(n){var i=n(t,e);if(typeof i=="string")return i}return t}function Ig(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function dX(t){return Ig(t)?window.innerHeight:t.clientHeight}function zI(t){return Ig(t)?window.pageYOffset:t.scrollTop}function fd(t,e){if(Ig(t)){window.scrollTo(0,e);return}t.scrollTop=e}function gX(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=t;r=r.parentElement;)if(e=getComputedStyle(r),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function mX(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function wh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:hd,r=zI(t),s=e-r,o=10,a=0;function l(){a+=o;var u=mX(a,r,s,n);fd(t,u),a<n?window.requestAnimationFrame(l):i(t)}l()}function Lw(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>n.bottom?fd(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+r,t.scrollHeight)):i.top-r<n.top&&fd(t,Math.max(e.offsetTop-r,0))}function pX(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function kw(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function yX(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var jI=!1,_X={get passive(){return jI=!0}},Sh=typeof window<"u"?window:{};Sh.addEventListener&&Sh.removeEventListener&&(Sh.addEventListener("p",hd,_X),Sh.removeEventListener("p",hd,!1));var vX=jI;function xX(t){return t!=null}function EX(t){return Array.isArray(t)}function Ch(t,e,n){return t?e:n}var wX=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var s=Object.entries(e).filter(function(o){var a=dt(o,1),l=a[0];return!i.includes(l)});return s.reduce(function(o,a){var l=dt(a,2),u=l[0],c=l[1];return o[u]=c,o},{})},SX=["children","innerProps"],CX=["children","innerProps"];function TX(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,r=t.placement,s=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,l=gX(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var c=l.getBoundingClientRect(),h=c.height,f=n.getBoundingClientRect(),g=f.bottom,d=f.height,p=f.top,m=n.offsetParent.getBoundingClientRect(),_=m.top,y=o?window.innerHeight:dX(l),v=zI(l),x=parseInt(getComputedStyle(n).marginBottom,10),E=parseInt(getComputedStyle(n).marginTop,10),w=_-E,C=y-p,S=w+v,R=h-v-p,M=g-y+v+x,k=v+p-E,A=160;switch(r){case"auto":case"bottom":if(C>=d)return{placement:"bottom",maxHeight:e};if(R>=d&&!o)return s&&wh(l,M,A),{placement:"bottom",maxHeight:e};if(!o&&R>=i||o&&C>=i){s&&wh(l,M,A);var U=o?C-x:R-x;return{placement:"bottom",maxHeight:U}}if(r==="auto"||o){var B=e,G=o?w:S;return G>=i&&(B=Math.min(G-x-a,e)),{placement:"top",maxHeight:B}}if(r==="bottom")return s&&fd(l,M),{placement:"bottom",maxHeight:e};break;case"top":if(w>=d)return{placement:"top",maxHeight:e};if(S>=d&&!o)return s&&wh(l,k,A),{placement:"top",maxHeight:e};if(!o&&S>=i||o&&w>=i){var j=e;return(!o&&S>=i||o&&w>=i)&&(j=o?w-E:S-E),s&&wh(l,k,A),{placement:"top",maxHeight:j}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return u}function MX(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var BI=function(e){return e==="auto"?"bottom":e},RX=function(e,n){var i,r=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return ne((i={label:"menu"},ea(i,MX(r),"100%"),ea(i,"position","absolute"),ea(i,"width","100%"),ea(i,"zIndex",1),i),n?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},$I=T.createContext(null),bX=function(e){var n=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,u=T.useContext($I)||{},c=u.setPortalPlacement,h=T.useRef(null),f=T.useState(r),g=dt(f,2),d=g[0],p=g[1],m=T.useState(null),_=dt(m,2),y=_[0],v=_[1],x=l.spacing.controlHeight;return ly(function(){var E=h.current;if(E){var w=o==="fixed",C=a&&!w,S=TX({maxHeight:r,menuEl:E,minHeight:i,placement:s,shouldScroll:C,isFixedPosition:w,controlHeight:x});p(S.maxHeight),v(S.placement),c==null||c(S.placement)}},[r,s,o,a,i,c,x]),n({ref:h,placerProps:ne(ne({},e),{},{placement:y||BI(s),maxHeight:d})})},IX=function(e){var n=e.children,i=e.innerRef,r=e.innerProps;return re("div",se({},Ze(e,"menu",{menu:!0}),{ref:i},r),n)},PX=IX,AX=function(e,n){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return ne({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:r,paddingTop:r})},OX=function(e){var n=e.children,i=e.innerProps,r=e.innerRef,s=e.isMulti;return re("div",se({},Ze(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},i),n)},VI=function(e,n){var i=e.theme,r=i.spacing.baseUnit,s=i.colors;return ne({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},LX=VI,kX=VI,DX=function(e){var n=e.children,i=n===void 0?"No options":n,r=e.innerProps,s=Xi(e,SX);return re("div",se({},Ze(ne(ne({},s),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},FX=function(e){var n=e.children,i=n===void 0?"Loading...":n,r=e.innerProps,s=Xi(e,CX);return re("div",se({},Ze(ne(ne({},s),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},NX=function(e){var n=e.rect,i=e.offset,r=e.position;return{left:n.left,position:r,top:i,width:n.width,zIndex:1}},GX=function(e){var n=e.appendTo,i=e.children,r=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=T.useRef(null),u=T.useRef(null),c=T.useState(BI(o)),h=dt(c,2),f=h[0],g=h[1],d=T.useMemo(function(){return{setPortalPlacement:g}},[]),p=T.useState(null),m=dt(p,2),_=m[0],y=m[1],v=T.useCallback(function(){if(r){var C=pX(r),S=a==="fixed"?0:window.pageYOffset,R=C[f]+S;(R!==(_==null?void 0:_.offset)||C.left!==(_==null?void 0:_.rect.left)||C.width!==(_==null?void 0:_.rect.width))&&y({offset:R,rect:C})}},[r,a,f,_==null?void 0:_.offset,_==null?void 0:_.rect.left,_==null?void 0:_.rect.width]);ly(function(){v()},[v]);var x=T.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),r&&l.current&&(u.current=lX(r,l.current,v,{elementResize:"ResizeObserver"in window}))},[r,v]);ly(function(){x()},[x]);var E=T.useCallback(function(C){l.current=C,x()},[x]);if(!n&&a!=="fixed"||!_)return null;var w=re("div",se({ref:E},Ze(ne(ne({},e),{},{offset:_.offset,position:a,rect:_.rect}),"menuPortal",{"menu-portal":!0}),s),i);return re($I.Provider,{value:d},n?lT.createPortal(w,n):w)},UX=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},zX=function(e){var n=e.children,i=e.innerProps,r=e.isDisabled,s=e.isRtl;return re("div",se({},Ze(e,"container",{"--is-disabled":r,"--is-rtl":s}),i),n)},jX=function(e,n){var i=e.theme.spacing,r=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return ne({alignItems:"center",display:r&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},BX=function(e){var n=e.children,i=e.innerProps,r=e.isMulti,s=e.hasValue;return re("div",se({},Ze(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),i),n)},$X=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},VX=function(e){var n=e.children,i=e.innerProps;return re("div",se({},Ze(e,"indicatorsContainer",{indicators:!0}),i),n)},Dw,XX=["size"],WX=["innerProps","isRtl","size"],HX={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},XI=function(e){var n=e.size,i=Xi(e,XX);return re("svg",se({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:HX},i))},cv=function(e){return re(XI,se({size:20},e),re("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},WI=function(e){return re(XI,se({size:20},e),re("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},HI=function(e,n){var i=e.isFocused,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return ne({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},YX=HI,KX=function(e){var n=e.children,i=e.innerProps;return re("div",se({},Ze(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||re(WI,null))},qX=HI,ZX=function(e){var n=e.children,i=e.innerProps;return re("div",se({},Ze(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||re(cv,null))},JX=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return ne({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},QX=function(e){var n=e.innerProps;return re("span",se({},n,Ze(e,"indicatorSeparator",{"indicator-separator":!0})))},eW=XV(Dw||(Dw=KV([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),tW=function(e,n){var i=e.isFocused,r=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return ne({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:a*2})},J0=function(e){var n=e.delay,i=e.offset;return re("span",{css:ov({animation:"".concat(eW," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},nW=function(e){var n=e.innerProps,i=e.isRtl,r=e.size,s=r===void 0?4:r,o=Xi(e,WX);return re("div",se({},Ze(ne(ne({},o),{},{innerProps:n,isRtl:i,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),re(J0,{delay:0,offset:i}),re(J0,{delay:160,offset:!0}),re(J0,{delay:320,offset:!i}))},iW=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return ne({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},rW=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return re("div",se({ref:s},Ze(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":a}),o,{"aria-disabled":i||void 0}),n)},sW=rW,oW=["data"],aW=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},lW=function(e){var n=e.children,i=e.cx,r=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,u=e.label,c=e.theme,h=e.selectProps;return re("div",se({},Ze(e,"group",{group:!0}),l),re(o,se({},a,{selectProps:h,theme:c,getStyles:r,getClassNames:s,cx:i}),u),re("div",null,n))},uW=function(e,n){var i=e.theme,r=i.colors,s=i.spacing;return ne({label:"group",cursor:"default",display:"block"},n?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},cW=function(e){var n=UI(e);n.data;var i=Xi(n,oW);return re("div",se({},Ze(e,"groupHeading",{"group-heading":!0}),i))},hW=lW,fW=["innerRef","isDisabled","isHidden","inputClassName"],dW=function(e,n){var i=e.isDisabled,r=e.value,s=e.theme,o=s.spacing,a=s.colors;return ne(ne({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},gW),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},YI={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},gW={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ne({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},YI)},mW=function(e){return ne({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},YI)},pW=function(e){var n=e.cx,i=e.value,r=UI(e),s=r.innerRef,o=r.isDisabled,a=r.isHidden,l=r.inputClassName,u=Xi(r,fW);return re("div",se({},Ze(e,"input",{"input-container":!0}),{"data-value":i||""}),re("input",se({className:n({input:!0},l),ref:s,style:mW(a),disabled:o},u)))},yW=pW,_W=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors;return ne({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},vW=function(e,n){var i=e.theme,r=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return ne({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},xW=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors,a=e.isFocused;return ne({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},KI=function(e){var n=e.children,i=e.innerProps;return re("div",i,n)},EW=KI,wW=KI;function SW(t){var e=t.children,n=t.innerProps;return re("div",se({role:"button"},n),e||re(cv,{size:14}))}var CW=function(e){var n=e.children,i=e.components,r=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,u=i.Container,c=i.Label,h=i.Remove;return re(u,{data:r,innerProps:ne(ne({},Ze(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},re(c,{data:r,innerProps:ne({},Ze(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),re(h,{data:r,innerProps:ne(ne({},Ze(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},TW=CW,MW=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return ne({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?l.primary:r?l.primary25:"transparent",color:i?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?l.primary:l.primary50}})},RW=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return re("div",se({},Ze(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":s}),{ref:o,"aria-disabled":i},a),n)},bW=RW,IW=function(e,n){var i=e.theme,r=i.spacing,s=i.colors;return ne({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},PW=function(e){var n=e.children,i=e.innerProps;return re("div",se({},Ze(e,"placeholder",{placeholder:!0}),i),n)},AW=PW,OW=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing,o=r.colors;return ne({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},LW=function(e){var n=e.children,i=e.isDisabled,r=e.innerProps;return re("div",se({},Ze(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),n)},kW=LW,DW={ClearIndicator:ZX,Control:sW,DropdownIndicator:KX,DownChevron:WI,CrossIcon:cv,Group:hW,GroupHeading:cW,IndicatorsContainer:VX,IndicatorSeparator:QX,Input:yW,LoadingIndicator:nW,Menu:PX,MenuList:OX,MenuPortal:GX,LoadingMessage:FX,NoOptionsMessage:DX,MultiValue:TW,MultiValueContainer:EW,MultiValueLabel:wW,MultiValueRemove:SW,Option:bW,Placeholder:AW,SelectContainer:zX,SingleValue:kW,ValueContainer:BX},FW=function(e){return ne(ne({},DW),e.components)},Fw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function NW(t,e){return!!(t===e||Fw(t)&&Fw(e))}function GW(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!NW(t[n],e[n]))return!1;return!0}function UW(t,e){e===void 0&&(e=GW);var n=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return i.clear=function(){n=null},i}var zW={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},jW=function(e){return re("span",se({css:zW},e))},Nw=jW,BW={guidance:function(e){var n=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,r=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,r=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,u=e.isSelected,c=e.isAppleDevice,h=function(p,m){return p&&p.length?"".concat(p.indexOf(m)+1," of ").concat(p.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(h(a,i),".");if(n==="menu"&&c){var f=l?" disabled":"",g="".concat(u?" selected":"").concat(f);return"".concat(o).concat(g,", ").concat(h(r,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},$W=function(e){var n=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,u=e.id,c=e.isAppleDevice,h=l.ariaLiveMessages,f=l.getOptionLabel,g=l.inputValue,d=l.isMulti,p=l.isOptionDisabled,m=l.isSearchable,_=l.menuIsOpen,y=l.options,v=l.screenReaderStatus,x=l.tabSelectsValue,E=l.isLoading,w=l["aria-label"],C=l["aria-live"],S=T.useMemo(function(){return ne(ne({},BW),h||{})},[h]),R=T.useMemo(function(){var G="";if(n&&S.onChange){var j=n.option,$=n.options,O=n.removedValue,F=n.removedValues,P=n.value,N=function(xe){return Array.isArray(xe)?null:xe},z=O||j||N(P),H=z?f(z):"",L=$||F||void 0,q=L?L.map(f):[],Z=ne({isDisabled:z&&p(z,a),label:H,labels:q},n);G=S.onChange(Z)}return G},[n,S,p,a,f]),M=T.useMemo(function(){var G="",j=i||r,$=!!(i&&a&&a.includes(i));if(j&&S.onFocus){var O={focused:j,label:f(j),isDisabled:p(j,a),isSelected:$,options:s,context:j===i?"menu":"value",selectValue:a,isAppleDevice:c};G=S.onFocus(O)}return G},[i,r,f,p,S,s,a,c]),k=T.useMemo(function(){var G="";if(_&&y.length&&!E&&S.onFilter){var j=v({count:s.length});G=S.onFilter({inputValue:g,resultsMessage:j})}return G},[s,g,_,S,y,v,E]),A=(n==null?void 0:n.action)==="initial-input-focus",U=T.useMemo(function(){var G="";if(S.guidance){var j=r?"value":_?"menu":"input";G=S.guidance({"aria-label":w,context:j,isDisabled:i&&p(i,a),isMulti:d,isSearchable:m,tabSelectsValue:x,isInitialFocus:A})}return G},[w,i,r,d,p,m,_,S,a,x,A]),B=re(T.Fragment,null,re("span",{id:"aria-selection"},R),re("span",{id:"aria-focused"},M),re("span",{id:"aria-results"},k),re("span",{id:"aria-guidance"},U));return re(T.Fragment,null,re(Nw,{id:u},A&&B),re(Nw,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!A&&B))},VW=$W,uy=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],XW=new RegExp("["+uy.map(function(t){return t.letters}).join("")+"]","g"),qI={};for(var Q0=0;Q0<uy.length;Q0++)for(var em=uy[Q0],tm=0;tm<em.letters.length;tm++)qI[em.letters[tm]]=em.base;var ZI=function(e){return e.replace(XW,function(n){return qI[n]})},WW=UW(ZI),Gw=function(e){return e.replace(/^\s+|\s+$/g,"")},HW=function(e){return"".concat(e.label," ").concat(e.value)},YW=function(e){return function(n,i){if(n.data.__isNew__)return!0;var r=ne({ignoreCase:!0,ignoreAccents:!0,stringify:HW,trim:!0,matchFrom:"any"},e),s=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,l=r.trim,u=r.matchFrom,c=l?Gw(i):i,h=l?Gw(a(n)):a(n);return s&&(c=c.toLowerCase(),h=h.toLowerCase()),o&&(c=WW(c),h=ZI(h)),u==="start"?h.substr(0,c.length)===c:h.indexOf(c)>-1}},KW=["innerRef"];function qW(t){var e=t.innerRef,n=Xi(t,KW),i=wX(n,"onExited","in","enter","exit","appear");return re("input",se({ref:e},i,{css:ov({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ZW=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function JW(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,r=t.onTopArrive,s=t.onTopLeave,o=T.useRef(!1),a=T.useRef(!1),l=T.useRef(0),u=T.useRef(null),c=T.useCallback(function(m,_){if(u.current!==null){var y=u.current,v=y.scrollTop,x=y.scrollHeight,E=y.clientHeight,w=u.current,C=_>0,S=x-E-v,R=!1;S>_&&o.current&&(i&&i(m),o.current=!1),C&&a.current&&(s&&s(m),a.current=!1),C&&_>S?(n&&!o.current&&n(m),w.scrollTop=x,R=!0,o.current=!0):!C&&-_>v&&(r&&!a.current&&r(m),w.scrollTop=0,R=!0,a.current=!0),R&&ZW(m)}},[n,i,r,s]),h=T.useCallback(function(m){c(m,m.deltaY)},[c]),f=T.useCallback(function(m){l.current=m.changedTouches[0].clientY},[]),g=T.useCallback(function(m){var _=l.current-m.changedTouches[0].clientY;c(m,_)},[c]),d=T.useCallback(function(m){if(m){var _=vX?{passive:!1}:!1;m.addEventListener("wheel",h,_),m.addEventListener("touchstart",f,_),m.addEventListener("touchmove",g,_)}},[g,f,h]),p=T.useCallback(function(m){m&&(m.removeEventListener("wheel",h,!1),m.removeEventListener("touchstart",f,!1),m.removeEventListener("touchmove",g,!1))},[g,f,h]);return T.useEffect(function(){if(e){var m=u.current;return d(m),function(){p(m)}}},[e,d,p]),function(m){u.current=m}}var Uw=["boxSizing","height","overflow","paddingRight","position"],zw={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function jw(t){t.cancelable&&t.preventDefault()}function Bw(t){t.stopPropagation()}function $w(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function Vw(){return"ontouchstart"in window||navigator.maxTouchPoints}var Xw=!!(typeof window<"u"&&window.document&&window.document.createElement),bl=0,wo={capture:!1,passive:!1};function QW(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,r=T.useRef({}),s=T.useRef(null),o=T.useCallback(function(l){if(Xw){var u=document.body,c=u&&u.style;if(i&&Uw.forEach(function(d){var p=c&&c[d];r.current[d]=p}),i&&bl<1){var h=parseInt(r.current.paddingRight,10)||0,f=document.body?document.body.clientWidth:0,g=window.innerWidth-f+h||0;Object.keys(zw).forEach(function(d){var p=zw[d];c&&(c[d]=p)}),c&&(c.paddingRight="".concat(g,"px"))}u&&Vw()&&(u.addEventListener("touchmove",jw,wo),l&&(l.addEventListener("touchstart",$w,wo),l.addEventListener("touchmove",Bw,wo))),bl+=1}},[i]),a=T.useCallback(function(l){if(Xw){var u=document.body,c=u&&u.style;bl=Math.max(bl-1,0),i&&bl<1&&Uw.forEach(function(h){var f=r.current[h];c&&(c[h]=f)}),u&&Vw()&&(u.removeEventListener("touchmove",jw,wo),l&&(l.removeEventListener("touchstart",$w,wo),l.removeEventListener("touchmove",Bw,wo)))}},[i]);return T.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var eH=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},tH={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function nH(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,r=i===void 0?!0:i,s=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,u=JW({isEnabled:r,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),c=QW({isEnabled:n}),h=function(g){u(g),c(g)};return re(T.Fragment,null,n&&re("div",{onClick:eH,css:tH}),e(h))}var iH={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},rH=function(e){var n=e.name,i=e.onFocus;return re("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:iH,value:"",onChange:function(){}})},sH=rH;function hv(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function oH(){return hv(/^iPhone/i)}function JI(){return hv(/^Mac/i)}function aH(){return hv(/^iPad/i)||JI()&&navigator.maxTouchPoints>1}function lH(){return oH()||aH()}function uH(){return JI()||lH()}var cH=function(e){return e.label},hH=function(e){return e.label},fH=function(e){return e.value},dH=function(e){return!!e.isDisabled},gH={clearIndicator:qX,container:UX,control:iW,dropdownIndicator:YX,group:aW,groupHeading:uW,indicatorsContainer:$X,indicatorSeparator:JX,input:dW,loadingIndicator:tW,loadingMessage:kX,menu:RX,menuList:AX,menuPortal:NX,multiValue:_W,multiValueLabel:vW,multiValueRemove:xW,noOptionsMessage:LX,option:MW,placeholder:IW,singleValue:OW,valueContainer:jX},mH={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},pH=4,QI=4,yH=38,_H=QI*2,vH={baseUnit:QI,controlHeight:yH,menuGutter:_H},nm={borderRadius:pH,colors:mH,spacing:vH},xH={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:kw(),captureMenuScroll:!kw(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:YW(),formatGroupLabel:cH,getOptionLabel:hH,getOptionValue:fH,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:dH,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!yX(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ww(t,e,n,i){var r=nP(t,e,n),s=iP(t,e,n),o=tP(t,e),a=dd(t,e);return{type:"option",data:e,isDisabled:r,isSelected:s,label:o,value:a,index:i}}function ef(t,e){return t.options.map(function(n,i){if("options"in n){var r=n.options.map(function(o,a){return Ww(t,o,e,a)}).filter(function(o){return Yw(t,o)});return r.length>0?{type:"group",data:n,options:r,index:i}:void 0}var s=Ww(t,n,e,i);return Yw(t,s)?s:void 0}).filter(xX)}function eP(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,J1(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function Hw(t,e){return t.reduce(function(n,i){return i.type==="group"?n.push.apply(n,J1(i.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(i.index,"-").concat(r.index)}}))):n.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),n},[])}function EH(t,e){return eP(ef(t,e))}function Yw(t,e){var n=t.inputValue,i=n===void 0?"":n,r=e.data,s=e.isSelected,o=e.label,a=e.value;return(!sP(t)||!s)&&rP(t,{label:o,value:a,data:r},i)}function wH(t,e){var n=t.focusedValue,i=t.selectValue,r=i.indexOf(n);if(r>-1){var s=e.indexOf(n);if(s>-1)return n;if(r<e.length)return e[r]}return null}function SH(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var im=function(e,n){var i,r=(i=e.find(function(s){return s.data===n}))===null||i===void 0?void 0:i.id;return r||null},tP=function(e,n){return e.getOptionLabel(n)},dd=function(e,n){return e.getOptionValue(n)};function nP(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function iP(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=dd(t,e);return n.some(function(r){return dd(t,r)===i})}function rP(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var sP=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},CH=1,oP=function(t){L$(n,t);var e=F$(n);function n(i){var r;if(A$(this,n),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=uH(),r.controlRef=null,r.getControlRef=function(l){r.controlRef=l},r.focusedOptionRef=null,r.getFocusedOptionRef=function(l){r.focusedOptionRef=l},r.menuListRef=null,r.getMenuListRef=function(l){r.menuListRef=l},r.inputRef=null,r.getInputRef=function(l){r.inputRef=l},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(l,u){var c=r.props,h=c.onChange,f=c.name;u.name=f,r.ariaOnChange(l,u),h(l,u)},r.setValue=function(l,u,c){var h=r.props,f=h.closeMenuOnSelect,g=h.isMulti,d=h.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:d}),f&&(r.setState({inputIsHiddenAfterUpdate:!g}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(l,{action:u,option:c})},r.selectOption=function(l){var u=r.props,c=u.blurInputOnSelect,h=u.isMulti,f=u.name,g=r.state.selectValue,d=h&&r.isOptionSelected(l,g),p=r.isOptionDisabled(l,g);if(d){var m=r.getOptionValue(l);r.setValue(g.filter(function(_){return r.getOptionValue(_)!==m}),"deselect-option",l)}else if(!p)h?r.setValue([].concat(J1(g),[l]),"select-option",l):r.setValue(l,"select-option");else{r.ariaOnChange(l,{action:"select-option",option:l,name:f});return}c&&r.blurInput()},r.removeValue=function(l){var u=r.props.isMulti,c=r.state.selectValue,h=r.getOptionValue(l),f=c.filter(function(d){return r.getOptionValue(d)!==h}),g=Ch(u,f,f[0]||null);r.onChange(g,{action:"remove-value",removedValue:l}),r.focusInput()},r.clearValue=function(){var l=r.state.selectValue;r.onChange(Ch(r.props.isMulti,[],null),{action:"clear",removedValues:l})},r.popValue=function(){var l=r.props.isMulti,u=r.state.selectValue,c=u[u.length-1],h=u.slice(0,u.length-1),f=Ch(l,h,h[0]||null);c&&r.onChange(f,{action:"pop-value",removedValue:c})},r.getFocusedOptionId=function(l){return im(r.state.focusableOptionsWithIds,l)},r.getFocusableOptionsWithIds=function(){return Hw(ef(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return hX.apply(void 0,[r.props.classNamePrefix].concat(u))},r.getOptionLabel=function(l){return tP(r.props,l)},r.getOptionValue=function(l){return dd(r.props,l)},r.getStyles=function(l,u){var c=r.props.unstyled,h=gH[l](u,c);h.boxSizing="border-box";var f=r.props.styles[l];return f?f(h,u):h},r.getClassNames=function(l,u){var c,h;return(c=(h=r.props.classNames)[l])===null||c===void 0?void 0:c.call(h,u)},r.getElementId=function(l){return"".concat(r.state.instancePrefix,"-").concat(l)},r.getComponents=function(){return FW(r.props)},r.buildCategorizedOptions=function(){return ef(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return eP(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(l,u){r.setState({ariaSelection:ne({value:l},u)})},r.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(l){r.blockOptionHover=!1},r.onControlMouseDown=function(l){if(!l.defaultPrevented){var u=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&r.onMenuClose():u&&r.openMenu("first"):(u&&(r.openAfterFocus=!0),r.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},r.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!r.props.isDisabled){var u=r.props,c=u.isMulti,h=u.menuIsOpen;r.focusInput(),h?(r.setState({inputIsHiddenAfterUpdate:!c}),r.onMenuClose()):r.openMenu("first"),l.preventDefault()}},r.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(r.clearValue(),l.preventDefault(),r.openAfterFocus=!1,l.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(l){typeof r.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&Ig(l.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(l)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(l){var u=l.touches,c=u&&u.item(0);c&&(r.initialTouchX=c.clientX,r.initialTouchY=c.clientY,r.userIsDragging=!1)},r.onTouchMove=function(l){var u=l.touches,c=u&&u.item(0);if(c){var h=Math.abs(c.clientX-r.initialTouchX),f=Math.abs(c.clientY-r.initialTouchY),g=5;r.userIsDragging=h>g||f>g}},r.onTouchEnd=function(l){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(l.target)&&r.menuListRef&&!r.menuListRef.contains(l.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(l){r.userIsDragging||r.onControlMouseDown(l)},r.onClearIndicatorTouchEnd=function(l){r.userIsDragging||r.onClearIndicatorMouseDown(l)},r.onDropdownIndicatorTouchEnd=function(l){r.userIsDragging||r.onDropdownIndicatorMouseDown(l)},r.handleInputChange=function(l){var u=r.props.inputValue,c=l.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(c,{action:"input-change",prevInputValue:u}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(l){r.props.onFocus&&r.props.onFocus(l),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(l){var u=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(l),r.onInputChange("",{action:"input-blur",prevInputValue:u}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(l){if(!(r.blockOptionHover||r.state.focusedOption===l)){var u=r.getFocusableOptions(),c=u.indexOf(l);r.setState({focusedOption:l,focusedOptionId:c>-1?r.getFocusedOptionId(l):null})}},r.shouldHideSelectedOptions=function(){return sP(r.props)},r.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),r.focus()},r.onKeyDown=function(l){var u=r.props,c=u.isMulti,h=u.backspaceRemovesValue,f=u.escapeClearsValue,g=u.inputValue,d=u.isClearable,p=u.isDisabled,m=u.menuIsOpen,_=u.onKeyDown,y=u.tabSelectsValue,v=u.openMenuOnFocus,x=r.state,E=x.focusedOption,w=x.focusedValue,C=x.selectValue;if(!p&&!(typeof _=="function"&&(_(l),l.defaultPrevented))){switch(r.blockOptionHover=!0,l.key){case"ArrowLeft":if(!c||g)return;r.focusValue("previous");break;case"ArrowRight":if(!c||g)return;r.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(w)r.removeValue(w);else{if(!h)return;c?r.popValue():d&&r.clearValue()}break;case"Tab":if(r.isComposing||l.shiftKey||!m||!y||!E||v&&r.isOptionSelected(E,C))return;r.selectOption(E);break;case"Enter":if(l.keyCode===229)break;if(m){if(!E||r.isComposing)return;r.selectOption(E);break}return;case"Escape":m?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:g}),r.onMenuClose()):d&&f&&r.clearValue();break;case" ":if(g)return;if(!m){r.openMenu("first");break}if(!E)return;r.selectOption(E);break;case"ArrowUp":m?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":m?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!m)return;r.focusOption("pageup");break;case"PageDown":if(!m)return;r.focusOption("pagedown");break;case"Home":if(!m)return;r.focusOption("first");break;case"End":if(!m)return;r.focusOption("last");break;default:return}l.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++CH),r.state.selectValue=Ow(i.value),i.menuIsOpen&&r.state.selectValue.length){var s=r.getFocusableOptionsWithIds(),o=r.buildFocusableOptions(),a=o.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=s,r.state.focusedOption=o[a],r.state.focusedOptionId=im(s,o[a])}return r}return O$(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Lw(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&r.isDisabled||l&&a&&!r.menuIsOpen)&&this.focusInput(),l&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Lw(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,s){this.props.onInputChange(r,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,u=this.buildFocusableOptions(),c=r==="first"?0:u.length-1;if(!this.props.isMulti){var h=u.indexOf(a[0]);h>-1&&(c=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c],focusedOptionId:this.getFocusedOptionId(u[c])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(r){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var u=o.length-1,c=-1;if(o.length){switch(r){case"previous":l===0?c=0:l===-1?c=u:c=l-1;break;case"next":l>-1&&l<u&&(c=l+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:o[c]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,u=a.indexOf(o);o||(u=-1),r==="up"?l=u>0?u-1:a.length-1:r==="down"?l=(u+1)%a.length:r==="pageup"?(l=u-s,l<0&&(l=0)):r==="pagedown"?(l=u+s,l>a.length-1&&(l=a.length-1)):r==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nm):ne(ne({},nm),this.props.theme):nm}},{key:"getCommonProps",value:function(){var r=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,u=this.selectOption,c=this.setValue,h=this.props,f=h.isMulti,g=h.isRtl,d=h.options,p=this.hasValue();return{clearValue:r,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:p,isMulti:f,isRtl:g,options:d,selectOption:u,selectProps:h,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,s=r.isClearable,o=r.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(r,s){return nP(this.props,r,s)}},{key:"isOptionSelected",value:function(r,s){return iP(this.props,r,s)}},{key:"filterOption",value:function(r,s){return rP(this.props,r,s)}},{key:"formatOptionLabel",value:function(r,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(r,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,s=r.isDisabled,o=r.isSearchable,a=r.inputId,l=r.inputValue,u=r.tabIndex,c=r.form,h=r.menuIsOpen,f=r.required,g=this.getComponents(),d=g.Input,p=this.state,m=p.inputIsHidden,_=p.ariaSelection,y=this.commonProps,v=a||this.getElementId("input"),x=ne(ne(ne({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":f,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(_==null?void 0:_.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?T.createElement(d,se({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:v,innerRef:this.getInputRef,isDisabled:s,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:l},x)):T.createElement(qW,se({id:v,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:hd,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:c,value:""},x))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,u=s.MultiValueRemove,c=s.SingleValue,h=s.Placeholder,f=this.commonProps,g=this.props,d=g.controlShouldRenderValue,p=g.isDisabled,m=g.isMulti,_=g.inputValue,y=g.placeholder,v=this.state,x=v.selectValue,E=v.focusedValue,w=v.isFocused;if(!this.hasValue()||!d)return _?null:T.createElement(h,se({},f,{key:"placeholder",isDisabled:p,isFocused:w,innerProps:{id:this.getElementId("placeholder")}}),y);if(m)return x.map(function(S,R){var M=S===E,k="".concat(r.getOptionLabel(S),"-").concat(r.getOptionValue(S));return T.createElement(o,se({},f,{components:{Container:a,Label:l,Remove:u},isFocused:M,isDisabled:p,key:k,index:R,removeProps:{onClick:function(){return r.removeValue(S)},onTouchEnd:function(){return r.removeValue(S)},onMouseDown:function(U){U.preventDefault()}},data:S}),r.formatOptionLabel(S,"value"))});if(_)return null;var C=x[0];return T.createElement(c,se({},f,{data:C,isDisabled:p}),this.formatOptionLabel(C,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),s=r.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||u)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(s,se({},o,{innerProps:h,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),s=r.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!s||!u)return null;var h={"aria-hidden":"true"};return T.createElement(s,se({},o,{innerProps:h,isDisabled:l,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator,o=r.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return T.createElement(o,se({},a,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return T.createElement(s,se({},o,{innerProps:u,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var r=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,u=s.MenuList,c=s.MenuPortal,h=s.LoadingMessage,f=s.NoOptionsMessage,g=s.Option,d=this.commonProps,p=this.state.focusedOption,m=this.props,_=m.captureMenuScroll,y=m.inputValue,v=m.isLoading,x=m.loadingMessage,E=m.minMenuHeight,w=m.maxMenuHeight,C=m.menuIsOpen,S=m.menuPlacement,R=m.menuPosition,M=m.menuPortalTarget,k=m.menuShouldBlockScroll,A=m.menuShouldScrollIntoView,U=m.noOptionsMessage,B=m.onMenuScrollToTop,G=m.onMenuScrollToBottom;if(!C)return null;var j=function(H,L){var q=H.type,Z=H.data,te=H.isDisabled,xe=H.isSelected,Be=H.label,$e=H.value,Bt=p===Z,yn=te?void 0:function(){return r.onOptionHover(Z)},mi=te?void 0:function(){return r.selectOption(Z)},pi="".concat(r.getElementId("option"),"-").concat(L),_n={id:pi,onClick:mi,onMouseMove:yn,onMouseOver:yn,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:xe};return T.createElement(g,se({},d,{innerProps:_n,data:Z,isDisabled:te,isSelected:xe,key:pi,label:Be,type:q,value:$e,isFocused:Bt,innerRef:Bt?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(H.data,"menu"))},$;if(this.hasOptions())$=this.getCategorizedOptions().map(function(z){if(z.type==="group"){var H=z.data,L=z.options,q=z.index,Z="".concat(r.getElementId("group"),"-").concat(q),te="".concat(Z,"-heading");return T.createElement(o,se({},d,{key:Z,data:H,options:L,Heading:a,headingProps:{id:te,data:z.data},label:r.formatGroupLabel(z.data)}),z.options.map(function(xe){return j(xe,"".concat(q,"-").concat(xe.index))}))}else if(z.type==="option")return j(z,"".concat(z.index))});else if(v){var O=x({inputValue:y});if(O===null)return null;$=T.createElement(h,d,O)}else{var F=U({inputValue:y});if(F===null)return null;$=T.createElement(f,d,F)}var P={minMenuHeight:E,maxMenuHeight:w,menuPlacement:S,menuPosition:R,menuShouldScrollIntoView:A},N=T.createElement(bX,se({},d,P),function(z){var H=z.ref,L=z.placerProps,q=L.placement,Z=L.maxHeight;return T.createElement(l,se({},d,P,{innerRef:H,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:v,placement:q}),T.createElement(nH,{captureEnabled:_,onTopArrive:B,onBottomArrive:G,lockEnabled:k},function(te){return T.createElement(u,se({},d,{innerRef:function(Be){r.getMenuListRef(Be),te(Be)},innerProps:{role:"listbox","aria-multiselectable":d.isMulti,id:r.getElementId("listbox")},isLoading:v,maxHeight:Z,focusedOption:p}),$)}))});return M||R==="fixed"?T.createElement(c,se({},d,{appendTo:M,controlElement:this.controlRef,menuPlacement:S,menuPosition:R}),N):N}},{key:"renderFormField",value:function(){var r=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,u=s.name,c=s.required,h=this.state.selectValue;if(c&&!this.hasValue()&&!a)return T.createElement(sH,{name:u,onFocus:this.onValueInputFocus});if(!(!u||a))if(l)if(o){var f=h.map(function(p){return r.getOptionValue(p)}).join(o);return T.createElement("input",{name:u,type:"hidden",value:f})}else{var g=h.length>0?h.map(function(p,m){return T.createElement("input",{key:"i-".concat(m),name:u,type:"hidden",value:r.getOptionValue(p)})}):T.createElement("input",{name:u,type:"hidden",value:""});return T.createElement("div",null,g)}else{var d=h[0]?this.getOptionValue(h[0]):"";return T.createElement("input",{name:u,type:"hidden",value:d})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,u=s.isFocused,c=s.selectValue,h=this.getFocusableOptions();return T.createElement(VW,se({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:u,selectValue:c,focusableOptions:h,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),s=r.Control,o=r.IndicatorsContainer,a=r.SelectContainer,l=r.ValueContainer,u=this.props,c=u.className,h=u.id,f=u.isDisabled,g=u.menuIsOpen,d=this.state.isFocused,p=this.commonProps=this.getCommonProps();return T.createElement(a,se({},p,{className:c,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:f,isFocused:d}),this.renderLiveRegion(),T.createElement(s,se({},p,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:f,isFocused:d,menuIsOpen:g}),T.createElement(l,se({},p,{isDisabled:f}),this.renderPlaceholderOrValue(),this.renderInput()),T.createElement(o,se({},p,{isDisabled:f}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,c=s.isFocused,h=s.prevWasFocused,f=s.instancePrefix,g=r.options,d=r.value,p=r.menuIsOpen,m=r.inputValue,_=r.isMulti,y=Ow(d),v={};if(o&&(d!==o.value||g!==o.options||p!==o.menuIsOpen||m!==o.inputValue)){var x=p?EH(r,y):[],E=p?Hw(ef(r,y),"".concat(f,"-option")):[],w=a?wH(s,y):null,C=SH(s,x),S=im(E,C);v={selectValue:y,focusedOption:C,focusedOptionId:S,focusableOptionsWithIds:E,focusedValue:w,clearFocusValueOnUpdate:!1}}var R=l!=null&&r!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},M=u,k=c&&h;return c&&!k&&(M={value:Ch(_,y,y[0]||null),options:y,action:"initial-input-focus"},k=!h),(u==null?void 0:u.action)==="initial-input-focus"&&(M=null),ne(ne(ne({},v),R),{},{prevProps:r,ariaSelection:M,prevWasFocused:k})}}]),n}(T.Component);oP.defaultProps=xH;var TH=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function MH(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,r=i===void 0?!1:i,s=t.defaultValue,o=s===void 0?null:s,a=t.inputValue,l=t.menuIsOpen,u=t.onChange,c=t.onInputChange,h=t.onMenuClose,f=t.onMenuOpen,g=t.value,d=Xi(t,TH),p=T.useState(a!==void 0?a:n),m=dt(p,2),_=m[0],y=m[1],v=T.useState(l!==void 0?l:r),x=dt(v,2),E=x[0],w=x[1],C=T.useState(g!==void 0?g:o),S=dt(C,2),R=S[0],M=S[1],k=T.useCallback(function(O,F){typeof u=="function"&&u(O,F),M(O)},[u]),A=T.useCallback(function(O,F){var P;typeof c=="function"&&(P=c(O,F)),y(P!==void 0?P:O)},[c]),U=T.useCallback(function(){typeof f=="function"&&f(),w(!0)},[f]),B=T.useCallback(function(){typeof h=="function"&&h(),w(!1)},[h]),G=a!==void 0?a:_,j=l!==void 0?l:E,$=g!==void 0?g:R;return ne(ne({},d),{},{inputValue:G,menuIsOpen:j,onChange:k,onInputChange:A,onMenuClose:B,onMenuOpen:U,value:$})}var RH=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function bH(t){var e=t.defaultOptions,n=e===void 0?!1:e,i=t.cacheOptions,r=i===void 0?!1:i,s=t.loadOptions;t.options;var o=t.isLoading,a=o===void 0?!1:o,l=t.onInputChange,u=t.filterOption,c=u===void 0?null:u,h=Xi(t,RH),f=h.inputValue,g=T.useRef(void 0),d=T.useRef(!1),p=T.useState(Array.isArray(n)?n:void 0),m=dt(p,2),_=m[0],y=m[1],v=T.useState(typeof f<"u"?f:""),x=dt(v,2),E=x[0],w=x[1],C=T.useState(n===!0),S=dt(C,2),R=S[0],M=S[1],k=T.useState(void 0),A=dt(k,2),U=A[0],B=A[1],G=T.useState([]),j=dt(G,2),$=j[0],O=j[1],F=T.useState(!1),P=dt(F,2),N=P[0],z=P[1],H=T.useState({}),L=dt(H,2),q=L[0],Z=L[1],te=T.useState(void 0),xe=dt(te,2),Be=xe[0],$e=xe[1],Bt=T.useState(void 0),yn=dt(Bt,2),mi=yn[0],pi=yn[1];r!==mi&&(Z({}),pi(r)),n!==Be&&(y(Array.isArray(n)?n:void 0),$e(n)),T.useEffect(function(){return d.current=!0,function(){d.current=!1}},[]);var _n=T.useCallback(function(bt,vn){if(!s)return vn();var nt=s(bt,vn);nt&&typeof nt.then=="function"&&nt.then(vn,function(){return vn()})},[s]);T.useEffect(function(){n===!0&&_n(E,function(bt){d.current&&(y(bt||[]),M(!!g.current))})},[]);var qn=T.useCallback(function(bt,vn){var nt=fX(bt,vn,l);if(!nt){g.current=void 0,w(""),B(""),O([]),M(!1),z(!1);return}if(r&&q[nt])w(nt),B(nt),O(q[nt]),M(!1),z(!1);else{var Es=g.current={};w(nt),M(!0),z(!U),_n(nt,function(Zn){d&&Es===g.current&&(g.current=void 0,M(!1),B(nt),O(Zn||[]),z(!1),Z(Zn?ne(ne({},q),{},ea({},nt,Zn)):q))})}},[r,_n,U,q,l]),tn=N?[]:E&&U?$:_||[];return ne(ne({},h),{},{options:tn,isLoading:R||a,onInputChange:qn,filterOption:c})}var IH=T.forwardRef(function(t,e){var n=bH(t),i=MH(n);return T.createElement(oP,se({ref:e},i))}),PH=IH;const AH=async t=>{try{const e=`${t.road} ${t.housenumber} ${t.postalcode}`,n=`https://api.dataforsyningen.dk/rest/gsearch/v2.0/husnummer?q=${encodeURIComponent(e)}&limit=99&srid=25832`,r=await(await fetch(n,{headers:{token:Zt.API_STAC_TOKEN}})).json();if(!Array.isArray(r)||r.length===0)throw new Error("No houses found for the given address.");const s=r.find(a=>a.husnummertekst===t.housenumber&&a.postnummer===t.postalcode);if(!s||!s.geometri||!s.geometri.coordinates)throw new Error("House or coordinates not found in the response.");const o=s.geometri.coordinates[0];if(!Array.isArray(o)||o.length<2)throw new Error("Invalid coordinates found.");return o}catch(e){throw console.error("Error in addressToCoords:",e.message),e.message.includes("No houses found")&&console.warn("The address might be incorrect or not available in the dataset."),e}},OH=async t=>{const e=`https://api.dataforsyningen.dk/rest/gsearch/v2.0/husnummer?q=${t}&limit=100&srid=25832`;return(await(await fetch(e,{headers:{token:Zt.API_STAC_TOKEN}})).json()).map(r=>({value:{road:r.vejnavn,housenumber:r.husnummertekst,postalcode:r.postnummer},label:`${r.visningstekst}, ${r.postnummer}`}))};function fv({setCoordinates:t=null,setAddress:e=null}){const n=async r=>{t&&t(await AH(r.value)),e&&e(r.value)},i=async r=>{if(r!=="")return await OH(r)};return I.jsx(I.Fragment,{children:I.jsx("div",{children:I.jsx(PH,{cacheOptions:!0,defaultOptions:!0,loadOptions:i,onChange:n,placeholder:"Search..",isClearable:!0})})})}Mt.defs("EPSG:25832","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs");Mt.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");const LH=({setCoordinates:t})=>{const[e,n]=T.useState(null),i=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{const{latitude:s,longitude:o}=r.coords;try{const[a,l]=Mt("EPSG:4326","EPSG:25832",[o,s]);t([a,l]),n(null)}catch{n("Error converting coordinates.")}},r=>{n(r.message)}):n("Geolocation is not supported by this browser.")};return I.jsxs("div",{children:[I.jsx("button",{onClick:i,children:"Go to Current Location"}),e&&I.jsxs("p",{children:["Error: ",e]})]})},kH="skraafotos2021",DH=5;function FH(){const[t,e]=T.useState(null),[n,i]=T.useState([714841.046854,6194210065399e-6]),[r,s]=T.useState("north");return T.useEffect(()=>{k_(n,r,kH,DH).then(o=>{if(o.features&&o.features.length>0){const a=o.features[0].assets.thumbnail.href;e(a)}else e(null)}).catch(o=>{console.error("Error fetching STAC items:",o)})},[r,n]),I.jsx(I.Fragment,{children:I.jsx("div",{className:"centerpage",children:I.jsxs("div",{className:"page col-9",children:[I.jsxs("div",{className:"title-and-search",children:[I.jsx("h2",{className:"white",children:"STAC API Image:"}),I.jsx("p",{className:"white",children:"Insert address to view oblique aerial images from multiple directions"}),I.jsx(fv,{setCoordinates:i})]}),I.jsxs("div",{className:"response",children:[t?I.jsx(I$,{src:t,setDirection:s}):I.jsx("p",{children:"Loading image viewer..."}),I.jsx("div",{children:I.jsx(LH,{setCoordinates:i})})]})]})})})}class NH{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Bn,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let i=n.dataProjection?De(n.dataProjection):this.readProjection(e);n.extent&&i&&i.getUnits()==="tile-pixels"&&(i=De(i),i.setWorldExtent(n.extent)),n={dataProjection:i,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ae()}readFeature(e,n){return ae()}readFeatures(e,n){return ae()}readGeometry(e,n){return ae()}readProjection(e){return ae()}writeFeature(e,n){return ae()}writeFeatures(e,n){return ae()}writeGeometry(e,n){return ae()}}function dv(t,e,n){const i=n?De(n.featureProjection):null,r=n?De(n.dataProjection):null;let s=t;if(i&&r&&!Bs(i,r)){e&&(s=t.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Nu(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const GH={Point:Gi,LineString:Ui,Polygon:$i,MultiPoint:Mc,MultiLineString:Ua,MultiPolygon:za};function UH(t,e,n){return Array.isArray(e[0])?(vR(t,0,e,n)||(t=t.slice(),wp(t,0,e,n)),t):(h1(t,0,e,n)||(t=t.slice(),Hf(t,0,e,n)),t)}function aP(t,e){var s;const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(o=>aP({...t,geometry:o})).flat();const i=n.type==="MultiPolygon"?"Polygon":n.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=n.layout.length;return dv(new wn(i,i==="Polygon"?UH(n.flatCoordinates,n.ends,r):n.flatCoordinates,(s=n.ends)==null?void 0:s.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function gv(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map(r=>gv(r,e));return new Ku(i)}const n=GH[t.type];return dv(new n(t.flatCoordinates,t.layout,t.ends),!1,e)}class zH extends NH{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(Th(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(Th(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return ae()}readFeaturesFromObject(e,n){return ae()}readGeometry(e,n){return this.readGeometryFromObject(Th(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return ae()}readProjection(e){return this.readProjectionFromObject(Th(e))}readProjectionFromObject(e){return ae()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return ae()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return ae()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return ae()}}function Th(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class rm extends zH{constructor(e){e=e||{},super(),this.dataProjection=De(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=De(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=mv(i.geometry);if(this.featureClass===wn)return aP({geometry:r,id:i.id,properties:i.properties},n);const s=new Bn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(gv(r,n)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,n){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],n);u&&r.push(u)}}else r=[this.readFeatureFromObject(e,n)];return r.flat()}readGeometryFromObject(e,n){return jH(e,n)}readProjectionFromObject(e){const n=e.crs;let i;if(n)if(n.type=="name")i=De(n.properties.name);else if(n.type==="EPSG")i=De("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,n){n=this.adaptOptions(n);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=cy(o,n),delete s[e.getGeometryName()]),Zs(s)||(i.properties=s),i}writeFeaturesObject(e,n){n=this.adaptOptions(n);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],n));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,n){return cy(e,this.adaptOptions(n))}}function mv(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=$H(t);break}case"LineString":{n=VH(t);break}case"Polygon":{n=YH(t);break}case"MultiPoint":{n=WH(t);break}case"MultiLineString":{n=XH(t);break}case"MultiPolygon":{n=HH(t);break}case"GeometryCollection":{n=BH(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function jH(t,e){const n=mv(t);return gv(n,e)}function BH(t,e){return t.geometries.map(function(i){return mv(i)})}function $H(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:oo(e.length)}}function VH(t){var i;const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:oo(((i=e[0])==null?void 0:i.length)||2)}}function XH(t){var s,o;const e=t.coordinates,n=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length)||2,i=[],r=Ec(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:oo(n)}}function WH(t){var n;const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:oo(((n=e[0])==null?void 0:n.length)||2)}}function HH(t){var s,o;const e=t.coordinates,n=[],i=((o=(s=e[0])==null?void 0:s[0])==null?void 0:o[0].length)||2,r=hR(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:r,layout:oo(i)}}function YH(t){var s,o;const e=t.coordinates,n=[],i=(o=(s=e[0])==null?void 0:s[0])==null?void 0:o.length,r=Ec(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:r,layout:oo(i)}}function cy(t,e){t=dv(t,!0,e);const n=t.getType();let i;switch(n){case"Point":{i=eY(t);break}case"LineString":{i=qH(t);break}case"Polygon":{i=tY(t,e);break}case"MultiPoint":{i=JH(t);break}case"MultiLineString":{i=ZH(t);break}case"MultiPolygon":{i=QH(t,e);break}case"GeometryCollection":{i=KH(t,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return i}function KH(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(i){return cy(i,e)})}}function qH(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function ZH(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function JH(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function QH(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function eY(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function tY(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const nY={SELECT:"select"};class iY extends di{constructor(e,n,i,r){super(e),this.selected=n,this.deselected=i,this.mapBrowserEvent=r}}const Mh={};class pv extends sl{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:f9,this.addCondition_=e.addCondition?e.addCondition:Ap,this.removeCondition_=e.removeCondition?e.removeCondition:Ap,this.toggleCondition_=e.toggleCondition?e.toggleCondition:b1,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:is,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:rY(),this.features_=e.features||new ri;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const i=e.layers;n=function(r){return i.includes(r)}}else n=is;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[le(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[le(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(mt.ADD,this.boundAddFeature_),this.features_.addEventListener(mt.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(mt.ADD,this.boundAddFeature_),this.features_.removeEventListener(mt.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof Tc&&r.getSource()&&r.getSource().hasFeature(n))return r});i&&this.addFeatureLayerAssociation_(n,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const n=le(e);n in Mh||(Mh[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let r=n.length-1;r>=0;--r){const s=n[r];if(s!==this&&s instanceof pv&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const i=le(e);e.setStyle(Mh[i]),delete Mh[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[le(e)]}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!n&&!i&&!r,o=e.map,a=this.getFeatures(),l=[],u=[];if(s){ro(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof Bn)||!this.filter_(c,h)))return this.addFeatureLayerAssociation_(c,h),u.push(c),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=a.getLength()-1;c>=0;--c){const h=a.item(c),f=u.indexOf(h);f>-1?u.splice(f,1):(a.remove(h),l.push(h))}u.length!==0&&a.extend(u)}else{o.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof Bn)||!this.filter_(c,h)))return(n||r)&&!a.getArray().includes(c)?(this.addFeatureLayerAssociation_(c,h),u.push(c)):(i||r)&&a.getArray().includes(c)&&(l.push(c),this.removeFeatureLayerAssociation_(c)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=l.length-1;c>=0;--c)a.remove(l[c]);a.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new iY(nY.SELECT,u,l,e)),!0}}function rY(){const t=kR();return Wn(t.Polygon,t.LineString),Wn(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}const sY="/assets/loading-loader-ezgif.com-effects-BFPTKgHy.gif";function oY(){const t=T.useRef(null),e=T.useRef(null),n=T.useRef(null),[i,r]=T.useState(null),[s,o]=T.useState(null),[a,l]=T.useState(null),[u,c]=T.useState(""),[h,f]=T.useState(!1);T.useEffect(()=>{const p=new ga,m=new Tc({source:p,style:new cn({fill:new Vi({color:"rgba(255, 255, 255, 0.5)"}),stroke:new cr({color:"#545C5D",width:3})})}),_=new I1({target:t.current,layers:[new Mb({source:new Rb}),m],view:new jn({center:[714841.046854,6194210065399e-6],zoom:10,projection:"EPSG:25832"})}),y=new Tb({element:e.current,autoPan:{animation:{duration:250}}});_.addOverlay(y),r(_),o(m);const v=C=>{const S=C.coordinate;let R=null;if(_.forEachFeatureAtPixel(C.pixel,M=>(R=M,!0)),R){f(!0);const M=R.getProperties(),k=document.getElementById("popup-content");if(!k){console.error("Popup content element not found."),f(!1);return}let A="";if(M.doklink){if(M.gml_id){console.log("gml_id found in the feature properties:",M.gml_id);const U=x(M.gml_id);A=`
              <a href="${M.doklink}" target="_blank" style="color: blue; text-decoration: underline;">
                Open Doklink (${U})
              </a>`}else console.log("Doklink found in the feature properties (but no gml_id):",M),A=`
              <a href="${M.doklink}" target="_blank" style="color: blue; text-decoration: underline;">
                Open Doklink
              </a>`;k.innerHTML=A,y.setPosition(S)}else console.warn("No doklink found in the feature properties."),y.setPosition(void 0);f(!1)}else y.setPosition(void 0)},x=C=>{const S=C.split("_");return S[2]==="kommuneplan"?`${S[4].charAt(0).toUpperCase()+S[4].slice(1).toLowerCase()} Til ${S[2].charAt(0).toUpperCase()+S[2].slice(1).toLowerCase()} `:S[2]==="lokalplan"?`${S[3].charAt(0).toUpperCase()+S[3].slice(1).toLowerCase()} Til ${S[2].charAt(0).toUpperCase()+S[2].slice(1).toLowerCase()} `:null};_.on("singleclick",v);const E=C=>{C.preventDefault(),y.setPosition(void 0),n.current.blur()};n.current.addEventListener("click",E);const w=new pv;return w.getFeatures().on("add",function(C){C.element}),_.addInteraction(w),()=>{_.un("singleclick",v),_.setTarget(null)}},[]),T.useEffect(()=>{a&&g()},[a]);const g=async()=>{try{f(!0);const m=await(await fetch(`${Zt.api_base_url}/get_plandata/${a.road} ${a.housenumber}, ${a.postalcode}`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}})).json();!m.komuneplan&&!m.lokalplan&&console.warn("No polygons found for the address.");const _=new ga;m.komuneplan&&_.addFeatures(new rm().readFeatures(m.komuneplan,{dataProjection:"EPSG:25832",featureProjection:i.getView().getProjection()})),m.lokalplan&&_.addFeatures(new rm().readFeatures(m.lokalplan,{dataProjection:"EPSG:25832",featureProjection:i.getView().getProjection()})),s.setSource(_)}catch(p){console.error("Error fetching polygons:",p)}finally{f(!1)}},d=async()=>{if(!u){s&&s.getSource()&&(s.getSource().clear(),console.log("Map cleared because no feature was selected."));return}try{f(!0);const m=await(await fetch(`${Zt.api_base_url}/toggle/${u}`)).json(),_=new ga({features:new rm().readFeatures(m,{dataProjection:"EPSG:25832",featureProjection:i.getView().getProjection()})});s.setSource(_)}catch(p){console.error("Error toggling feature:",p)}finally{f(!1)}};return T.useEffect(()=>{d()},[u]),I.jsxs("div",{className:"mapcenterpage",children:[I.jsx("div",{className:"map-header col-9",children:I.jsxs("div",{className:"toolbar",children:[I.jsx("div",{className:"title-and-search",children:I.jsx(fv,{setAddress:l})}),I.jsx("p",{className:"white",children:"Insert address to view relevant zones"}),I.jsx("button",{className:"tool-btn",onClick:g,children:"Get Zones"}),I.jsx("div",{className:"select-container",children:I.jsxs("select",{className:"tool-select",value:u,onChange:p=>c(p.target.value),children:[I.jsx("option",{value:"",children:"Select Overlay"}),I.jsx("option",{value:"theme_pdk_kommuneplan_oversigt_forslag_v",children:"Forslag til kommuneplaner"}),I.jsx("option",{value:"theme_pdk_kommuneplan_oversigt_vedtaget_v",children:"Vedtagne kommuneplaner"}),I.jsx("option",{value:"theme_pdk_lokalplan_forslag_v",children:"Forslag til lokalplaner"}),I.jsx("option",{value:"theme_pdk_lokalplan_vedtaget_v",children:"Vedtagne lokalplaner"})]})}),I.jsx("p",{className:"white",children:"Select feature to view relevant zones"}),h&&I.jsx("div",{className:"loading",children:I.jsx("img",{src:sY,alt:"loading"})})]})}),I.jsxs("div",{className:"mappage col-9",children:[I.jsx("div",{id:"map",className:"geomap",ref:t}),I.jsxs("div",{id:"popup",className:"ol-popup",ref:e,children:[I.jsx("a",{href:"#",id:"popup-closer",className:"ol-popup-closer",ref:n}),I.jsx("div",{id:"popup-content"})]})]})]})}const aY=({src:t,onClick:e})=>{const[n,i]=T.useState(1);return I.jsxs(z1,{className:"text-center",onClick:e,children:[" ",I.jsx("div",{className:"image-container-multi",children:I.jsx("div",{children:I.jsx("img",{src:t,alt:"Viewer",style:{transform:`scale(${n})`,transition:"transform 0.2s",maxWidth:"100%",height:"auto",userSelect:"none",WebkitUserDrag:"none"},className:"draggable-image"})})})]})},Kw=["north","south","east","west","nadir"],lY="skraafotos2023",uY=5;function cY(){const[t,e]=T.useState({}),[n,i]=T.useState({}),[r,s]=T.useState([728368.05,617430456e-2]),[o,a]=T.useState(null),[l,u]=T.useState("north"),[c,h]=T.useState(null),[f,g]=T.useState(null);return T.useEffect(()=>{if(!r)return;(async()=>{var v,x,E,w;const p={},m={},_={};let y=null;try{for(const C of Kw)try{const S=await k_(r,C,lY,uY);if(S.features&&S.features.length>0){const R=S.features[0],M=((x=(v=R.assets)==null?void 0:v.thumbnail)==null?void 0:x.href)||null,k=((w=(E=R.assets)==null?void 0:E.data)==null?void 0:w.href)||null,A=R;p[C]=M,m[C]=k,_[C]=A,C===l&&(y=R)}else console.warn(`No features found for ${C}`),p[C]=null,m[C]=null,_[C]=null}catch(S){console.error(`Error fetching STAC items for ${C}:`,S),p[C]=null,m[C]=null,_[C]=null}g(y),e(p),i(m)}catch(C){console.error("Error fetching images or related data:",C)}})()},[r,l]),T.useEffect(()=>{(async()=>{if(!(!r||!f))try{const p=await zM(Zt.API_DHM_TOKENA,Zt.API_DHM_TOKENB,r);a(p);const m=await jM(r,f,o);m&&m.imageCoord&&h(m.imageCoord)}catch(p){console.error("Error fetching elevation data or updating center:",p),a(null)}})()},[r,f]),I.jsx("div",{className:"centerpage",children:I.jsxs("div",{className:"page col-9 column",children:[I.jsx("div",{children:I.jsxs("div",{className:"title-and-search",children:[I.jsx(fv,{setCoordinates:s}),I.jsx("p",{className:"white",children:"Insert address to view oblique aerial images from multiple directions"})]})}),I.jsxs("div",{className:"image-gallery",children:[n[l]&&I.jsx("div",{className:"high-quality-viewer",children:I.jsx(Cb,{url:n[l],center:c})}),I.jsx("div",{className:"thumbnails",children:Kw.filter(d=>d!==l).map(d=>I.jsxs("div",{className:"thumbnail-container",children:[I.jsx("p",{className:"direction-title",children:d.charAt(0).toUpperCase()+d.slice(1)}),t[d]?I.jsx(aY,{src:t[d],onClick:()=>u(d)}):I.jsxs("p",{children:["Loading ",d," image..."]})]},d))})]})]})})}const hY=()=>I.jsxs("div",{className:"error-page",children:[I.jsx("h1",{children:"404"}),I.jsx("h2",{children:"Page Not Found"}),I.jsx("p",{children:"Sorry, the page you're looking for doesn't exist."}),I.jsx(wT,{to:"/",className:"home-link",children:"Go Back to Home"})]});function fY(){return I.jsx(jL,{children:I.jsx(LL,{children:I.jsxs(Rs,{path:"/",element:I.jsx(YL,{}),children:[I.jsx(Rs,{path:"map",element:I.jsx(qj,{})}),I.jsx(Rs,{path:"/zone",element:I.jsx(oY,{})}),I.jsx(Rs,{path:"/test",element:I.jsx(FH,{})}),I.jsx(Rs,{path:"/multiviewer",element:I.jsx(cY,{})}),I.jsx(Rs,{path:"*",element:I.jsx(hY,{})})]})})})}uT(document.getElementById("root")).render(I.jsx(T.StrictMode,{children:I.jsx(fY,{})}));export{CY as L,TY as a,tc as g};
